<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>加密文档测试</title>
    <url>/archives/c9238145.html</url>
    <content><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <div class="hbe-input-container">
  <input type="password" id="hbePass" placeholder="" />
    <label for="hbePass">请输入密码</label>
    <div class="bottom-line"></div>
  </div>
  <script id="hbeData" type="hbeData" data-hmacdigest="1ab5b9a1b8504bca0b28d43dbac2d8a90545a7de0741771cab3a91eeb656f5dc">1038eaa1cb568772309049d3e58e65ff5d6140142e1be9bc8e5a3710c0424f9083f0387c773bfdba8ceec36540129dce5afc6032cc3c67b0de8a4c82fbc37ce0</script>
</div>
<script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>工科生的基本功</category>
        <category>GitHub</category>
      </categories>
      <tags>
        <tag>GitHub</tag>
        <tag>Library</tag>
      </tags>
  </entry>
  <entry>
    <title>多设备管理个人博客</title>
    <url>/archives/3a0407be.html</url>
    <content><![CDATA[<img src=" /images/20200130/00.jpg" width=50% />
对于新电脑，如何管理已经搭建好的个人博客呢？
<a id="more"></a>

<h1 id="〇、前言"><a href="#〇、前言" class="headerlink" title="〇、前言"></a>〇、前言</h1><p>当我们更换了一台电脑后，想更新博客内容，如果每次都新建一次网站，未免过于繁琐，因此需要一种方法来管理博客。</p>
<h1 id="一、原理"><a href="#一、原理" class="headerlink" title="一、原理"></a>一、原理</h1><p>使用hexo搭建的个人博客是静态网页，如果能将网页的静态文件和生产网页的源文件分开管理，那将非常方便。Github本身的分支给我们提供了很好的解决思路。在Github上建立的个人网站的仓库，默认分支是<code>master</code>分支，个人网站的内容也是从这个分支生成的。我们可以新建一个<code>source</code>分支，来存放源文件。这样做有两个好处：</p>
<ol>
<li>将网页的静态文件与源文件分开管理；</li>
<li>在新电脑上克隆源文件的时候，文件夹中的<code>.git</code>是相同的，如果是新建文件夹，那么这个不一样，会导致无法上传。</li>
</ol>
<h1 id="二、操作方法"><a href="#二、操作方法" class="headerlink" title="二、操作方法"></a>二、操作方法</h1><h2 id="2-1-源电脑上的操作方法"><a href="#2-1-源电脑上的操作方法" class="headerlink" title="2.1 源电脑上的操作方法"></a>2.1 源电脑上的操作方法</h2><p>直接在github的仓库中，找到<code>Branch：master</code>后的小箭头，输入<code>source</code>新建该分支。为了方便，将该分支在<code>Settings</code>-&gt;<code>Branches</code>中，将<code>source</code>分支设置为default，并Update。</p>
<p>使用<code>git clone https://github.com/ColaInLibrary/ColaInLibrary.github.io</code>在电脑的其他位置克隆一个名为<code>ColaInLibrary.github.io</code>的文件夹，并将存放博客源文件全拷贝到该文件夹。</p>
<p>使用<code>git branch</code>命令可以查看当前分支。依次执行<code>git add .</code>、<code>git commit -m &quot;自己修改的内容说明&quot;</code>、<code>git push origin source</code>，将网站的源文件提交至<code>source</code>分支。</p>
<h2 id="2-2-新电脑上的操作方法"><a href="#2-2-新电脑上的操作方法" class="headerlink" title="2.2 新电脑上的操作方法"></a>2.2 新电脑上的操作方法</h2><h3 id="2-2-1-SSH的添加"><a href="#2-2-1-SSH的添加" class="headerlink" title="2.2.1 SSH的添加"></a>2.2.1 SSH的添加</h3><p>1.配置本机全局git环境</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">npm install --save hexo-deployer-git</span><br><span class="line">git config --<span class="keyword">global</span> user.email <span class="string">"1901151471@qq.com"</span></span><br><span class="line">git config --<span class="keyword">global</span> user.name <span class="string">"ColaInLibrary"</span></span><br></pre></td></tr></table></figure>

<p>2.生成SSH密钥</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">less ~/.ssh/id_rsa.pub          <span class="comment"># 验证是否之前生成过ssh的key，若有，则会出现一串秘钥</span></span><br><span class="line">ssh-keygen -t rsa -C <span class="number">1901151471</span>@qq.com    <span class="comment"># 若无，则重新生成秘钥</span></span><br></pre></td></tr></table></figure>
<p>3.Github网页配置<br>从网页上打开<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tLw==" title="https://github.com/">github<i class="fa fa-external-link"></i></span>，没有注册的话需要注册一个账号，注册后正常登录，从头像那里选择<code>settings</code>-&gt;<code>SSH and GPG keys</code>，填入刚刚生成的SSH秘钥，名字可以自己填。在Terminal中输入下列命令测试是否成功。</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure>

<p>如果成功，会提示<code>Hi ColaInLibrary! You&#39;ve successfully authenticated, but GitHub does not provide shell access.</code></p>
<h3 id="2-2-2-新电脑上博客的配置与发布"><a href="#2-2-2-新电脑上博客的配置与发布" class="headerlink" title="2.2.2 新电脑上博客的配置与发布"></a>2.2.2 新电脑上博客的配置与发布</h3><ol>
<li>cd 欲存放源文件的目录</li>
<li><code>git clone https://github.com/ColaInLibrary/ColaInLibrary.github.io</code></li>
<li>打开<code>ColaInLibrary.github.io</code>文件夹，右键打开Terminal(Windows环境是Git Bash)，依次执行<code>npm install hexo</code>、<code>hexo init</code>、<code>npm install</code> 和 <code>npm install hexo-deployer-git</code>，将该文件夹配置为hexo相关环境</li>
<li>安装相应的插件<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">npm install hexo-symbols-count-time --save</span><br><span class="line">npm install hexo-related-popular-posts --save</span><br><span class="line">npm install hexo-douban --save</span><br><span class="line">npm install hexo-generator-sitemap --save</span><br><span class="line">npm install hexo-generator-baidu-sitemap --save</span><br><span class="line">npm install hexo-baidu-url-submit --save</span><br><span class="line">npm install hexo-generator-feed --save</span><br><span class="line">npm install hexo-generator-searchdb --save</span><br><span class="line">npm uninstall hexo-generator-index --save</span><br><span class="line">npm install hexo-generator-index-pin-top --save</span><br><span class="line">npm install hexo-blog-encrypt --save</span><br></pre></td></tr></table></figure></li>
<li>编写新的博客内容后，本地调试：<code>hexo clean &amp;&amp; hexo douban -bgm &amp;&amp; hexo g &amp;&amp; hexo s</code></li>
<li>将静态网页推送到github：<code>hexo clean &amp;&amp; hexo douban -bgm &amp;&amp; hexo g &amp;&amp; hexo deploy</code></li>
<li>如果所有文件均不涉密，依次执行<code>git add .</code>、<code>git commit -m &quot;自己修改的内容说明&quot;</code>、<code>git push origin source</code>，将网站的源文件提交至<code>source</code>分支。如果有博客内容加密，可以选择不执行这一步操作，即不更新source分支。</li>
</ol>
<blockquote>
<p>注意：在新电脑上第二次及以后更新博客内容时，在第2步时可以执行<code>git pull</code>来更新自己电脑的本地仓库，如果有加密博客而博客源码又未存放至github，注意需要将加密博客从源电脑拷贝到新电脑的博客文件夹中才行。上述操作的第6步会将将静态网页文件推送到<code>master</code>分支，第7步会将源文件推送到<code>source</code>分支。</p>
</blockquote>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p>1.<span class="exturl" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLzIxMTkzNzYyL2Fuc3dlci83OTEwOTI4MA==" title="https://www.zhihu.com/question/21193762/answer/79109280">使用hexo，如果换了电脑怎么更新博客？<i class="fa fa-external-link"></i></span></p>
]]></content>
      <categories>
        <category>工科生的基本功</category>
        <category>GitHub</category>
      </categories>
      <tags>
        <tag>GitHub</tag>
        <tag>Library</tag>
      </tags>
  </entry>
  <entry>
    <title>使用hexo+NexT+GitHub搭建个人博客</title>
    <url>/archives/36e68834.html</url>
    <content><![CDATA[<img src=" /images/20200128/00.jpg" width=50% />
> 简要记录Ubuntu下用hexo搭建个人博客的一些关键步骤，不包含NexT主题的具体优化。

<a id="more"></a>

<h1 id="〇、前言"><a href="#〇、前言" class="headerlink" title="〇、前言"></a>〇、前言</h1><p>新换了一台电脑后，重搭建了一次博客，记录一些关键步骤及参考网页。本文实践的环境：Ubuntu16.04、NexT7.7、hexo是Ubuntu自动安装的。</p>
<h1 id="一、安装环境"><a href="#一、安装环境" class="headerlink" title="一、安装环境"></a>一、安装环境</h1><p>1.移除hexo：</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">cd /usr/bin</span><br><span class="line">npm uninstall hexo -g</span><br></pre></td></tr></table></figure>
<p>2.移除node和npm</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">sudo apt remove node</span><br><span class="line">sudo apt remove nodejs</span><br><span class="line">sudo apt remove npm</span><br></pre></td></tr></table></figure>

<p>3.安装git</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">sudo apt-get install git</span><br></pre></td></tr></table></figure>

<p>4.安装nvm<br>这里的nvm实际上是node的包版本控制工具，在这里你可以找到各种你想要的版本，这里我们想要成功搭建肯定后面要安装稳定版的node了。直接在终端中执行下列语句</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">export NVM_DIR=<span class="string">"$HOME/.nvm"</span> &amp;&amp; (</span><br><span class="line">  git clone https://github.com/creationix/nvm.git <span class="string">"$NVM_DIR"</span></span><br><span class="line">  cd <span class="string">"$NVM_DIR"</span></span><br><span class="line">  git checkout `git describe --abbrev=<span class="number">0</span> --tags --match <span class="string">"v[0-9]*"</span> origin`</span><br><span class="line">) &amp;&amp; . <span class="string">"$NVM_DIR/nvm.sh"</span></span><br></pre></td></tr></table></figure>

<p>5.配置开机自启<br>在你的<del>/.bashrc,</del>/.profile,或者~/.zshrc中加入如下配置</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">sudo gedit ~/.bashrc  <span class="comment"># 打开该文件，并将下面的语句直接复制到文件末尾，保存关闭</span></span><br><span class="line">export NVM_DIR=<span class="string">"$HOME/.nvm"</span></span><br><span class="line">[ -s <span class="string">"$NVM_DIR/nvm.sh"</span> ] &amp;&amp; . <span class="string">"$NVM_DIR/nvm.sh"</span></span><br></pre></td></tr></table></figure>

<p>6.使用nvm安装node和npm<br>如果执行完上面的命令都没有问题，这里就应该要使用nvm来安装node和npm了，首先先检查远程仓库的版本</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">nvm ls-remote</span><br></pre></td></tr></table></figure>
<p>如果网不好的情况下这一步骤可能会失败，如果失败再多试几次，或者找个网好的地方就能更下来了，我之前网络情况不太好大概执行了4/5次才刷出来。</p>
<p>7.安装稳定版<br>如果上面那一步没问题的话，这里就开始安装node的稳定版了。</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">nvm install stable</span><br><span class="line">nvm use node            <span class="comment"># 启用安装好的版本</span></span><br><span class="line">nvm alias default node  <span class="comment"># 设置为默认版本</span></span><br></pre></td></tr></table></figure>

<p>8.安装hexo<br>如果nvm安装完成且成功配置好稳定版以后，就可以安装hexo了，安装hexo的过程其实和大家之前搜的没什么不同，之前安装失败的主要问题，要么是版本不匹配，要么是版本过低，在github也搜索过作者回答大致是低一点的版本是会有bug，不过高版本已经修复了。这边还是再重复一遍吧。</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli         <span class="comment"># 安装hexo</span></span><br><span class="line">mkdir blog                      <span class="comment"># 新建一个文件夹用来存放博客</span></span><br><span class="line">hexo init blog                  <span class="comment"># 用hexoa初始化文件夹</span></span><br><span class="line">cd blog                         <span class="comment"># 打开博客文件夹</span></span><br><span class="line">npm install                     <span class="comment"># 安装npm</span></span><br><span class="line">npm update -g                   <span class="comment"># 更新npm</span></span><br><span class="line">hexo g                          <span class="comment"># 生成静态界面</span></span><br><span class="line">hexo s                          <span class="comment"># 开启本地服务</span></span><br></pre></td></tr></table></figure>

<p>顺利的话,经过上述操作,可以在浏览器中通过网址<code>http://localhost:4000</code>打开一个静态网页,作为调试所用。</p>
<h1 id="二、Git的环境配置"><a href="#二、Git的环境配置" class="headerlink" title="二、Git的环境配置"></a>二、Git的环境配置</h1><p>1.配置本机全局git环境</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">npm install --save hexo-deployer-git</span><br><span class="line">git config --<span class="keyword">global</span> user.email <span class="string">"1901151471@qq.com"</span></span><br><span class="line">git config --<span class="keyword">global</span> user.name <span class="string">"ColaInLibrary"</span></span><br></pre></td></tr></table></figure>

<p>2.生成SSH密钥</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">less ~/.ssh/id_rsa.pub          <span class="comment"># 验证是否之前生成过ssh的key，若有，则会出现一串秘钥</span></span><br><span class="line">ssh-keygen -t rsa -C <span class="number">1901151471</span>@qq.com    <span class="comment"># 若无，则重新生成秘钥</span></span><br></pre></td></tr></table></figure>
<p>3.Github网页配置<br>从网页上打开<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tLw==" title="https://github.com/">github<i class="fa fa-external-link"></i></span>，没有注册的话需要注册一个账号，注册后正常登录，从头像那里选择<code>settings</code>-&gt;<code>SSH and GPG keys</code>，填入刚刚生成的SSH秘钥，名字可以自己填。在Terminal中输入下列命令测试是否成功。</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure>

<p>如果成功，会提示<code>Hi ColaInLibrary! You&#39;ve successfully authenticated, but GitHub does not provide shell access.</code></p>
<p>4.博客文件夹与GitHub关联<br>打开blog文件夹，在根目录下有一个主题配置文件<code>_config.yml</code>，打开后，找到<code>deploy</code>，并加入下面的内容：</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repository: git@github.com:YourName/YourName.github.io.git <span class="comment"># 用户名改成你自己的</span></span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>

<h1 id="三、推送博客到GitHub"><a href="#三、推送博客到GitHub" class="headerlink" title="三、推送博客到GitHub"></a>三、推送博客到GitHub</h1><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo deploy</span><br></pre></td></tr></table></figure>

<h1 id="四、安装插件"><a href="#四、安装插件" class="headerlink" title="四、安装插件"></a>四、安装插件</h1><p>安装插件及配置参考<span class="exturl" data-url="aHR0cHM6Ly90ZGluZy50b3AvYXJjaGl2ZXMvNTY3ZGViZTAuaHRtbA==" title="https://tding.top/archives/567debe0.html">小丁的博客使用的插件<i class="fa fa-external-link"></i></span>。对于非重新建立网站，只需安装插件：</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">npm install hexo-symbols-count-time --save</span><br><span class="line">npm install hexo-related-popular-posts --save</span><br><span class="line">npm install hexo-douban --save</span><br><span class="line">npm install hexo-generator-sitemap --save</span><br><span class="line">npm install hexo-generator-baidu-sitemap --save</span><br><span class="line">npm install hexo-baidu-url-submit --save</span><br><span class="line">npm install hexo-generator-feed --save</span><br><span class="line">npm install hexo-generator-searchdb --save</span><br><span class="line">npm uninstall hexo-generator-index --save</span><br><span class="line">npm install hexo-generator-index-pin-top --save</span><br><span class="line">npm install hexo-blog-encrypt --save</span><br><span class="line">hexo clean &amp;&amp; hexo douban -bgm &amp;&amp; hexo g &amp;&amp; hexo s</span><br></pre></td></tr></table></figure>

<h1 id="五、一些其他的修改"><a href="#五、一些其他的修改" class="headerlink" title="五、一些其他的修改"></a>五、一些其他的修改</h1><ol>
<li>底部增加网站运行时间:blog/themes/next/layout/_partials/footer.swig</li>
<li>底部增加总访问量，修改掉主题配置文件中busuanzi的计数，增加提示语blog/themes/next/layout/_partials/footer.swig</li>
<li>文章置顶：只需在博客源文件xx.md开始部分的<code>tags</code>后再添加一个<code>top: 100</code>，这个数字越大越靠前。置顶图标的设置：<code>blog/themes/next/layout/_macro/post.swig</code>文件，在 <div class="post-meta"> 的第一个 <span> 标签下的一段代码。</li>
<li>文章加密：在博客源文件xx.md开始部分添加如下内容：<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">password: abcd</span><br><span class="line">abstract: 这是一篇加密的博客哦～</span><br><span class="line">message: 请输入密码</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="参考链接："><a href="#参考链接：" class="headerlink" title="参考链接："></a>参考链接：</h1><p>1.<span class="exturl" data-url="aHR0cHM6Ly90ZGluZy50b3A=" title="https://tding.top">小丁的个人博客<i class="fa fa-external-link"></i></span><br>2.<span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Bhbjg2MTE5MDA3OS9hcnRpY2xlL2RldGFpbHMvODA4NjAxNTM=" title="https://blog.csdn.net/pan861190079/article/details/80860153">Ubuntu 上使用hexo+github打造个人blog<i class="fa fa-external-link"></i></span><br>3.<span class="exturl" data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC9hNmQwM2QxMzc4OGI=" title="https://www.jianshu.com/p/a6d03d13788b">linux 下 Hexo + GitHub 搭建个人博客<i class="fa fa-external-link"></i></span><br>4.<span class="exturl" data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC9mMjI4NWQ2M2IzYTg=" title="https://www.jianshu.com/p/f2285d63b3a8">在github上搭建hexo个人博客（Linux-Ubuntu）<i class="fa fa-external-link"></i></span></p>
]]></content>
      <categories>
        <category>工科生的基本功</category>
        <category>GitHub</category>
      </categories>
      <tags>
        <tag>GitHub</tag>
        <tag>Library</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>常用的数学基础知识集锦</title>
    <url>/archives/8586.html</url>
    <content><![CDATA[<img src=" /images/20191023/00.png" width=50% />
介绍在机器人控制中常用的基础数学知识。(持续更新中....)

<a id="more"></a>

<h1 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h1><p>泰勒级数、矩阵指数函数、向量的斜对称矩阵、向量叉乘是在机器人控制中常用的基本数学知识，本文对这些知识做一个汇总，为将来的机器人研究做铺垫。为了能正常浏览公式，推荐使用Chrome浏览器，并添加一款名为<code>TeX All the Things</code>的插件。在Markdown文本中编写公式的语法参见如下链接：<span class="exturl" data-url="aHR0cHM6Ly9tYXRoLm1ldGEuc3RhY2tleGNoYW5nZS5jb20vcXVlc3Rpb25zLzUwMjAvbWF0aGpheC1iYXNpYy10dXRvcmlhbC1hbmQtcXVpY2stcmVmZXJlbmNl" title="https://math.meta.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference">Markdown文本中编辑数学公式的语法规则<i class="fa fa-external-link"></i></span></p>
<p>通过上述语法规则所编写的大部分公式可以通过浏览器正常观看，但是矩阵除外。为了能正确显示矩阵，可以通过<span class="exturl" data-url="aHR0cHM6Ly93d3cuY29kZWNvZ3MuY29tL2xhdGV4L2VxbmVkaXRvci5waHA=" title="https://www.codecogs.com/latex/eqneditor.php">在线LaTeX公式编辑器<i class="fa fa-external-link"></i></span>将公式转为.png(建议分辨率为120)，再插入文中。</p>
<p>如果仍然觉得麻烦，可以到我的CSDN查看同步文章，链接如下：</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0NvbGFJbkxpYnJhcnkvYXJ0aWNsZS9kZXRhaWxzLzEwMjc3MDcwNg==" title="https://blog.csdn.net/ColaInLibrary/article/details/102770706">常用的数学基础知识集锦<i class="fa fa-external-link"></i></span></p>
<h1 id="二、矩阵指数函数及泰勒级数"><a href="#二、矩阵指数函数及泰勒级数" class="headerlink" title="二、矩阵指数函数及泰勒级数"></a>二、矩阵指数函数及泰勒级数</h1><p>常用的矩阵指数函数如下所示。</p>
<p>$$e^{\pmb{A}t} = \sum_{k=0}^\infty \frac{\pmb{A}^{k} t^k}{k!} = \pmb{I} + \pmb{A}^{t} + \frac{(\pmb{A}t)^2}{2!} + \frac{(\pmb{A}t)^3}{3!} + \cdots \tag {2-1} $$</p>
<p>$$\sin\pmb{A}{t} = \sum_{k=0}^\infty \frac{(-1)^k \pmb{A}^{2k+1} t^{2k+1}}{(2k+1)!} \tag {2-2}$$</p>
<p>$$\cos\pmb{A}{t} = \sum_{k=0}^\infty \frac{(-1)^k \pmb{A}^{2k} t^{2k}}{(2k)!} \tag {2-3}$$</p>
<p>正弦、余弦函数的泰勒级数展开如式(2-4)~(2-5)所示。</p>
<p>$$\sin x = \sum_{k=0}^\infty \frac{(-1)^k}{(2k+1)!} x^{2k+1} \tag {2-4}$$</p>
<p>$$\cos x = \sum_{k=0}^\infty \frac{(-1)^k}{(2k)!} x^{2k} \tag {2-5}$$</p>
<!--![01]( /images/20191023/01.gif)-->

<h1 id="三、一阶线性微分方程的解法"><a href="#三、一阶线性微分方程的解法" class="headerlink" title="三、一阶线性微分方程的解法"></a>三、一阶线性微分方程的解法</h1><p>给出一个一阶线性微分方程:</p>
<p>$$\dot{y}(t) = xy(t) \tag {3-1}$$</p>
<p>即：</p>
<p>$$\frac{\mathrm{d} y(t)}{\mathrm{d}t} = xy(t) \tag {3-2}$$</p>
<p>将式(3-2)变形，可得：</p>
<p>$$\frac{1}{y(t)}\mathrm{d}y(t) = x\mathrm{d}t \tag {3-3}$$</p>
<p>对上式两边进行积分：</p>
<p>$$\int {\frac{1}{y(t)}\mathrm{d}y(t)} = \int {x\mathrm{d}t}  \tag {3-4}$$</p>
<p>即：</p>
<p>$$\ln y(t) = xt + C\tag {3-5}$$</p>
<p>上式中，$C$是常数，对上式两边取指数，有：</p>
<p>$$y(t) = e^{xt}y(0) \tag {3-6}$$</p>
<p>式(3-6)中，$y(0)$表示$y(t)$在零时刻的取值。</p>
<!--![02]( /images/20191023/02.gif)-->

<h1 id="四、斜对称矩阵的定义及性质"><a href="#四、斜对称矩阵的定义及性质" class="headerlink" title="四、斜对称矩阵的定义及性质"></a>四、斜对称矩阵的定义及性质</h1><p>定义向量 $\pmb\omega =<br>\begin{bmatrix}<br>\omega_1 &amp; \omega_2 &amp; \omega_3<br>\end{bmatrix}^{\mathrm T}$ 及其斜对称矩阵(又称为反对称矩阵) $\pmb{\bf{\hat \omega }}$ 为：</p>
<p><img src="/images/20191023/03.png" alt="03.png"> $\tag {4-1}$ </p>
<!--我是多段注释，为了不把公式源码丢失而存在
$$
\begin{bmatrix}
0 & -\omega_3 & \omega_2 \\
\omega_3 & 0 & -\omega_1 \\
\omega_2 & \omega_1 & 0 \\
\end{bmatrix} \tag {4-1}
$$
-->

<p>斜对称矩阵的性质如下：</p>
<p>$$\pmb{\bf{\hat \omega }}^\mathrm{T} = -\pmb{\bf{\hat \omega }} \tag {4-2}$$</p>
<p>$$\pmb{A}\pmb{\bf{\hat \omega }}\pmb{A}^\mathrm{T} = (\pmb{A} \pmb{\bf{\hat \omega }}^\mathrm{T}) \tag {4-3}$$</p>
<p>$$\pmb{\bf{\hat \omega }}^2 = \pmb{\bf{ \omega }}\pmb{\bf{ \omega }}^\mathrm{T} - {\lVert \pmb\omega \rVert}^2 \pmb{I} \tag{4-4}$$</p>
<p>$$\pmb{\bf{\hat \omega }}^3 = -{\lVert \pmb\omega \rVert}^2 \pmb{A}\pmb{\bf{\hat \omega }} \tag{4-5}$$</p>
<!--![03]( /images/20191023/03.gif)-->

<h1 id="五、向量的叉乘"><a href="#五、向量的叉乘" class="headerlink" title="五、向量的叉乘"></a>五、向量的叉乘</h1><p>向量的叉乘，又称为向量积。</p>
<h2 id="1-向量积的模长"><a href="#1-向量积的模长" class="headerlink" title="1.向量积的模长"></a>1.向量积的模长</h2><p>两个平面向量$\pmb a$、$\pmb b$的叉乘记为$\pmb a \times\pmb b$，模长的计算方法如下：</p>
<p>$${\lvert \pmb a \times\pmb b\rvert} = {\lvert \pmb a\rvert} \cdot {\lvert \pmb b\rvert} \cdot \sin\theta \tag{5-1}$$</p>
<!--   ![04]( /images/20191023/04.gif)  -->

<h2 id="2-向量积的方向"><a href="#2-向量积的方向" class="headerlink" title="2.向量积的方向"></a>2.向量积的方向</h2><p>方向为：向量积的方向与这两个向量所在平面垂直，且遵守右手定则。（一个简单的确定满足“右手定则”的结果向量的方向的方法是这样的：若坐标系是满足右手定则的，当右手的四指从 $\pmb a$ 以不超过180度的转角转向 $\pmb b$ 时，竖起的大拇指指向是叉乘的方向。）</p>
<p><img src="/images/20191023/CrossProduct.png" alt="05"> </p>
<p>在上图中，$\pmb a \times\pmb b$ 的方向是垂直指向屏幕外侧。</p>
<h2 id="3-向量积的物理意义"><a href="#3-向量积的物理意义" class="headerlink" title="3.向量积的物理意义"></a>3.向量积的物理意义</h2><p>物理意义：向量的叉乘常用来表示平行四边形的面积。从上图可以看出：$\pmb a \times\pmb b$ 表示的是平行四边形面积，$\pmb a \times\pmb c$ 表示的是矩形面积，显然有：<br>$$\pmb a \times\pmb b  = \pmb a \times\pmb c \tag{5-2}$$</p>
<p>这意味着，$\pmb a$ 与任意以 $\pmb a$ 所在直线上一点为起点、以 $\pmb b$ 的终点为终点的向量进行叉乘，得到的结果都是一样的。</p>
<h2 id="4-向量积与斜对称矩阵"><a href="#4-向量积与斜对称矩阵" class="headerlink" title="4.向量积与斜对称矩阵"></a>4.向量积与斜对称矩阵</h2><p>将二维平面内的向量拓展到三维空间，若$\pmb a =<br>\begin{bmatrix}<br>a_1 &amp; a_2 &amp; a_3<br>\end{bmatrix}^{\mathrm T}$与$\pmb b =<br>\begin{bmatrix}<br>b_1 &amp; b_2 &amp; b_3<br>\end{bmatrix}^{\mathrm T}$进行叉乘，则有如下结果：</p>
<p><img src="/images/20191023/05.png" alt="06">$\tag{5-3}$</p>
<p>上式建立起了向量叉乘与向量斜对称矩阵之间的联系。</p>
]]></content>
      <categories>
        <category>工科生的基本功</category>
        <category>基本数学知识</category>
      </categories>
      <tags>
        <tag>Library</tag>
        <tag>数学基础</tag>
      </tags>
  </entry>
  <entry>
    <title>坐标旋转</title>
    <url>/archives/5096.html</url>
    <content><![CDATA[<blockquote>
<p>详细介绍坐标旋转的过程。开发环境： MATLAB 2016b + Robotics Toolbox 10.2.</p>
</blockquote>
<a id="more"></a>

<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>坐标旋转是机器人控制、航天器控制中不可缺少的基本功。在与其他同行交流的过程中，因坐标旋转而发生争论，特此将坐标旋转的推导过程记录，以防再发生混乱。</p>
<h1 id="坐标旋转的推导过程"><a href="#坐标旋转的推导过程" class="headerlink" title="坐标旋转的推导过程"></a>坐标旋转的推导过程</h1><p>首先建立坐标系，假定坐标系$ OX_1Y_1Z_1 $（以下简称1系）由坐标系$ OX_0Y_0Z_0 $（以下简称0系）绕$ Z_0 $轴逆时针旋转$ \theta $所得(右手旋转方向为正)。略去Z方向，在XY平面的示意图如下（这是由于在三维空间中是绕轴旋转，二维空间中绕点旋转）：</p>
<p><img src="/images/20191013/01.jpg" alt="01.jpg"></p>
<p>上图中，P点在0系中的坐标为$ (x_0, y_0) $，在1系中的坐标为$ (x_1, y_1) $。易得：</p>
<p>$$ OA = x_0, OB = y_0 $$<br>$$ OC = x_1, OD = y_1 $$<br>作$ AM \bot OC $，根据几何知识，易得：</p>
<p>$$ \angle AOC = \angle CPN = \angle MAN = \theta  $$<br>根据几何知识，易有：</p>
<p><img src="/images/20191013/02.gif" alt="02"> $ \tag{1} $</p>
<p><img src="/images/20191013/03.gif" alt="03"> $ \tag{2} $</p>
<p>由上式可得：</p>
<p>$$ {y_1} =  - {x_0}\sin \theta  + {y_0}\cos \theta $$<br>$$  \tag{3}$$</p>
<p>由于绕$Z$轴旋转，因此有：</p>
<p>$$ {z_1} = {z_0} $$<br>$$  \tag{4}$$<br>将上述结论式(1)、(3)~(4)整理成矩阵形式，有：<br><img src="/images/20191013/04.gif" alt="04"> $ \tag{5} $</p>
<p>上式中，$T$的下角标表示参考坐标系，上角标表示旋转后的坐标系。由此可得到从0系绕$Z$轴旋转$\theta$到1系的旋转矩阵：</p>
<p><img src="/images/20191013/13.gif" alt="05"> $ \tag{6} $</p>
<p>同理，可得从0系绕 Y 轴或 X 轴旋转到1系的旋转矩阵为：</p>
<p><img src="/images/20191013/12.gif" alt="06"> $ \tag{7} $</p>
<p>式(6)~(7)可以理解为用0系的坐标来得到1系的坐标。</p>
<p>同理，可以得到从1系到0系的旋转$-\theta$矩阵为：</p>
<p><img src="/images/20191013/14.gif" alt="07"> $ \tag{8} $</p>
<p>上式可以理解为用1系的坐标来得到0系。</p>
<p>从式(6)~(8)可以看出：</p>
<p>$$ T_0^1 = (T_1^0)^T $$<br>$ \tag{9} $</p>
<p>值得注意的是，说是旋转矩阵不同，其实最本质的还是在于所求坐标在哪个系的表达方式的问题，如式(10)所示。</p>
<p><img src="/images/20191013/15.gif" alt="15"> $ \tag{10} $</p>
<p>因此，与其费尽心思去记容易混淆的坐标旋转矩阵，不如懂得原理之后，每逢遇到旋转矩阵，就在脑海里想象整个的坐标旋转公式，搞明白等式左边的坐标是在哪个坐标系中表示。</p>
<h1 id="在航天器和机器人中的坐标旋转"><a href="#在航天器和机器人中的坐标旋转" class="headerlink" title="在航天器和机器人中的坐标旋转"></a>在航天器和机器人中的坐标旋转</h1><p>上节讲述了坐标旋转的推导过程，这在航天器和机器人两个领域是常用到的。但两个领域不同之处在于，航天器中往往采用的是用参考坐标系坐标来得到旋转后坐标系坐标的描述方式，机器人中则更习惯采用用旋转后坐标系坐标得到参考坐标系坐标的描述方式。</p>
<p>在经典的《机器人建模和控制》中，给出坐标旋转的定义方式如下图所示：</p>
<p><img src="/images/20191013/05.jpg" alt="08"><br><img src="/images/20191013/06.jpg" alt="09"></p>
<blockquote>
<p>注意在上图中，作者声明了上角标表示参考坐标系，下角标表示旋转后的坐标系。</p>
</blockquote>
<p>在《Robotics Modeling, Planning and Control》中，坐标旋转的描述方式为：</p>
<p><img src="/images/20191013/07.jpg" alt="10"><br><img src="/images/20191013/08.jpg" alt="11"><br><img src="/images/20191013/09.jpg" alt="12"></p>
<p>从以上的三张图中可以看出，其推导方式与上一节一致，但采用了用旋转后的坐标来得到参考坐标系中的坐标的描述方式。</p>
<p>上述两种描述方式在MTATLAB中均有相应的函数来实现：</p>
<p><img src="/images/20191013/10.jpg" alt="13"><br><img src="/images/20191013/11.jpg" alt="14"></p>
<p>除了上述MATLAB自带的坐标旋转函数外，通过额外安装 Robotics Toolbox，可以更方便地求得坐标旋转的结果，如下图所示。</p>
<p><img src="/images/20191013/16.jpg" alt="16"></p>
<p>Robotics Toolbox的下载地址：<span class="exturl" data-url="aHR0cDovL3BldGVyY29ya2UuY29tL3dvcmRwcmVzcy90b29sYm94ZXMvcm9ib3RpY3MtdG9vbGJveA==" title="http://petercorke.com/wordpress/toolboxes/robotics-toolbox">http://petercorke.com/wordpress/toolboxes/robotics-toolbox<i class="fa fa-external-link"></i></span></p>
<p>笔者使用MATLAB2016b + RTB-10.2.zip(November 13, 2017)，可以正常安装，其他的安装包存在文件缺失或者与MATLAB版本不匹配的问题。安装方法是将该压缩包解压到MATLAB的安装目录bin下面(或者打开MATLAB后，将解压的安装包直接拷贝到MATLAB的文件浏览器中)，然后打开文件夹，运行文件：rvctools/startup_rvc.m。</p>
<p>关于该工具箱的使用方法，请参考由Cola倾情推荐的<span class="exturl" data-url="aHR0cHM6Ly9saW5rLnNwcmluZ2VyLmNvbS9jb250ZW50L3BkZi8xMC4xMDA3JTJGOTc4LTMtMzE5LTU0NDEzLTcucGRm" title="https://link.springer.com/content/pdf/10.1007%2F978-3-319-54413-7.pdf">Robotics, vision and control<i class="fa fa-external-link"></i></span>。</p>
]]></content>
      <categories>
        <category>机器人控制</category>
      </categories>
      <tags>
        <tag>Library</tag>
        <tag>MATLAB</tag>
        <tag>数学基础</tag>
      </tags>
  </entry>
  <entry>
    <title>Gazebo8的安装</title>
    <url>/archives/35676.html</url>
    <content><![CDATA[<blockquote>
<p>本文中的环境为Ubuntu16.04LTS + ROS(kinetic).</p>
</blockquote>
<a id="more"></a>

<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>对于kinetic版本的ROS，默认安装Gazebo版本是7。但是现在需要用到版本为8的Gazebo仿真环境。经过一番查找，找到了相应的方法。</p>
<h1 id="Gazebo7的卸载"><a href="#Gazebo7的卸载" class="headerlink" title="Gazebo7的卸载"></a>Gazebo7的卸载</h1><p>查看Gazebo的版本：</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">gazebo -v</span><br><span class="line">``</span><br><span class="line"></span><br><span class="line">将gazebo7卸载：</span><br><span class="line">```py</span><br><span class="line">$ sudo apt-get remove ros-kinetic-gazebo*</span><br><span class="line">$ sudo apt-get remove libgazebo*</span><br><span class="line">$ sudo apt-get remove gazebo*</span><br></pre></td></tr></table></figure>

<h1 id="Gazebo8的安装"><a href="#Gazebo8的安装" class="headerlink" title="Gazebo8的安装"></a>Gazebo8的安装</h1><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">sudo sh -c <span class="string">'echo "deb http://packages.osrfoundation.org/gazebo/ubuntu-stable `lsb_release -cs` main" &gt; /etc/apt/sources.list.d/gazebo-stable.list'</span></span><br><span class="line">wget http://packages.osrfoundation.org/gazebo.key -O - | sudo apt-key add -</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install gazebo8 </span><br><span class="line">sudo apt-get install libgazebo8-dev</span><br><span class="line">sudo apt-get install ros-kinetic-gazebo8-*</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>机器人控制</category>
      </categories>
      <tags>
        <tag>Library</tag>
        <tag>机器人</tag>
        <tag>ROS</tag>
      </tags>
  </entry>
  <entry>
    <title>C++中作用域符号的使用</title>
    <url>/archives/30969.html</url>
    <content><![CDATA[<blockquote>
<p>开发环境：Microsoft VS2017。</p>
</blockquote>
<a id="more"></a>

<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>::运算符，是作用域运算符，是C++语言中优先级最高的运算符。该运算符的用法主要有包括以下三个方面：</p>
<ol>
<li>代码块的作用域。</li>
<li>类的静态成员访问。</li>
<li>命名空间成员访问。</li>
</ol>
<h1 id="代码块的作用域"><a href="#代码块的作用域" class="headerlink" title="代码块的作用域"></a>代码块的作用域</h1><p>在函数内如果有一个与全局变量重名的变量，可以用 ::a 的形式访问（a是全局变量名）。示例如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">2</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"这个a是局部变量： a = "</span> &lt;&lt; a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"这个a是全局变量： a = "</span> &lt;&lt; ::a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	system(<span class="string">"pause"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>程序运行结果如下：<br><img src="/images/20190831/01.png" alt="01"></p>
<h1 id="类的静态成员访问"><a href="#类的静态成员访问" class="headerlink" title="类的静态成员访问"></a>类的静态成员访问</h1><h2 id="类的静态成员变量访问"><a href="#类的静态成员变量访问" class="headerlink" title="类的静态成员变量访问"></a>类的静态成员变量访问</h2><ol>
<li><p>静态成员变量属于整个类所有。因为静态成员变量并不属于某个对象，所以我们可以通过类名来直接访问公有静态成员变量。也可以通过对象名访问公有成员变量。</p>
</li>
<li><p>静态成员变量的特性与全局变量相同。静态成员变量实际在类外单独分配空间，在程序内部存储于全局数据区；静态成员变量的生命期为程序运行期，不依赖于任何对象。</p>
</li>
<li><p>在定义时直接通过static关键字修饰。静态成员变量需要在类外进行赋值，不能在构造函数中进行赋值。</p>
</li>
</ol>
<h3 id="pch-h"><a href="#pch-h" class="headerlink" title="pch.h"></a>pch.h</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> PCH_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PCH_H</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	MyClass();</span><br><span class="line">	~MyClass();</span><br><span class="line">	<span class="keyword">int</span> a;</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">int</span> b;</span><br><span class="line">	<span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">funcTest</span><span class="params">()</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">//PCH_H</span></span></span><br></pre></td></tr></table></figure>

<h3 id="pch-cpp"><a href="#pch-cpp" class="headerlink" title="pch.cpp"></a>pch.cpp</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"pch.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MyClass::funcTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"这是MyClass类中的一个静态函数"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyClass::MyClass()</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyClass::~MyClass()</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="main-cpp"><a href="#main-cpp" class="headerlink" title="main.cpp"></a>main.cpp</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"pch.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> MyClass::b = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">2</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"这个a是局部变量： a = "</span> &lt;&lt; a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"这个a是全局变量： a = "</span> &lt;&lt; ::a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	MyClass obj;</span><br><span class="line">	<span class="comment">//int MyClass::b = 3;		//error!</span></span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"直接调用类中的静态成员变量MyClass::b： b = "</span> &lt;&lt; MyClass::b &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"通过类定义的对象来访问静态成员变量：   b = "</span> &lt;&lt; obj.b &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	obj.b = a;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"通过类定义的对象来  修改  静态成员变量的值： b = "</span> &lt;&lt; obj.b &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"直接调用类中的静态成员变量MyClass::b： b = "</span> &lt;&lt; MyClass::b &lt;&lt; <span class="built_in">endl</span>;	</span><br><span class="line">	MyClass::b = ::a;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"通过类定义的对象来访问静态成员变量的值： b = "</span> &lt;&lt; obj.b &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"直接调用类中的静态成员变量MyClass::b： b = "</span> &lt;&lt; MyClass::b &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	system(<span class="string">"pause"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>说明：</p>
<p>1.Q：第6行的程序为什么要在全局声明？</p>
<p>  A：静态成员变量是在类外进行初始化的，静态成员变量一定要类外进行声明。这是因为声明描述了如何分配内存，但并不分配内存。这是因为静态类成员是单独存储的，而不是对象的组成部分，所以不是在创建类对象时被定义的，因此不能在类中进行初始化，否则每创建一个对象都会初始化静态成员了。</p>
<p>2.注意使用::来改变作用域会同时改变掉类定义的对象中的该静态成员变量值。</p>
<h3 id="程序运行结果"><a href="#程序运行结果" class="headerlink" title="程序运行结果"></a>程序运行结果</h3><p><img src="/images/20190831/02.png" alt="02"></p>
<h2 id="类的静态成员函数访问"><a href="#类的静态成员函数访问" class="headerlink" title="类的静态成员函数访问"></a>类的静态成员函数访问</h2><p>静态成员函数是类中的特殊的成员函数。属于属于整个类所有。因为静态成员函数并不属于某个对象，所以我们可以通过类名来直接访问公有静态成员函数。也可以通过对象名访问公有成员函数。</p>
<h3 id="main-cpp-1"><a href="#main-cpp-1" class="headerlink" title="main.cpp"></a>main.cpp</h3><p>pch.h和pch.cpp同上节。</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"pch.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> MyClass::b = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">	MyClass obj;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n通过作用域直接访问静态成员函数："</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	MyClass::funcTest();</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n通过类定义的对象访问静态成员函数："</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	obj.funcTest();</span><br><span class="line">	system(<span class="string">"pause"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：在静态函数中不能访问非静态成员变量，例如在上述funcTest()函数中，是不能直接调用类中的成员变量a的，但是可以直接访问类中的静态成员变量b。</p>
</blockquote>
<h3 id="程序运行结果-1"><a href="#程序运行结果-1" class="headerlink" title="程序运行结果"></a>程序运行结果</h3><p><img src="/images/20190831/03.png" alt="03"></p>
<h1 id="命名空间成员访问"><a href="#命名空间成员访问" class="headerlink" title="命名空间成员访问"></a>命名空间成员访问</h1><p>访问命名空间中的成员时，要用 namespace_name::member_name 的方式访问。当然，也可以用 using 关键字省去命名空间名和作用域运算符。如上节的<code>main.cpp</code>程序中，给出第3行的程序，在接下来的程序中直接使用<code>cout</code>即可，如果没有该声明，则需要写为<code>std::cout</code>才可以。</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTQ2MTI3Ny9hcnRpY2xlL2RldGFpbHMvODUxMTc2MjQ/dXRtX3NvdXJjZT1hcHA=" title="https://blog.csdn.net/weixin_41461277/article/details/85117624?utm_source=app">C++的运算符（一）—— ::（作用域运算符）<i class="fa fa-external-link"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NtYWxsX3ByaW5jZV8vYXJ0aWNsZS9kZXRhaWxzLzgwNDkyNTAwP3V0bV9zb3VyY2U9YXBw" title="https://blog.csdn.net/small_prince_/article/details/80492500?utm_source=app">对象和类——类的静态成员<i class="fa fa-external-link"></i></span></p>
]]></content>
      <categories>
        <category>工科生的基本功</category>
        <category>快乐码农</category>
      </categories>
      <tags>
        <tag>Library</tag>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>2019世界机器人大会参观总结</title>
    <url>/archives/16667.html</url>
    <content><![CDATA[<blockquote>
<p>2019年8月23日于北京亦庄参观世界机器人大会。 </p>
</blockquote>
<a id="more"></a>

<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>本文主要记录在参观2019年世界机器人大会时的一些感受。</p>
<h1 id="机械臂篇"><a href="#机械臂篇" class="headerlink" title="机械臂篇"></a>机械臂篇</h1><p>在A展厅，主要看了各公司的机械臂，就从工业机器人和协作机器人两个角度来讲好了。工业机器人方面，展会中的大型工业机器人，如KUKA、安川的大型机械臂，<br>运行非常稳定，也很流畅，说明国外在工业机械臂这个方面做的确实很成熟。格力用机械臂来演奏交响乐，别有一番风味，而且格力也开始自己制造机器人用的电机和<br>驱动器。虽然不知道性能怎么样，但是作为国内的大厂，最起码说明已经在做这些东西，已经在朝这个方向前进。KEBA用四台机械臂做物料分拣，基本可以确定物料<br>能被全部被分拣到，速度也很快，但是动起来架子有点晃动。</p>
<p>协作机器人方面，有两种实现力控的方式。一种是，通过在工业机器人末端增加一个力传感器，再将力信号反馈到机器人进行解算，从而实现力控；另一种就是，通过<br>在各关节装力传感器来实现。毫无疑问。后者的精度会比前者高很多，同时，成本也会高很多。协作机器人的应用方面，比较好的也是在做物料的分拣以及通过视觉伺服<br>来做抓取。还有一个就是和移动平台相结合，可以用来做厂房的安全巡视，这方面做的比较好的是京东数科，用移动平台加UR，在UR末端装一个摄像头来查看厂房设备情况。</p>
<h1 id="其他机器人篇"><a href="#其他机器人篇" class="headerlink" title="其他机器人篇"></a>其他机器人篇</h1><p>仿狗形机器人，在展会中看到了宇树科技的Laika狗和Alien狗，上交的六足机器狗(一前两后或两前一后做运动)，以及航天科技(或者是航天科工？)的油动大狗。宇树科技<br>的狗形机器人确实已经做的很好了，当三只狗形机器人一起在地面行走时，确实有一种《黑镜(子弹头)》的即视感。还有一只萌萌的迷你机器狗。油动大狗应该是最初为了<br>军队行军驮运重物而研制的，但是油动的声音太大了。剩下的狗形机器人，主要是用来做巡视方面的工作。除此外，暂没有特别好的应用场景。当然，做这种用途的，除了<br>狗形机器人，就是移动的车形机器人了。移动车形机器人的另一个用途，或者说研究方向是，用来做无人送货小车，京东美团都有在做。</p>
<p>还有一些仿鸟形、仿鱼形的仿生机器人，没有过多区研究。</p>
<h1 id="研究热点篇"><a href="#研究热点篇" class="headerlink" title="研究热点篇"></a>研究热点篇</h1><p>对于机械臂方向，主要的困境还是算法。因为大家都用的是差不多的硬件，那么采用什么样的算法能让机械臂抖动更小是大家目前亟待解决的一个问题。对于移动平台方向，<br>从二维平面到三维空间的建模是一个问题，slam的精度等也是一些问题。虽然不要求要精确到几毫米，但是如果非常不精确，会导致机械臂无法完成相应的任务。</p>
]]></content>
      <categories>
        <category>茶余裨谈</category>
      </categories>
      <tags>
        <tag>Library</tag>
        <tag>机器人</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux下OpenCV库的安装</title>
    <url>/archives/56535.html</url>
    <content><![CDATA[<blockquote>
<p>开发环境：Ubuntu16.04 LTS、 OpenCV3.4.1。 </p>
</blockquote>
<a id="more"></a>

<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>OpenCV 是一个开源的计算机视觉库，可以从 <span class="exturl" data-url="aHR0cDovL29wZW5jdi5vcmc=" title="http://opencv.org">http://opencv.org<i class="fa fa-external-link"></i></span> 获取。OpenCV包含的模块以及组成结构参见：<span class="exturl" data-url="aHR0cDovL2MuYmlhbmNoZW5nLm5ldC92aWV3LzExMDEuaHRtbOOAgg==" title="http://c.biancheng.net/view/1101.html。">http://c.biancheng.net/view/1101.html。<i class="fa fa-external-link"></i></span></p>
<h1 id="OpenCV库的安装"><a href="#OpenCV库的安装" class="headerlink" title="OpenCV库的安装"></a>OpenCV库的安装</h1><h2 id="下载安装包"><a href="#下载安装包" class="headerlink" title="下载安装包"></a>下载安装包</h2><p>官网下载sources版本(For Linux)：<span class="exturl" data-url="aHR0cDovL29wZW5jdi5vcmcvcmVsZWFzZXMuaHRtbOOAgg==" title="http://opencv.org/releases.html。">http://opencv.org/releases.html。<i class="fa fa-external-link"></i></span></p>
<p>解压，并进入解压后的目录：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">unzip opencv<span class="number">-3.4</span><span class="number">.1</span>.zip 			<span class="comment">//解压安装包，也可以右键解压</span></span><br><span class="line">cd opencv<span class="number">-3.4</span><span class="number">.1</span>				<span class="comment">//打开安装包存放路径</span></span><br></pre></td></tr></table></figure>

<h2 id="安装过程"><a href="#安装过程" class="headerlink" title="安装过程"></a>安装过程</h2><p>在Terminal中，打开安装包存放路径，执行下列语句进行安装。</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> install build-essential libgtk2<span class="number">.0</span>-dev libavcodec-dev libavformat-dev libjpeg.dev libtiff4.dev libswscale-dev libjasper-dev</span><br><span class="line">					<span class="comment">//上述指令是为了安装依赖库</span></span><br><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; cd build 		<span class="comment">//打开编译目录并进入</span></span><br><span class="line">cmake -D CMAKE_BUILD_TYPE=Release -D CMAKE_INSTALL_PREFIX=/usr/local ..	</span><br><span class="line">					<span class="comment">//编译目录</span></span><br><span class="line">					<span class="comment">//或者cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D WITH_TBB=ON -D BUILD_NEW_PYTHON_SUPPORT=ON -D WITH_V4L=ON -D WITH_QT=ON -D WITH_OPENGL=ON ..</span></span><br><span class="line">make -j$(nproc)				<span class="comment">//编译</span></span><br><span class="line">sudo make install 			<span class="comment">//安装</span></span><br><span class="line">sudo /bin/bash -c 'echo "/usr/local/lib" &gt; /etc/ld.so.conf.d/opencv.conf'	</span><br><span class="line">					<span class="comment">//环境配置添加库路径</span></span><br><span class="line">sudo ldconfig				<span class="comment">//更新系统库</span></span><br><span class="line">sudo gedit /etc/bash.bashrc 		<span class="comment">//配置bash，打开后在末尾添加下面两句：</span></span><br><span class="line">					<span class="comment">//PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/lib/pkgconfig  </span></span><br><span class="line">					<span class="comment">//export PKG_CONFIG_PATH  </span></span><br><span class="line">					<span class="comment">//保存并退出</span></span><br><span class="line">sudo -s </span><br><span class="line">source /etc/bash.bashrc			<span class="comment">//激活配置</span></span><br><span class="line">sudo updatedb  				<span class="comment">//更新database</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>参考链接：<span class="exturl" data-url="aHR0cHM6Ly9kb2NzLm9wZW5jdi5vcmcvbWFzdGVyL2Q3L2Q5Zi90dXRvcmlhbF9saW51eF9pbnN0YWxsLmh0bWw=" title="https://docs.opencv.org/master/d7/d9f/tutorial_linux_install.html">官网安装(英文版)<i class="fa fa-external-link"></i></span>.<br>         <span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vU2h1cWluZy1jeHcvcC85MTk1MzAzLmh0bWw=" title="https://www.cnblogs.com/Shuqing-cxw/p/9195303.html">Ubuntu16.04安装Opencv3.4.1教程<i class="fa fa-external-link"></i></span>.<br>         <span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2V6YnV5L2FydGljbGUvZGV0YWlscy84MDU3MDE4OQ==" title="https://blog.csdn.net/ezbuy/article/details/80570189">sudo: source: command not found<i class="fa fa-external-link"></i></span>.</p>
</blockquote>
<h1 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h1><p>自己新建一个文件夹，用来存放工程文件，目录如下：</p>
<p><img src="/images/20190805OpenCV/01.png" alt="01.png"></p>
<blockquote>
<p>其中，lena.jpg由自己保存一张图片并以该名字命名，与.cpp存放于同级目录。</p>
</blockquote>
<h2 id="CMakeLists-txt"><a href="#CMakeLists-txt" class="headerlink" title="CMakeLists.txt"></a>CMakeLists.txt</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">cmake_minimum_required(VERSION <span class="number">2.8</span>)</span><br><span class="line"></span><br><span class="line">project( DisplayImage )</span><br><span class="line"></span><br><span class="line">find_package( OpenCV REQUIRED )</span><br><span class="line"></span><br><span class="line">add_executable( opencv_test opencv_test.cpp )</span><br><span class="line"></span><br><span class="line">target_link_libraries( opencv_test $&#123;OpenCV_LIBS&#125; )</span><br></pre></td></tr></table></figure>

<h2 id="opencv-test-cpp"><a href="#opencv-test-cpp" class="headerlink" title="opencv_test.cpp"></a>opencv_test.cpp</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> cv;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>** argv)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ( argc != <span class="number">2</span> ) &#123;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Need to load a picture..."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Mat <span class="built_in">image</span>;</span><br><span class="line">    <span class="built_in">image</span> = imread(argv[<span class="number">1</span>], <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> ( <span class="built_in">image</span>.empty() ) &#123;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt;<span class="string">"No image data!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    namedWindow(<span class="string">"Display Image"</span>, WINDOW_AUTOSIZE);</span><br><span class="line">    imshow(<span class="string">"Display Image"</span>, <span class="built_in">image</span>);</span><br><span class="line">    waitKey(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h2><p>在build文件夹中编译，运行程序：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">cd build</span><br><span class="line">cmake ..						</span><br><span class="line">make</span><br><span class="line">./opencv_test ../lena.jpg		<span class="comment">//运行可执行程序，并输入图片名作为参数。其中../表示上一级目录，./表示本级目录下的可执行程序。</span></span><br></pre></td></tr></table></figure>

<p>执行上述程序后，可看到自己保存的图片lena.jpg。</p>
]]></content>
      <categories>
        <category>工科生的基本功</category>
        <category>快乐码农</category>
      </categories>
      <tags>
        <tag>Library</tag>
        <tag>Linux</tag>
        <tag>C++</tag>
        <tag>OpenCV</tag>
      </tags>
  </entry>
  <entry>
    <title>ROS(kinetic)有用指令集</title>
    <url>/archives/25595.html</url>
    <content><![CDATA[<blockquote>
<p>本文中的环境为Ubuntu16.04LTS + ROS(kinetic).</p>
</blockquote>
<a id="more"></a>

<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>由于从ROS的官网上的教程并没有实时更新，上面混杂了一些旧版本的东西，看起来有些麻烦，而且有的介绍过于繁琐，因此本篇博客旨在介绍笔者使用版本的精简指令集。关于指令的详细介绍，还需从官网上查看相关内容。</p>
<h1 id="指令介绍"><a href="#指令介绍" class="headerlink" title="指令介绍"></a>指令介绍</h1><h2 id="ROS安装指令"><a href="#ROS安装指令" class="headerlink" title="ROS安装指令"></a>ROS安装指令</h2><p>在执行下面的指令前，请注意先将源换位内地源，推荐清华源。</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">sudo sh -c <span class="string">'echo "deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main" &gt; /etc/apt/sources.list.d/ros-latest.list'</span></span><br><span class="line">sudo apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:<span class="number">80</span> --recv-key <span class="number">0xB01FA116</span></span><br><span class="line">sudo apt-get update	<span class="comment">#如果更新失败提示GPT error，输入sudo apt-key adv --recv-keys --keyserver keyserver.ubuntu.com F42ED6FBAB17C654</span></span><br><span class="line">sudo apt-get install ros-kinetic-desktop-full</span><br><span class="line">sudo rosdep init</span><br><span class="line">rosdep update</span><br><span class="line">echo <span class="string">"source /opt/ros/kinetic/setup.bash"</span> &gt;&gt; ~/.bashrc</span><br><span class="line">source ~/.bashrc</span><br><span class="line">sudo apt install python-rosinstall python-rosinstall-generator python-wstool build-essential</span><br></pre></td></tr></table></figure>

<h2 id="UR5的仿真环境安装与使用"><a href="#UR5的仿真环境安装与使用" class="headerlink" title="UR5的仿真环境安装与使用"></a>UR5的仿真环境安装与使用</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> install ros-kinetic-universal-robot</span><br><span class="line">roslaunch ur_gazebo ur5.launch	</span><br><span class="line">roslaunch ur5_moveit_config ur5_moveit_planning_execution.launch sim:=<span class="literal">true</span></span><br><span class="line">roslaunch ur5_moveit_config moveit_rviz.launch <span class="built_in">config</span>:=<span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h2 id="ROS文件系统介绍"><a href="#ROS文件系统介绍" class="headerlink" title="ROS文件系统介绍"></a>ROS文件系统介绍</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> install ros-kinetic-ros-tutorials		<span class="comment">//安装ros-tutorials程序包</span></span><br><span class="line">rospack <span class="built_in">find</span> roscpp									<span class="comment">//rospack find [包名称]  rospack (/rospack)允许你获取软件包的有关信息。在本教程中，我们只涉及到rospack中find参数选项，该选项可以返回软件包的路径信息。</span></span><br><span class="line">roscd roscpp										<span class="comment">//roscd [本地包名称[/子目录]]   直接切换工作目录到某个软件包或者软件包集当中</span></span><br><span class="line">pwd													<span class="comment">//输出当前工作目录</span></span><br><span class="line">echo $ROS_PACKAGE_PATH								<span class="comment">//查看ROS_PACKAGE_PATH</span></span><br><span class="line">roscd <span class="built_in">log</span>											<span class="comment">//切换到ROS保存日记文件的目录下。如果你没有执行过任何ROS程序，系统会报错说该目录不存在。</span></span><br><span class="line">rosls roscpp_tutorials								<span class="comment">//rosls [本地包名称[/子目录]] 直接按软件包的名称而不是绝对路径来罗列目录</span></span><br></pre></td></tr></table></figure>

<h2 id="使用catkin创建工作空间"><a href="#使用catkin创建工作空间" class="headerlink" title="使用catkin创建工作空间"></a>使用catkin创建工作空间</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">source /opt/ros/kinetic/<span class="built_in">setup</span>.bash					<span class="comment">//sourced your environment</span></span><br><span class="line"><span class="built_in">mkdir</span> -p ~/catkin_ws/src</span><br><span class="line">cd ~/catkin_ws/</span><br><span class="line">catkin_make</span><br><span class="line">source devel/<span class="built_in">setup</span>.bash</span><br><span class="line">echo $ROS_PACKAGE_PATH 								<span class="comment">//确认环境变量包含了目录</span></span><br></pre></td></tr></table></figure>

<h2 id="创建ROS程序包"><a href="#创建ROS程序包" class="headerlink" title="创建ROS程序包"></a>创建ROS程序包</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">cd ~/catkin_ws/src</span><br><span class="line">catkin_create_pkg beginner_tutorials std_msgs rospy roscpp 		<span class="comment">//使用catkin_create_pkg命令来创建一个名为'beginner_tutorials'的新程序包，这个程序包依赖于std_msgs、roscpp和rospy</span></span><br><span class="line">rospack depends1 beginner_tutorials 							<span class="comment">//使用rospack命令来查看一级依赖包</span></span><br><span class="line">rospack depends beginner_tutorials								<span class="comment">//使用rospack可以递归检测出所有的依赖包</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>本节还介绍了.xml文件的书写方法</p>
</blockquote>
<h2 id="编译ROS程序包"><a href="#编译ROS程序包" class="headerlink" title="编译ROS程序包"></a>编译ROS程序包</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">source /opt/ros/kinetic/<span class="built_in">setup</span>.bash					<span class="comment">//先source你的环境配置(setup)文件</span></span><br><span class="line">cd catkin工作空间</span><br><span class="line">catkin_make											<span class="comment">//编译</span></span><br><span class="line">catkin_make --source my_src							<span class="comment">//编译存放在了my_src中，而非在默认工作空间中（~/catkin_ws/src)的源代码</span></span><br></pre></td></tr></table></figure>

<h2 id="理解ROS节点"><a href="#理解ROS节点" class="headerlink" title="理解ROS节点"></a>理解ROS节点</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> install ros-kinetic-ros-tutorials		<span class="comment">//安装龟龟模拟器</span></span><br><span class="line">roscore												<span class="comment">//运行所有ROS程序前首先要运行的命令</span></span><br><span class="line">rosnode <span class="built_in">list</span>										<span class="comment">//列出活跃的节点，本例为/rosout</span></span><br><span class="line">rosnode info /rosout 								<span class="comment">//返回特定节点的信息</span></span><br><span class="line">rosrun turtlesim turtlesim_node						<span class="comment">//打开新终端，运行turtlesim。    rosrun [package_name] [node_name]</span></span><br><span class="line">rosnode <span class="built_in">list</span>										<span class="comment">//打开新终端，查看节点：/rosout  /turtlesim</span></span><br><span class="line">rosrun turtlesim turtlesim_node __name:=my_turtle   <span class="comment">//关闭原来的turtlesim，打开新终端运行。改变节点名称</span></span><br><span class="line">rosnode <span class="built_in">list</span> 										<span class="comment">//查看新的节点名称：/rosout /my_turtle</span></span><br><span class="line">rosnode ping my_turtle								<span class="comment">//使用另一个节点来ping该节点</span></span><br></pre></td></tr></table></figure>

<h2 id="理解ROS话题"><a href="#理解ROS话题" class="headerlink" title="理解ROS话题"></a>理解ROS话题</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">roscore 							<span class="comment">//新开一个终端，打开ros</span></span><br><span class="line">rosrun turtlesim turtlesim_node		<span class="comment">//新开一个终端。这是接受消息的节点</span></span><br><span class="line">rosrun turtlesim turtle_teleop_key	<span class="comment">//新开一个终端，通过键盘来控制龟龟运动。这也是发布消息的节点</span></span><br><span class="line">rosrun rqt_graph rqt_graph			<span class="comment">//新开一个终端，创建一个显示当前系统运行情况的动态图形</span></span><br><span class="line">rostopic -h							<span class="comment">//新开一个终端，查看rostopic的子命令</span></span><br><span class="line">rostopic echo /turtle1/cmd_vel		<span class="comment">//你可能看不到任何东西因为现在还没有数据发布到该话题上。接下来我们通过按下方向键使turtle_teleop_key节点发布数据。可以返回rqt_graph中刷新查看</span></span><br><span class="line">rostopic <span class="built_in">list</span> -v 					<span class="comment">//查看有关所发布和订阅的话题及其类型的详细信息</span></span><br><span class="line">rostopic type /turtle1/cmd_vel		<span class="comment">//查看发布在某个话题上的消息类型，会看到：geometry_msgs/Twist</span></span><br><span class="line">rosmsg show geometry_msgs/Twist		<span class="comment">//查看消息的详细情况。根据该结果可以知道turtlesim节点所期望的消息类型(可看到包含linear和angular两个值)，接下来我们就可以给turtle发布命令了</span></span><br><span class="line">rostopic pub -1 /turtle1/cmd_vel geometry_msgs/Twist -- '[2.0, 0.0, 0.0]' '[0.0, 0.0, 1.8]'</span><br><span class="line">									<span class="comment">//rostopic pub可以把数据发布到当前某个正在广播的话题上。用法:rostopic pub [topic] [msg_type] [args]</span></span><br><span class="line">									<span class="comment">//以上命令会发送一条消息给turtlesim，告诉它以2.0大小的线速度和1.8大小的角速度开始移动。</span></span><br><span class="line">									<span class="comment">//-1: （单个破折号）这个参数选项使rostopic发布一条消息后马上退出。</span></span><br><span class="line">									<span class="comment">///turtle1/cmd_vel: 消息所发布到的话题名称</span></span><br><span class="line">									<span class="comment">//geometry_msgs/Twist: 所发布消息类型</span></span><br><span class="line">									<span class="comment">//--: 双破折号）这会告诉命令选项解析器接下来的参数部分都不是命令选项。这在参数里面包含有破折号-（比如负号）时是必须要添加的</span></span><br><span class="line">									<span class="comment">//'[2.0, 0.0, 0.0]' '[0.0, 0.0, 1.8]': 正如之前提到的，在一个geometry_msgs/Twist消息里面包含有两个浮点型元素：linear和angular。</span></span><br><span class="line">									<span class="comment">//在本例中，'[2.0, 0.0, 0.0]'是linear的值，'[0.0, 0.0, 1.8]'是angular的值。这些参数其实是按照YAML语法格式编写的，这在YAML文档 (/ROS/YAMLCommandLine)中有更多的描述。</span></span><br><span class="line">rostopic pub /turtle1/cmd_vel geometry_msgs/Twist -r 1 -- '[2.0, 0.0, 0.0]' '[0.0, 0.0, 1.8]'</span><br><span class="line">									<span class="comment">//这条命令以1Hz的频率发布速度命令到速度话题上。使用rostopic pub -r命令来发布一个稳定的命令流</span></span><br><span class="line">rostopic hz /turtle1/pose			<span class="comment">//rostopic hz命令可以用来查看数据发布的频率。	rostopic hz [topic]	</span></span><br><span class="line">rostopic type /turtle1/pose | rosmsg show</span><br><span class="line">									<span class="comment">//结合rostopic type和rosmsg show命令来获取关于某个话题的更深层次的信息	</span></span><br><span class="line">									<span class="comment">//可以看到pose下有五个信息: x y theta linear_velocity angular_velocity</span></span><br><span class="line">rosrun rqt_plot rqt_plot			<span class="comment">//使用rqt_plot命令来绘制正在发布到/turtle1/pose话题上的数据变化图形	</span></span><br><span class="line">									<span class="comment">//这会弹出一个新窗口，在窗口左上角的一个文本框里面你可以添加需要绘制的话题。在里面输入/turtle1/pose/x后之前处于禁用状态的加号按钮将会被使能变亮。按一下该按钮，并</span></span><br><span class="line">									<span class="comment">//对/turtle1/pose/y重复相同的过程。现在你会在图形中看到turtle的x-y位置坐标图。</span></span><br><span class="line">									<span class="comment">//按下减号按钮会显示一组菜单让你隐藏图形中指定的话题。现在隐藏掉你刚才添加的话题并添加/turtle1/pose/theta</span></span><br></pre></td></tr></table></figure>

<h2 id="理解ROS服务和参数"><a href="#理解ROS服务和参数" class="headerlink" title="理解ROS服务和参数"></a>理解ROS服务和参数</h2><p>在小乌龟仍然启动的基础上：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">rosservice <span class="built_in">list</span>						<span class="comment">//输出可用服务的信息</span></span><br><span class="line">rosservice call						<span class="comment">//调用带参数的服务</span></span><br><span class="line">rosservice type 					<span class="comment">//输出服务类型</span></span><br><span class="line">rosservice <span class="built_in">find</span> 					<span class="comment">//依据类型寻找服务find services by service type </span></span><br><span class="line">rosservice uri 						<span class="comment">//输出服务的ROSRPC uri		</span></span><br><span class="line">rosservice type <span class="built_in">clear</span>				<span class="comment">//查看clear服务类型，clear是rosservice list中的一种服务类型。rosservice type [service]</span></span><br><span class="line">rosservice call <span class="built_in">clear</span>				<span class="comment">//代用clear服务，该服务清除了turtlesim_node的背景上的轨迹。rosservice call [service] [args]</span></span><br><span class="line">rosservice type spawn| rossrv show 	<span class="comment">//查看再生（spawn）服务的信息</span></span><br><span class="line">rosservice call spawn <span class="number">2</span> <span class="number">2</span> <span class="number">0.2</span> <span class="string">""</span> 	<span class="comment">//调用再生服务，在给定的位置和角度生成一只新的乌龟。名字参数是可选的，这里我们不设具体的名字，让turtlesim自动创建一个。</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">rosparam <span class="built_in">set</span> 						<span class="comment">//设置参数</span></span><br><span class="line">rosparam <span class="built_in">get</span> 						<span class="comment">//获取参数</span></span><br><span class="line">rosparam load 						<span class="comment">//从文件读取参数</span></span><br><span class="line">rosparam dump 						<span class="comment">//向文件中写入参数</span></span><br><span class="line">rosparam <span class="keyword">delete</span> 					<span class="comment">//删除参数</span></span><br><span class="line">rosparam <span class="built_in">list</span> 						<span class="comment">//列出节点在服务器上的参数名</span></span><br><span class="line">rosparam <span class="built_in">set</span> background_r <span class="number">150</span>		<span class="comment">//修改背景颜色的红色通道。	rosparam set [param_name]</span></span><br><span class="line">rosservice call <span class="built_in">clear</span>				<span class="comment">//上述指令修改了参数的值，现在我们调用清除服务使得修改后的参数生效</span></span><br><span class="line">rosparam <span class="built_in">get</span> background_g			<span class="comment">//获取背景的绿色通道的值。 rosparam get [param_name]</span></span><br><span class="line">rosparam <span class="built_in">get</span> /						<span class="comment">//显示参数服务器上的所有内容</span></span><br><span class="line">rosparam dump params.yaml 			<span class="comment">//将所有的参数写入params.yaml文件。 rosparam dump [file_name]</span></span><br><span class="line">rosparam load params.yaml copy		<span class="comment">//将yaml文件重载入新的命名空间，比如说copy空间。 rosparam load [file_name] [namespace]</span></span><br><span class="line">rosparam <span class="built_in">get</span> copy/background_b		<span class="comment">//获取copy空间的蓝色背景参数</span></span><br></pre></td></tr></table></figure>

<h2 id="使用-rqt-console-和-roslaunch"><a href="#使用-rqt-console-和-roslaunch" class="headerlink" title="使用 rqt_console 和 roslaunch"></a>使用 rqt_console 和 roslaunch</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> install ros-kinetic-rqt ros-kinetic-rqt-common-plugins ros-kinetic-turtlesim</span><br><span class="line">														<span class="comment">//预先安装需要的程序包，若安装，请忽略</span></span><br><span class="line">rosrun rqt_console rqt_console							<span class="comment">//新终端中运行。 rqt_console属于ROS日志框架(logging framework)的一部分，用来显示节点的输出信息</span></span><br><span class="line">rosrun rqt_logger_level rqt_logger_level				<span class="comment">//新终端中运行。 rqt_logger_level允许我们修改节点运行时输出信息的日志等级（logger levels）（包括 DEBUG、WARN、INFO和ERROR）。</span></span><br><span class="line">rosrun turtlesim turtlesim_node							<span class="comment">//新终端中运行。启动turtlesim</span></span><br><span class="line">rostopic pub /turtle1/cmd_vel geometry_msgs/Twist -r 1 -- '[2.0, 0.0, 0.0]' '[0.0, 0.0, 0.0]'</span><br><span class="line">														<span class="comment">//小龟龟动起来再查看rqt_console中的输出</span></span><br><span class="line">roscd beginner_tutorials								<span class="comment">//打开之前创建的beginner_tutorials包，如果打不开，有两种办法解决：</span></span><br><span class="line">														<span class="comment">//1.输入绝对路径：cd ~/catkin_ws/src/beginner_tutorials	</span></span><br><span class="line">														<span class="comment">//2.设置当前终端环境路径：export ROS_PACKAGE_PATH=~/catkin_ws/src:$ROS_PACKAGE_PATH。 成功后再输入：roscd beginner_tutorials	</span></span><br><span class="line"><span class="built_in">mkdir</span> launch &amp;&amp; cd launch 								<span class="comment">//创建并打开launch文件夹</span></span><br></pre></td></tr></table></figure>

<p>新建一个空文件，命名为<code>turtlemimic.launch</code>，并在其中写入：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">&lt;launch&gt;</span><br><span class="line"></span><br><span class="line">	&lt;group ns=<span class="string">"turtlesim1"</span>&gt;</span><br><span class="line"> 		&lt;node pkg=<span class="string">"turtlesim"</span> name=<span class="string">"sim"</span> type=<span class="string">"turtlesim_node"</span>/&gt;</span><br><span class="line"> 	&lt;/group&gt;</span><br><span class="line"></span><br><span class="line">	&lt;group ns=<span class="string">"turtlesim2"</span>&gt;</span><br><span class="line"> 		&lt;node pkg=<span class="string">"turtlesim"</span> name=<span class="string">"sim"</span> type=<span class="string">"turtlesim_node"</span>/&gt;</span><br><span class="line"> 	&lt;/group&gt;</span><br><span class="line"></span><br><span class="line"> 	&lt;node pkg=<span class="string">"turtlesim"</span> name=<span class="string">"mimic"</span> type=<span class="string">"mimic"</span>&gt;</span><br><span class="line">	 &lt;remap from=<span class="string">"input"</span> to=<span class="string">"turtlesim1/turtle1"</span>/&gt;</span><br><span class="line">	 &lt;remap from=<span class="string">"output"</span> to=<span class="string">"turtlesim2/turtle1"</span>/&gt;</span><br><span class="line"> 	&lt;/node&gt;</span><br><span class="line"></span><br><span class="line">&lt;/launch&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在3<del>9行我们创建了两个节点分组并以’命名空间（namespace)’标签来区分，其中一个名为turtulesim1，另一个名为turtlesim2，两个组里面都使用相同的turtlesim节点并命名为’sim’。这样可以让我们同时启动两个turtlesim模拟器而不会产生命名冲突。在11</del>14行我们启动模仿节点，并将所有话题的输入和输出分别重命名为turtlesim1和turtlesim2，这样就会使turtlesim2模仿turtlesim1。第1行和第16行分别表示luanch文件的开始标签和结束标签。</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">roslaunch beginner_tutorials turtlemimic.launch			<span class="comment">//通过roslaunch命令启动launch文件，从而启动多个节点</span></span><br><span class="line">rostopic pub /turtlesim1/turtle1/cmd_vel geometry_msgs/Twist -r 1 -- '[2.0, 0.0, 0.0]' '[0.0, 0.0, -1.8]'</span><br><span class="line">														<span class="comment">//在一个新终端中使用rostopic命令发送速度设定消息</span></span><br></pre></td></tr></table></figure>

<h2 id="使用rosed编辑ROS中的文件"><a href="#使用rosed编辑ROS中的文件" class="headerlink" title="使用rosed编辑ROS中的文件"></a>使用rosed编辑ROS中的文件</h2><p>如果习惯使用emacs，需要先将emacs设为默认编辑器，如果习惯使用vim，需要安装vim。这里以设置emacs为例。</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">emacs .bashrc				<span class="comment">//新开一个终端。在.bashrc文件的最后一行写入：export EDITOR='emacs -nw'</span></span><br><span class="line">echo $EDITOR				<span class="comment">//打开一个新终端，看是否定义了EDITOR。注意：.bashrc文件的改变，只会在新的终端才有效。已经打开的终端不受环境变量的影响。正常情况下回输出:emacs -nw</span></span><br><span class="line">rosed roscpp Logger.msg 	<span class="comment">//rosed可以直接通过package名来获取到待编辑的文件而无需指定该文件的存储路径了. rosed [package_name] [filename]</span></span><br></pre></td></tr></table></figure>

<h2 id="创建ROS消息和ROS服务"><a href="#创建ROS消息和ROS服务" class="headerlink" title="创建ROS消息和ROS服务"></a>创建ROS消息和ROS服务</h2><h3 id="使用ROSmsg"><a href="#使用ROSmsg" class="headerlink" title="使用ROSmsg"></a>使用ROSmsg</h3><h4 id="创建一个rosmsg"><a href="#创建一个rosmsg" class="headerlink" title="创建一个rosmsg"></a>创建一个rosmsg</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">cd ~/catkin_ws/src/beginner_tutorials			<span class="comment">//打开之前创建的package</span></span><br><span class="line"><span class="built_in">mkdir</span> msg 										<span class="comment">//创建msg文件夹</span></span><br><span class="line">echo <span class="string">"int64 num"</span> &gt; msg/Num.msg 					<span class="comment">//写入到Num.msg文件中</span></span><br></pre></td></tr></table></figure>

<p>确保msg文件被转为C++，Python和其他语言的源代码。查看package.xml, 确保它包含以下两条语句。若没有，手动添加。</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;build_depend&gt;message_generation&lt;/build_depend&gt;</span><br><span class="line">&lt;exec_depend&gt;message_runtime&lt;/exec_depend&gt;</span><br></pre></td></tr></table></figure>

<h4 id="修改-beginner-tutorials-CMakeLists-txt"><a href="#修改-beginner-tutorials-CMakeLists-txt" class="headerlink" title="修改./beginner_tutorials/CMakeLists.txt:"></a>修改./beginner_tutorials/CMakeLists.txt:</h4><p>1.寻找find_package，向其中添加message_generation。</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">find_package(catkin REQUIRED COMPONENTS </span><br><span class="line">	         roscpp </span><br><span class="line">	         rospy </span><br><span class="line">	         std_msgs </span><br><span class="line">	         message_generation</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>2.寻找catkin_package，设置运行依赖。</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">catkin_package(</span><br><span class="line">#  INCLUDE_DIRS include</span><br><span class="line">#  LIBRARIES beginner_tutorials</span><br><span class="line">#  CATKIN_DEPENDS roscpp rospy std_msgs</span><br><span class="line">#  DEPENDS system_lib</span><br><span class="line">  CATKIN_DEPENDS message_runtime</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>3.将add_message_files代码块去掉注释，并用自己的Num.msg代替Messag1.msg，如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">add_message_files(</span><br><span class="line">   FILES</span><br><span class="line">   Num.msg</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>4.取消generate_messages()的注释，如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">generate_messages(</span><br><span class="line">   DEPENDENCIES</span><br><span class="line">   std_msgs</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="使用rosmsg"><a href="#使用rosmsg" class="headerlink" title="使用rosmsg"></a>使用rosmsg</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">rosmsg show beginner_tutorials/Num 				<span class="comment">//通过rosmsg show命令，检查ROS是否能够识消息。正确情况下会输出：int64 num。</span></span><br><span class="line">												<span class="comment">//如果不正常，需要设置path，输入指令：export ROS_PACKAGE_PATH=~/catkin_ws/src:$ROS_PACKAGE_PATH。再次输入show命令。</span></span><br></pre></td></tr></table></figure>

<h3 id="使用ROSsrv"><a href="#使用ROSsrv" class="headerlink" title="使用ROSsrv"></a>使用ROSsrv</h3><h4 id="创建一个srv"><a href="#创建一个srv" class="headerlink" title="创建一个srv"></a>创建一个srv</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">roscd beginner_tutorials</span><br><span class="line"><span class="built_in">mkdir</span> srv</span><br><span class="line">roscp rospy_tutorials AddTwoInts.srv srv/AddTwoInts.srv</span><br><span class="line">												<span class="comment">//roscp [package_name] [file_to_copy_path] [copy_path]</span></span><br><span class="line">												<span class="comment">//roscp是一个很实用的命令行工具，它实现了将文件从一个package复制到另外一个package的功能。</span></span><br></pre></td></tr></table></figure>

<p>同样，需要确保srv文件被转换为C++和其他语言的源代码。</p>
<h4 id="修改CMakeLists-txt"><a href="#修改CMakeLists-txt" class="headerlink" title="修改CMakeLists.txt:"></a>修改CMakeLists.txt:</h4><p>1.和ROSmsg一样添加对message_generation的依赖。(message_generation 对msg和srv都起作用)</p>
<p>2.将add_message_files代码块去掉注释，并添加自己的srv文件，如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">add_service_files(</span><br><span class="line">   FILES</span><br><span class="line">   AddTwoInts.srv</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>3.取消generate_messages()的注释，同ROSmsg，如下：</p>
<h4 id="使用ROSsrv-1"><a href="#使用ROSsrv-1" class="headerlink" title="使用ROSsrv"></a>使用ROSsrv</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">rossrv show beginner_tutorials/AddTwoInts 		<span class="comment">//通过rosmsg show命令，检查ROS是否能够识该服务。 rossrv show &lt;service type&gt;。跟rosmsg类似, 你也可以不指定具体的package名来查找服务文件</span></span><br></pre></td></tr></table></figure>

<h3 id="新开一个终端，打开工作空间并编译："><a href="#新开一个终端，打开工作空间并编译：" class="headerlink" title="新开一个终端，打开工作空间并编译："></a>新开一个终端，打开工作空间并编译：</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">cd catkin_ws</span><br><span class="line">catkin_make</span><br></pre></td></tr></table></figure>

<p>所有在msg路径下的.msg文件都将转换为ROS所支持语言的源代码。生成的C++头文件将会放置在~/catkin_ws/devel/include/beginner_tutorials。</p>
<h2 id="编写简单的消息发布器和订阅器-C"><a href="#编写简单的消息发布器和订阅器-C" class="headerlink" title="编写简单的消息发布器和订阅器 (C++)"></a>编写简单的消息发布器和订阅器 (C++)</h2><p>创建一个发布器节点(“talker”)，它将不断的在ROS网络中广播消息。创建一个接收器节点(“listener”)，它来接收ROS网络中的广播消息。</p>
<h3 id="beginner-tutorials-src-talker-cpp"><a href="#beginner-tutorials-src-talker-cpp" class="headerlink" title="./beginner_tutorials/src/talker.cpp"></a>./beginner_tutorials/src/talker.cpp</h3><blockquote>
<p>为了减少篇幅，将源码中的大段英文注释删除。</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ros/ros.h"</span>					<span class="comment">//ros/ros.h 是一个实用的头文件，它引用了 ROS 系统中大部分常用的头文件。</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"std_msgs/String.h"</span>			<span class="comment">//这引用了 std_msgs/String 消息, 它存放在 std_msgs package 里，是由 String.msg 文件自动生成的头文件。</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * This tutorial demonstrates simple sending of messages over the ROS system.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">  ros::init(argc, argv, <span class="string">"talker"</span>);		<span class="comment">//初始化 ROS 。它允许 ROS 通过命令行进行名称重映射——然而这并不是现在讨论的重点。在这里，我们也可以指定节点的名称——运行过程中，节点的名称必须唯一。</span></span><br><span class="line">										<span class="comment">//这里的名称必须是一个 base name ，也就是说，名称内不能包含 / 等符号。</span></span><br><span class="line"></span><br><span class="line">  ros::NodeHandle n;					<span class="comment">//为这个进程的节点创建一个句柄。第一个创建的 NodeHandle 会为节点进行初始化，最后一个销毁的 NodeHandle 则会释放该节点所占用的所有资源。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   *告诉 master 我们将要在 chatter（话题名） 上发布 std_msgs/String 消息类型的消息。这样 master 就会告诉所有订阅了 chatter *话题的节点，将要有数据发布。第二个参数是发布序列的大小。如果我们发布的消息的频率太高，缓冲区中的消息在大于 1000 个的时候就会开始丢弃先前发布的消息。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">   *NodeHandle::advertise() 返回一个 ros::Publisher 对象,它有两个作用： 1) 它有一个 publish() 成员函数可以让你在topic上发布消息； 2) 如果消息类型不对,它会拒绝发布。</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  ros::Publisher chatter_pub = n.advertise&lt;std_msgs::<span class="keyword">String</span>&gt;(<span class="string">"chatter"</span>, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">  <span class="function">ros::Rate <span class="title">loop_rate</span><span class="params">(<span class="number">10</span>)</span></span>;				<span class="comment">//ros::Rate 对象可以允许你指定自循环的频率。它会追踪记录自上一次调用 Rate::sleep() 后时间的流逝，并休眠直到一个频率周期的时间。这个例子中，我们让它以 10Hz 的频率运行。</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (ros::ok())						<span class="comment">//roscpp 会默认生成一个 SIGINT 句柄，它负责处理 Ctrl-C 键盘操作——使得 ros::ok() 返回 false。</span></span><br><span class="line">  &#123;</span><br><span class="line">    std_msgs::<span class="keyword">String</span> msg;				<span class="comment">//使用一个由 msg file 文件产生的『消息自适应』类在 ROS 网络中广播消息。现在我们使用标准的String消息，它只有一个数据成员 "data"。</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">stringstream</span> ss;</span><br><span class="line">    ss &lt;&lt; <span class="string">"hello world "</span> &lt;&lt; count;</span><br><span class="line">    msg.data = ss.str();</span><br><span class="line"></span><br><span class="line">    ROS_INFO(<span class="string">"%s"</span>, msg.data.c_str());	<span class="comment">//ROS_INFO 和其他类似的函数可以用来代替 printf/cout 等函数。</span></span><br><span class="line"></span><br><span class="line">    chatter_pub.publish(msg);			<span class="comment">//向所有订阅 chatter 话题的节点发送消息。</span></span><br><span class="line"></span><br><span class="line">    ros::spinOnce();					<span class="comment">//在这个例子中并不是一定要调用 ros::spinOnce()，因为我们不接受回调。然而，如果你的程序里包含其他回调函数，最好在这里加上 </span></span><br><span class="line">    									<span class="comment">//ros::spinOnce()这一语句，否则你的回调函数就永远也不会被调用了。				</span></span><br><span class="line"></span><br><span class="line">    loop_rate.sleep();					<span class="comment">//调用 ros::Rate 对象来休眠一段时间以使得发布频率为 10Hz。</span></span><br><span class="line">    ++count;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="beginner-tutorials-src-listener-cpp"><a href="#beginner-tutorials-src-listener-cpp" class="headerlink" title="./beginner_tutorials/src/listener.cpp"></a>./beginner_tutorials/src/listener.cpp</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ros/ros.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"std_msgs/String.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * This tutorial demonstrates simple receipt of messages over the ROS system.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">chatterCallback</span><span class="params">(<span class="keyword">const</span> std_msgs::<span class="keyword">String</span>::ConstPtr&amp; msg)</span>				<span class="comment">//这是一个回调函数，当接收到 chatter 话题的时候就会被调用。消息是以 boost shared_ptr 指针的形式传输，这就意味着你可以存储它而又不需要复制数据。</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  ROS_INFO(<span class="string">"I heard: [%s]"</span>, msg-&gt;data.c_str());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">  ros::init(argc, argv, <span class="string">"listener"</span>);</span><br><span class="line"></span><br><span class="line">  ros::NodeHandle n;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 告诉 master 我们要订阅 chatter 话题上的消息。当有消息发布到这个话题时，ROS 就会调用 chatterCallback() 函数。第二个参数是队列大小，以防我们处理消息的速度不够快，当缓存达到 1000 </span></span><br><span class="line"><span class="comment">   * 条消息后，再有新的消息到来就将开始丢弃先前接收的消息。</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * NodeHandle::subscribe() 返回 ros::Subscriber 对象,你必须让它处于活动状态直到你不再想订阅该消息。当这个对象销毁时，它将自动退订 chatter 话题的消息。</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * 有各种不同的 NodeHandle::subscribe() 函数，允许你指定类的成员函数，甚至是 Boost.Function 对象可以调用的任何数据类型。</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  ros::Subscriber sub = n.subscribe(<span class="string">"chatter"</span>, <span class="number">1000</span>, chatterCallback);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ros::spin() 进入自循环，可以尽可能快的调用消息回调函数。如果没有消息到达，它不会占用很多 CPU，所以不用担心。一旦 ros::ok() 返回 false，ros::spin() 就会立刻跳出自循环。</span></span><br><span class="line"><span class="comment">   * 这有可能是 ros::shutdown() 被调用，或者是用户按下了 Ctrl-C，使得 master 告诉节点要终止运行。也有可能是节点被人为关闭的。</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  ros::spin();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>下边，我们来总结一下:</p>
<ul>
<li>初始化ROS系统</li>
<li>订阅 chatter 话题</li>
<li>进入自循环，等待消息的到达</li>
<li>当消息到达，调用 chatterCallback() 函数</li>
</ul>
<h3 id="beginner-tutorials-CMakeLists-txt"><a href="#beginner-tutorials-CMakeLists-txt" class="headerlink" title="./beginner_tutorials/CMakeLists.txt"></a>./beginner_tutorials/CMakeLists.txt</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">cmake_minimum_required(VERSION <span class="number">2.8</span><span class="number">.3</span>)</span><br><span class="line">project(beginner_tutorials)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Find catkin and any catkin packages</span></span><br><span class="line">find_package(catkin REQUIRED COMPONENTS roscpp rospy std_msgs genmsg)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Declare ROS messages and services</span></span><br><span class="line">add_message_files(FILES Num.msg)</span><br><span class="line">add_service_files(FILES AddTwoInts.srv)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Generate added messages and services</span></span><br><span class="line">generate_messages(DEPENDENCIES std_msgs)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Declare a catkin package</span></span><br><span class="line">catkin_package()</span><br><span class="line"></span><br><span class="line"><span class="comment">## Build talker and listener</span></span><br><span class="line">include_directories(include $&#123;catkin_INCLUDE_DIRS&#125;)</span><br><span class="line"></span><br><span class="line">add_executable(talker src/talker.cpp)</span><br><span class="line">target_link_libraries(talker $&#123;catkin_LIBRARIES&#125;)</span><br><span class="line">add_dependencies(talker beginner_tutorials_generate_messages_cpp)</span><br><span class="line"></span><br><span class="line">add_executable(listener src/listener.cpp)</span><br><span class="line">target_link_libraries(listener $&#123;catkin_LIBRARIES&#125;)</span><br><span class="line">add_dependencies(listener beginner_tutorials_generate_messages_cpp)</span><br></pre></td></tr></table></figure>

<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>在工作空间目录下进行编译，并运行。</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">roscore									<span class="comment">//新开一个终端</span></span><br><span class="line">cd catkin_ws							<span class="comment">//新开一个终端</span></span><br><span class="line">catkin_make</span><br><span class="line">source ./devel/<span class="built_in">setup</span>.bash       		<span class="comment">//在运行你自己的程序前，已经source了catkin工作空间下的setup.sh文件</span></span><br><span class="line">rosrun beginner_tutorials talker 		<span class="comment">//启动发布器</span></span><br><span class="line"></span><br><span class="line">cd catkin_ws							<span class="comment">//新开一个终端，并打开工作空间</span></span><br><span class="line">source ./devel/<span class="built_in">setup</span>.bash       		<span class="comment">//在运行你自己的程序前，已经source了catkin工作空间下的setup.sh文件</span></span><br><span class="line">rosrun beginner_tutorials listener 		<span class="comment">//启动订阅器</span></span><br></pre></td></tr></table></figure>

<h2 id="编写简单的服务器和客户端-C"><a href="#编写简单的服务器和客户端-C" class="headerlink" title="编写简单的服务器和客户端(C++)"></a>编写简单的服务器和客户端(C++)</h2><h3 id="beginner-tutorials-src-add-two-ints-server-cpp"><a href="#beginner-tutorials-src-add-two-ints-server-cpp" class="headerlink" title="./beginner_tutorials/src/add_two_ints_server.cpp"></a>./beginner_tutorials/src/add_two_ints_server.cpp</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ros/ros.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"beginner_tutorials/AddTwoInts.h"</span>								<span class="comment">//beginner_tutorials/AddTwoInts.h是由编译系统自动根据我们先前创建的srv文件生成的对应该srv文件的头文件。</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 这个函数提供两个int值求和的服务，int值从request里面获取，而返回数据装入response内，这些数据类型都定义在srv文件内部，函数返回一个boolean值。</span></span><br><span class="line"><span class="comment">  * 两个int值进行相加，并存入response。然后一些关于request和response的信息被记录下来。最后，service完成计算后返回true值。</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">add</span><span class="params">(beginner_tutorials::AddTwoInts::Request  &amp;req,</span></span></span><br><span class="line"><span class="function"><span class="params">         beginner_tutorials::AddTwoInts::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  res.sum = req.a + req.b;</span><br><span class="line">  ROS_INFO(<span class="string">"request: x=%ld, y=%ld"</span>, (<span class="keyword">long</span> <span class="keyword">int</span>)req.a, (<span class="keyword">long</span> <span class="keyword">int</span>)req.b);</span><br><span class="line">  ROS_INFO(<span class="string">"sending back response: [%ld]"</span>, (<span class="keyword">long</span> <span class="keyword">int</span>)res.sum);</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  ros::init(argc, argv, <span class="string">"add_two_ints_server"</span>);</span><br><span class="line">  ros::NodeHandle n;</span><br><span class="line"></span><br><span class="line">  ros::ServiceServer service = n.advertiseService(<span class="string">"add_two_ints"</span>, add);	<span class="comment">//建立service，并在ROS内发布出来。</span></span><br><span class="line">  ROS_INFO(<span class="string">"Ready to add two ints."</span>);</span><br><span class="line">  ros::spin();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="beginner-tutorials-src-add-two-ints-client-cpp"><a href="#beginner-tutorials-src-add-two-ints-client-cpp" class="headerlink" title="./beginner_tutorials/src/add_two_ints_client.cpp"></a>./beginner_tutorials/src/add_two_ints_client.cpp</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ros/ros.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"beginner_tutorials/AddTwoInts.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  ros::init(argc, argv, <span class="string">"add_two_ints_client"</span>);</span><br><span class="line">  <span class="keyword">if</span> (argc != <span class="number">3</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    ROS_INFO(<span class="string">"usage: add_two_ints_client X Y"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ros::NodeHandle n;</span><br><span class="line">  ros::ServiceClient client = n.serviceClient&lt;beginner_tutorials::AddTwoInts&gt;(<span class="string">"add_two_ints"</span>);		<span class="comment">//这段代码为add_two_ints service创建一个client。ros::ServiceClient 对象待会用来调用service。</span></span><br><span class="line">  beginner_tutorials::AddTwoInts srv;																<span class="comment">//这里，我们实例化一个由ROS编译系统自动生成的service类，并给其request成员赋值。</span></span><br><span class="line">  srv.request.a = atoll(argv[<span class="number">1</span>]);																	<span class="comment">// 一个service类包含两个成员request和response。同时也包括两个类定义Request和Response。</span></span><br><span class="line">  srv.request.b = atoll(argv[<span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 这段代码是在调用service。由于service的调用是模态过程（调用的时候占用进程阻止其他代码的执行），一旦调用完成，将返回调用结果。</span></span><br><span class="line"><span class="comment">   * 如果service调用成功，call()函数将返回true，srv.response里面的值将是合法的值。</span></span><br><span class="line"><span class="comment">   * 如果调用失败，call()函数将返回false，srv.response里面的值将是非法的。 </span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">if</span> (client.call(srv))</span><br><span class="line">  &#123;</span><br><span class="line">    ROS_INFO(<span class="string">"Sum: %ld"</span>, (<span class="keyword">long</span> <span class="keyword">int</span>)srv.response.sum);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  &#123;</span><br><span class="line">    ROS_ERROR(<span class="string">"Failed to call service add_two_ints"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="beginner-tutorials-CMakeLists-txt-1"><a href="#beginner-tutorials-CMakeLists-txt-1" class="headerlink" title="./beginner_tutorials/CMakeLists.txt"></a>./beginner_tutorials/CMakeLists.txt</h3><p>在上一节的CMakeLists.txt后添加：</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">add_executable(add_two_ints_server src/add_two_ints_server.cpp)</span><br><span class="line">target_link_libraries(add_two_ints_server $&#123;catkin_LIBRARIES&#125;)</span><br><span class="line">add_dependencies(add_two_ints_server beginner_tutorials_gencpp)</span><br><span class="line"></span><br><span class="line">add_executable(add_two_ints_client src/add_two_ints_client.cpp)</span><br><span class="line">target_link_libraries(add_two_ints_client $&#123;catkin_LIBRARIES&#125;)</span><br><span class="line">add_dependencies(add_two_ints_client beginner_tutorials_gencpp)</span><br></pre></td></tr></table></figure>

<h3 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h3><p>在工作空间目录下进行编译，并运行。</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">roscore												<span class="comment">//新开一个终端</span></span><br><span class="line">cd catkin_ws										<span class="comment">//新开一个终端</span></span><br><span class="line">catkin_make</span><br><span class="line">source ./devel/<span class="built_in">setup</span>.bash       					<span class="comment">//在运行你自己的程序前，已经source了catkin工作空间下的setup.sh文件</span></span><br><span class="line">rosrun beginner_tutorials add_two_ints_server 		<span class="comment">//启动服务器</span></span><br><span class="line"></span><br><span class="line">cd catkin_ws										<span class="comment">//新开一个终端，并打开工作空间</span></span><br><span class="line">source ./devel/<span class="built_in">setup</span>.bash       					<span class="comment">//在运行你自己的程序前，已经source了catkin工作空间下的setup.sh文件</span></span><br><span class="line">rosrun beginner_tutorials add_two_ints_client <span class="number">1</span> <span class="number">3</span> 	<span class="comment">//启动客户端</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>机器人控制</category>
      </categories>
      <tags>
        <tag>Library</tag>
        <tag>机器人</tag>
        <tag>ROS</tag>
      </tags>
  </entry>
  <entry>
    <title>VMware下Ubuntu的磁盘扩容问题</title>
    <url>/archives/48591.html</url>
    <content><![CDATA[<blockquote>
<p>本文中的环境为Ubuntu16.04LTS + VMware10 + gparted-live-1.0.0-3.</p>
</blockquote>
<a id="more"></a>

<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>由于刚开始使用虚拟机时，随便分配了一块硬盘大小，至今发现虚拟机下的Ubuntu硬盘空间告急，因此需要在不损失原有硬盘文件的情况下进行扩容。在VMware10中对虚拟机进行扩容主要分为两部分：</p>
<ol>
<li><p>在VMware中进行设置，修改预设磁盘大小；</p>
</li>
<li><p>将额外划分出来的磁盘与原虚拟机中Ubuntu的磁盘进行合并(本文介绍)或添加。</p>
</li>
</ol>
<blockquote>
<p>在进行扩容前，需要下载好gparted-live-1.0.0-3.iso文件，注意这不是在Ubuntu的Terminal中用apt-get来下载。文件下载链接<span class="exturl" data-url="aHR0cHM6Ly9zb3VyY2Vmb3JnZS5uZXQvcHJvamVjdHMvZ3BhcnRlZC9maWxlcy8=" title="https://sourceforge.net/projects/gparted/files/">请点这里<i class="fa fa-external-link"></i></span>。(该网页下载速度缓慢，可能需要开启VPN或者另寻他处)</p>
</blockquote>
<h1 id="扩容方法"><a href="#扩容方法" class="headerlink" title="扩容方法"></a>扩容方法</h1><p>1.首先将下载好的gparted-live.iso文件装载到虚拟机的虚拟光驱中，如下图所示。这是由于在Ubuntu正常开启状态时，磁盘处于mount状态，无法扩容。因此，需要采用类似用U盘安装系统那样来启动系统进行磁盘扩容。</p>
<p><img src="/images/20190731VMware/01.png" alt="01.png"></p>
<p>2.点击：虚拟机 –&gt; 设置，对硬盘进行扩容，如下所示，要从“实用工具”的下拉列表中选择“扩展”，等待扩展完成(笔者是从60G扩展到70G的，但是前面几张图是后补的，所以直接显示是70G)。</p>
<p><img src="/images/20190731VMware/02.png" alt="02.png"><br><img src="/images/20190731VMware/03.png" alt="03.png"><br><img src="/images/20190731VMware/04.png" alt="04.png"></p>
<p>3.打开虚拟机，在下面画面出现时快速按下 ESC 键。</p>
<p><img src="/images/20190731VMware/05.png" alt="05.png"></p>
<p>出现 Boot Menu，从中选择 CD-ROM Drive，如下所示。</p>
<p><img src="/images/20190731VMware/07.png" alt="07.png"></p>
<p>4.CD启动的就是GParted Live，如下所示：</p>
<p><img src="/images/20190731VMware/08.png" alt="08.png"></p>
<p>选择第一个，弹出下面的画面：</p>
<p><img src="/images/20190731VMware/09.png" alt="09.png"></p>
<p>直接点回车即可，接下来进入语言选择。</p>
<p><img src="/images/20190731VMware/10.png" alt="10.png"></p>
<p>在上图的圆圈处输入<code>26</code>，选择中文。稍后出现下面的画面，并输入<code>0</code>。</p>
<p><img src="/images/20190731VMware/11.png" alt="11.png"></p>
<p>5.之后即可正常进入CD启动的系统，如没有自动进入下面画面，请在桌面点击<code>GParted</code>，进入。</p>
<p><img src="/images/20190731VMware/12.png" alt="12.png"></p>
<p>从上图可以看到，已经使用57.99G，有10G未分配，还有2G是用来做swap区的。依次将第一个下面的<code>extended</code>和<code>linux-swap</code>都删除，可以得到下面的图片。</p>
<p><img src="/images/20190731VMware/13.png" alt="13.png"></p>
<p>从上图可以看到，未分配的空间已经从10G变成了12G。接下来，就准备对sda1进行扩容。右键点击，选择调整大小，留下2G空间作swap，如下图所示。</p>
<p><img src="/images/20190731VMware/14.png" alt="14.png"></p>
<p>扩容后的效果如下图所示。</p>
<p><img src="/images/20190731VMware/15.png" alt="15.png"></p>
<p>从上图中，可以看到sda1已经由原来的58G变为68G，说明扩容成功。还剩下2G，需要分配为<code>linux-swap</code>。在未分配的区域右键选择新建，将其创建为<code>扩展分区</code>，如下图所示。</p>
<p><img src="/images/20190731VMware/16.png" alt="16.png"></p>
<p>创建好后的效果如下图所示。</p>
<p><img src="/images/20190731VMware/17.png" alt="17.png"></p>
<p>再从上图的未分配磁盘处右键选择新建，将其创建为<code>逻辑分区</code>，文件系统选为<code>linux-swap</code>，如下图所示。</p>
<p><img src="/images/20190731VMware/18.png" alt="18.png"></p>
<p>创建好后的效果如下图所示。</p>
<p><img src="/images/20190731VMware/19.png" alt="19.png"></p>
<p>接下来，按下对勾，完成扩容操作。</p>
<p><img src="/images/20190731VMware/20.png" alt="20.png"></p>
<p>6.扩容完成后的效果如下图所示，在下图中，点击圈出来的底部区域，可返回桌面，选择退出。</p>
<p><img src="/images/20190731VMware/21.png" alt="21.png"><br><img src="/images/20190731VMware/22.png" alt="22.png"><br><img src="/images/20190731VMware/23.png" alt="23.png"></p>
<p>此时，可点击虚拟机 –&gt; 设置，将CD/DVD的启动挂载取消掉，如下图所示。</p>
<p><img src="/images/20190731VMware/24.png" alt="24.png"></p>
<p>在GParted退出时出现的页面直接点击回车即可。</p>
<p><img src="/images/20190731VMware/25.png" alt="25.png"></p>
<p>扩容完成后的效果如下图所示。</p>
<p><img src="/images/20190731VMware/26.png" alt="26.png"></p>
<h1 id="ubuntu16-04开机等待1分30秒-1min30s-解决方法"><a href="#ubuntu16-04开机等待1分30秒-1min30s-解决方法" class="headerlink" title="ubuntu16.04开机等待1分30秒(1min30s)解决方法"></a>ubuntu16.04开机等待1分30秒(1min30s)解决方法</h1><p>在扩容后，笔者开启Ubuntu启动出现了需要等待1min30s的情况，参照<span class="exturl" data-url="aHR0cHM6Ly9qaW5neWFuLmJhaWR1LmNvbS9hcnRpY2xlLzYzYWNiNDRhYzljMDViNjFmZGMxN2U2MS5odG1s" title="https://jingyan.baidu.com/article/63acb44ac9c05b61fdc17e61.html">ubuntu16.04开机等待1分30秒(1min30s)解决方法<i class="fa fa-external-link"></i></span>进行解决。</p>
<blockquote>
<p>参考链接<span class="exturl" data-url="aHR0cHM6Ly93d3cubGludXhpZGMuY29tL0xpbnV4LzIwMTUtMDgvMTIxNjc0Lmh0bQ==" title="https://www.linuxidc.com/Linux/2015-08/121674.htm">VMware11下对虚拟机Ubuntu14.10系统所在分区sda1进行磁盘扩容<i class="fa fa-external-link"></i></span></p>
</blockquote>
]]></content>
      <categories>
        <category>工科生的基本功</category>
        <category>软件技术</category>
      </categories>
      <tags>
        <tag>Library</tag>
        <tag>VMware</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux下共享内存的使用方法</title>
    <url>/archives/10600.html</url>
    <content><![CDATA[<blockquote>
<p>开发环境：Ubuntu16.04 LTS。 </p>
</blockquote>
<a id="more"></a>

<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>共享存储允许两个或多个进程共享一个给定的存储区，是进程间通信最快的一种方式。不要同时对共享存储空间进行写操作。通常，可以将信号量用于同步共享存储访问。</p>
<p>最简单的共享内存的使用流程如下：</p>
<ol>
<li><p>ftok函数生成键值</p>
</li>
<li><p>shmget函数创建共享内存空间</p>
</li>
<li><p>shmat函数获取第一个可用共享内存空间的地址</p>
</li>
<li><p>shmdt函数进行分离（对共享存储段操作结束时的步骤，并不是从系统中删除共享内存和结构）</p>
</li>
<li><p>shmctl函数进行删除共享存储空间</p>
</li>
</ol>
<p>上述的五个函数都是系统自带的函数，接下来对它们一一介绍。</p>
<h1 id="系统函数介绍"><a href="#系统函数介绍" class="headerlink" title="系统函数介绍"></a>系统函数介绍</h1><h2 id="ftok函数"><a href="#ftok函数" class="headerlink" title="ftok函数"></a>ftok函数</h2><p>1.功能：生成键值。每一个共享存储段都有一个对应的键值（key）相关联（消息队列、信号量也同样需要）。</p>
<p>2.所需头文件：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/ipc.h&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>3.函数原型：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">key_t</span> <span class="title">ftok</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *path ,<span class="keyword">int</span> id)</span></span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>path为一个已存在的路径名；id为0~255之间的一个数值，代表项目ID。</p>
</blockquote>
<p>4.返回值：成功返回键值（相当于32位的int），出错返回-1。</p>
<p>5.示例：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">key_t</span> key = ftok( “/tmp”, <span class="number">66</span>);</span><br></pre></td></tr></table></figure>

<h2 id="shmget函数"><a href="#shmget函数" class="headerlink" title="shmget函数"></a>shmget函数</h2><p>1.功能：创建共享存储空间并返回一个共享存储标识符。</p>
<p>2.所需头文件：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/shm.h&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>3.函数原型：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">shmget</span><span class="params">(<span class="keyword">key_t</span> key, <span class="keyword">size_t</span> <span class="built_in">size</span>,<span class="keyword">int</span> flag)</span></span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>key为ftok生成的键值。<br>size为共享内存的长度，以字节为单位。<br>flag为所需要的操作和权限，可以用来创建一个共享存储空间并返回一个标识符或者获得一个共享标识符。所取值可为IPC_CREAT、IPC_CREAT | IPC_EXCL。<br>flag的值为IPC_CREAT：如果不存在key值的共享存储空间，且权限不为0，则创建共享存储空间，并返回一个共享存储标识符。如果存在，则直接返回共享存储标识符。<br>flag的值为 IPC_CREAT | IPC_EXCL：如果不存在key值的共享存储空间，且权限不为0，则创建共享存储空间，并返回一个共享存储标识符。如果存在，则产生错误。</p>
</blockquote>
<p>4.返回值：成功返回共享存储ID，出错返回-1。</p>
<p>5.示例：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> id = shmget(key,<span class="number">4096</span>,IPC_CREAT|<span class="number">0666</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>说明：创建一个大小为4096个字节的权限为0666（所有用户可读可写，具体查询linux权限相关内容）的共享存储空间，并返回一个共享存储标识符，如果key值已经存在有共享存储空间了，则直接返回一个共享存储标识符。</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> id = shmget(key, <span class="number">4096</span>, IPC_CREAT|IPC_EXCL|<span class="number">0666</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>说明：创建一个大小为4096个字节的权限为0666（所有用户可读可写，具体查询linux权限相关内容）的共享存储空间，并返回一个整形共享存储标识符，如果key值已经存在有共享存储空间了，则出错返回-1。</p>
</blockquote>
<h2 id="shmat函数"><a href="#shmat函数" class="headerlink" title="shmat函数"></a>shmat函数</h2><p>1.功能：获取第一个可用共享内存空间的地址。</p>
<p>2.所需头文件：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/shm.h&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>3.函数原型：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> *<span class="title">shmat</span><span class="params">(<span class="keyword">int</span> shmid, <span class="keyword">const</span> <span class="keyword">void</span> *addr, <span class="keyword">int</span> flag)</span></span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>shmid为shmget生成的共享存储标识符。<br>addr指定共享内存出现在进程内存地址的什么位置，直接指定为NULL让内核自己决定一个合适的地址位置。<br>flag为对数据的操作，如果指定为SHM_RDONLY则以只读方式连接此段，其他值为读写方式连接此段。<br>翻阅linux下shm.c文件得到#define SHM_RDONLY      010000  // read-only access 。<br>flag的值为 IPC_CREAT | IPC_EXCL：如果不存在key值的共享存储空间，且权限不为0，则创建共享存储空间，并返回一个共享存储标识符。如果存在，则产生错误。</p>
</blockquote>
<p>4.返回值：成功返回指向共享存储段的指针；错误返回-1（打印出指针的值为全F）。</p>
<p>5.示例：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">char</span> *addr  = shmat(id, <span class="literal">NULL</span>, <span class="number">0</span>);      <span class="comment">//返回第一个可用的共享内存地址的指针的值给addr</span></span><br></pre></td></tr></table></figure>

<h2 id="shmdt函数"><a href="#shmdt函数" class="headerlink" title="shmdt函数"></a>shmdt函数</h2><p>1.功能：当不需要对此共享内存进行操作时候，调用shmdt函数进行分离，不是删除此共享存储空间哟。</p>
<p>2.所需头文件：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/shm.h&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>3.函数原型：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">shmdt</span><span class="params">(<span class="keyword">const</span> <span class="keyword">void</span> *addr)</span></span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>addr为shmat函数返回的地址指针。</p>
</blockquote>
<p>4.返回值：成功返回0；错误返回-1。</p>
<p>5.示例：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> ret = shmdt(addr);</span><br></pre></td></tr></table></figure>

<h2 id="shmctl函数"><a href="#shmctl函数" class="headerlink" title="shmctl函数"></a>shmctl函数</h2><p>1.功能：对共享内存进行控制。最简单的操作就是删除共享存储空间了，也可以获取和改变共享内存的状态。</p>
<p>2.所需头文件：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/shm.h&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>3.函数原型：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">shmctl</span><span class="params">(<span class="keyword">int</span> shmid, <span class="keyword">int</span> cmd, struct shmid_ds *buf)</span></span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>shmid就是shmget函数返回的共享存储标识符。<br>cmd有三个:IPC_RMID——删除共享内存；<br>         IPC_STAT——得到共享内存的状态，把共享内存的shmid_ds结构复制到buf中；<br>         IPC_SET——改变共享内存的状态，把buf所指的shmid_ds结构中的uid、gid、mode复制到共享内存的shmid_ds结构内。（内核为每个共享存储段维护着一个结构，结构名为shmid_ds，这里就不讲啦，里面存放着共享内存的大小，pid，存放时<br>         间等一些参数）<br>buf就是结构体shmid_ds。</p>
</blockquote>
<p>4.返回值：成功返回0；错误返回-1。</p>
<p>5.示例：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> ret = shmctl(id, IPC_RMID,<span class="literal">NULL</span>);    <span class="comment">//删除id号的共享存储空间</span></span><br></pre></td></tr></table></figure>

<h1 id="Linux共享内存的查看方法"><a href="#Linux共享内存的查看方法" class="headerlink" title="Linux共享内存的查看方法"></a>Linux共享内存的查看方法</h1><p>1.使用<code>ipcs -m</code>命令可以查看当前系统所有的共享内存空间信息，如下图所示。</p>
<p><img src="/images/20190731shrmm/01.png" alt="01"></p>
<p>2.如果程序创建了一个共享内存段，但没有被正确销毁，可能在下次打开程序时出现错误，这时可使用<code>ipcrm -m shmid</code>命令先删除共享内存段。例如要删除上图中的最后一块共享内存，可使用命令<code>ipcrm -m 6455308</code>，删除后的效果如下图所示。</p>
<p><img src="/images/20190731shrmm/02.png" alt="02"></p>
<p>3.在Linux下，如果你申请24字节大小的共享存储空间，系统还是会默认给你分配一页的大小，但你还是只能使用这一页上24字节的空间。使用<code>getconf PAGE_SIZE</code>命令就能显示出一页的大小。</p>
<h1 id="共享内存使用示例程序"><a href="#共享内存使用示例程序" class="headerlink" title="共享内存使用示例程序"></a>共享内存使用示例程序</h1><h2 id="整体介绍"><a href="#整体介绍" class="headerlink" title="整体介绍"></a>整体介绍</h2><p>本例采用两个独立程序(server与client)来进行共享内存测试。首次打开程序时，先用server开辟一段共享内存，再用client连接到该共享内存；之后使用时，server与client可以互相向共享内存中读和写。两个程序都具有如下目录结构：</p>
<p><img src="/images/20190731shrmm/07.png" alt="07"></p>
<p>两个程序的区别是在main.cpp和CMakeLists.txt中。</p>
<h2 id="CKX-h"><a href="#CKX-h" class="headerlink" title="CKX.h"></a>CKX.h</h2><p>该头文件只是定义一个数据类，用来向内存中写入姓名和年龄。</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span>  __CKX_H_</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span>  __CKX_H_</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NAME_LEN  20</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ckx</span> &#123;</span></span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">  <span class="keyword">char</span> name[NAME_LEN];</span><br><span class="line">  <span class="keyword">int</span> age;</span><br><span class="line">  ckx() &#123;&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// __CKX_H_</span></span></span><br></pre></td></tr></table></figure>

<h2 id="CShareMemory-h"><a href="#CShareMemory-h" class="headerlink" title="CShareMemory.h"></a>CShareMemory.h</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span>  __CSHAREMEMORY_H_</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span>  __CSHAREMEMORY_H_</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span>  <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span>  <span class="meta-string">&lt;sys/ipc.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span>  <span class="meta-string">&lt;sys/shm.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CShareMemory</span> &#123;</span></span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">  CShareMemory() &#123;addr = <span class="literal">NULL</span>; shmid=<span class="number">0</span>; <span class="built_in">size</span>=<span class="number">0</span>;&#125;;</span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">create_ipc</span><span class="params">(<span class="keyword">int</span> key_id, <span class="keyword">int</span> ipc_size)</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">get_ipc</span><span class="params">(<span class="keyword">int</span> key_id, <span class="keyword">int</span> ipc_size)</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">destroy_sharememory</span><span class="params">()</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">close_shm</span><span class="params">()</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">void</span>* <span class="title">get_address</span><span class="params">()</span></span>;</span><br><span class="line"> <span class="keyword">private</span>:</span><br><span class="line">  <span class="keyword">int</span> shmid;</span><br><span class="line">  <span class="keyword">int</span> <span class="built_in">size</span>;</span><br><span class="line">  <span class="keyword">void</span>* addr;</span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">sharememory</span><span class="params">(<span class="keyword">int</span> key_id, <span class="keyword">int</span> ipc_size, <span class="keyword">int</span> flag)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// __CSHAREMEMORY_H_</span></span></span><br></pre></td></tr></table></figure>

<h2 id="CShareMemory-cpp"><a href="#CShareMemory-cpp" class="headerlink" title="CShareMemory.cpp"></a>CShareMemory.cpp</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/shm.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"CShareMemory.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">CShareMemory::sharememory</span><span class="params">(<span class="keyword">int</span> key_id, <span class="keyword">int</span> ipc_size, <span class="keyword">int</span> flag)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">key_t</span> key = ftok(<span class="string">"/tmp"</span>, key_id);</span><br><span class="line">  <span class="keyword">if</span> (key &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"get key error\n"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  shmid = shmget(key, ipc_size, flag);</span><br><span class="line">  addr = shmat(shmid, (<span class="keyword">void</span> *)<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  <span class="keyword">if</span> (shmid &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"get shmid error\n"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> shmid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">CShareMemory::create_ipc</span><span class="params">(<span class="keyword">int</span> key_id, <span class="keyword">int</span> ipc_size)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> sharememory(key_id, ipc_size, IPC_CREAT|IPC_EXCL|<span class="number">0666</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">CShareMemory::get_ipc</span><span class="params">(<span class="keyword">int</span> key_id, <span class="keyword">int</span> ipc_size)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> sharememory(key_id, ipc_size, IPC_CREAT|<span class="number">0666</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">CShareMemory::destroy_sharememory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> shmctl(shmid, IPC_RMID, <span class="literal">NULL</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief  free the share memory</span></span><br><span class="line"><span class="comment"> * &lt;long-description&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param</span></span><br><span class="line"><span class="comment"> * @return &lt;ReturnValue&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">CShareMemory::close_shm</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> rtn;</span><br><span class="line">    rtn = shmdt(addr);</span><br><span class="line">    <span class="keyword">return</span> rtn;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief get address of share memory</span></span><br><span class="line"><span class="comment"> * &lt;long-description&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param</span></span><br><span class="line"><span class="comment"> * @return &lt;ReturnValue&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span>* <span class="title">CShareMemory::get_address</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (addr == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">void</span>*) addr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Server的main-cpp"><a href="#Server的main-cpp" class="headerlink" title="Server的main.cpp"></a>Server的main.cpp</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/shm.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"CKX.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"CShareMemory.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">int</span> key = <span class="number">66</span>;</span><br><span class="line">  ckx *p2 = <span class="keyword">new</span> ckx();</span><br><span class="line">  CShareMemory shmm;</span><br><span class="line">  <span class="keyword">int</span> id = shmm.create_ipc(key, <span class="keyword">sizeof</span>(*p2));</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">"sizeof *p2 is: "</span> &lt;&lt; <span class="keyword">sizeof</span>(*p2) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">"id = "</span> &lt;&lt; id &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="keyword">if</span> (id &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Create sharememory error!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span>(<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"\n\n1.input data to sharememory\n2.get sharememory data\n3.destroy sharememory\ninput select:"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; i;</span><br><span class="line">    <span class="keyword">if</span>(i &gt; <span class="number">3</span> || i &lt; <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">"Input error!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    id = shmm.get_ipc(key, <span class="keyword">sizeof</span>(*p2));</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"id = "</span> &lt;&lt; id &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">if</span>(id &lt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">"Get sharememory error!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    p2 = (ckx *)shmat(id, <span class="literal">NULL</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span>(p2 &lt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">"Get sharememory address error!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">      p2 = <span class="literal">NULL</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">switch</span> (i) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">1</span>: &#123;</span><br><span class="line">	<span class="keyword">char</span> name[NAME_LEN];</span><br><span class="line">	<span class="keyword">int</span> age = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Input name:"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	fflush(<span class="built_in">stdin</span>);</span><br><span class="line">	getchar();</span><br><span class="line">	gets(name);</span><br><span class="line">	<span class="built_in">strcpy</span>(p2-&gt;name, name);</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Input age: "</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cin</span> &gt;&gt; age;</span><br><span class="line">	p2-&gt;age = age;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Write success!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">2</span>: &#123;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"name: "</span> &lt;&lt; p2-&gt;name &lt;&lt; <span class="string">"\t"</span> &lt;&lt; <span class="string">"age: "</span> &lt;&lt; p2-&gt;age &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">3</span>: &#123;</span><br><span class="line">	<span class="keyword">if</span>(shmm.destroy_sharememory() == <span class="number">-1</span>)</span><br><span class="line">	  <span class="built_in">cout</span> &lt;&lt; <span class="string">"-1"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	id = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">	<span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(shmm.close_shm() == <span class="number">-1</span>) &#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">"shmdt error!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(id == <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Server的CMakeLists-txt"><a href="#Server的CMakeLists-txt" class="headerlink" title="Server的CMakeLists.txt"></a>Server的CMakeLists.txt</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">cmake_minimum_required(VERSION <span class="number">3.1</span><span class="number">.0</span>)</span><br><span class="line">project(shrmmTestServer)</span><br><span class="line"><span class="built_in">set</span> (CMAKE_CXX_STANDARD <span class="number">11</span>)</span><br><span class="line">include_directories(<span class="string">"./include/"</span>)</span><br><span class="line">add_executable(shrmmTestServer main.cpp ./src/CShareMemory.cpp)</span><br></pre></td></tr></table></figure>

<h2 id="Client的main-cpp"><a href="#Client的main-cpp" class="headerlink" title="Client的main.cpp"></a>Client的main.cpp</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/shm.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"CKX.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"CShareMemory.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">int</span> key = <span class="number">66</span>;</span><br><span class="line">  ckx *p2 = <span class="keyword">new</span> ckx();</span><br><span class="line">  CShareMemory shmm;</span><br><span class="line">  <span class="keyword">int</span> id = <span class="number">0</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">"sizeof *p2 is: "</span> &lt;&lt; <span class="keyword">sizeof</span>(*p2) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">"id = "</span> &lt;&lt; id &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (id &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Create sharememory error!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span>(<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"\n\n1.input data to sharememory\n2.get sharememory data\n3.destroy sharememory\ninput select:"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; i;</span><br><span class="line">    <span class="keyword">if</span>(i &gt; <span class="number">3</span> || i &lt; <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">"Input error!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    id = shmm.get_ipc(key, <span class="keyword">sizeof</span>(*p2));</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"id = "</span> &lt;&lt; id &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">if</span>(id &lt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">"Get sharememory error!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    p2 = (ckx *)shmat(id, <span class="literal">NULL</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span>(p2 &lt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">"Get sharememory address error!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">      p2 = <span class="literal">NULL</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">switch</span> (i) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">1</span>: &#123;</span><br><span class="line">	<span class="keyword">char</span> name[NAME_LEN];</span><br><span class="line">	<span class="keyword">int</span> age = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Input name:"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	fflush(<span class="built_in">stdin</span>);</span><br><span class="line">	getchar();</span><br><span class="line">	gets(name);</span><br><span class="line">	<span class="built_in">strcpy</span>(p2-&gt;name, name);</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Input age: "</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cin</span> &gt;&gt; age;</span><br><span class="line">	p2-&gt;age = age;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Write success!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">2</span>: &#123;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"name: "</span> &lt;&lt; p2-&gt;name &lt;&lt; <span class="string">"\t"</span> &lt;&lt; <span class="string">"age: "</span> &lt;&lt; p2-&gt;age &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">3</span>: &#123;</span><br><span class="line">	<span class="keyword">if</span>(shmm.destroy_sharememory() == <span class="number">-1</span>)</span><br><span class="line">	  <span class="built_in">cout</span> &lt;&lt; <span class="string">"-1"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	id = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">	<span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(shmm.close_shm() == <span class="number">-1</span>) &#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">"shmdt error!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(id == <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Server的CMakeLists-txt-1"><a href="#Server的CMakeLists-txt-1" class="headerlink" title="Server的CMakeLists.txt"></a>Server的CMakeLists.txt</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">cmake_minimum_required(VERSION <span class="number">3.1</span><span class="number">.0</span>)</span><br><span class="line">project(shrmmTestClient)</span><br><span class="line"><span class="built_in">set</span> (CMAKE_CXX_STANDARD <span class="number">11</span>)</span><br><span class="line">include_directories(<span class="string">"./include/"</span>)</span><br><span class="line">add_executable(shrmmTestClient main.cpp ./src/CShareMemory.cpp)</span><br></pre></td></tr></table></figure>

<h2 id="程序运行结果"><a href="#程序运行结果" class="headerlink" title="程序运行结果"></a>程序运行结果</h2><p>1.从server中输入名字和年龄存储到共享内存中，并从client中读取：</p>
<p><img src="/images/20190731shrmm/03.png" alt="03"><br><img src="/images/20190731shrmm/04.png" alt="04"></p>
<p>2.从client中输入名字和年龄存储到共享内存中，并从server中读取：</p>
<p><img src="/images/20190731shrmm/05.png" alt="05"><br><img src="s/images/20190731shrmm/06.png" alt="06"></p>
<blockquote>
<p>Note：自己创建build文件夹并进行编译！</p>
</blockquote>
<blockquote>
<p>参考链接<span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3NjY0MTY3L2FydGljbGUvZGV0YWlscy84MTI3NzA5Ng==" title="https://blog.csdn.net/qq_27664167/article/details/81277096">Linux下共享内存编程(共享存储空间)<i class="fa fa-external-link"></i></span></p>
</blockquote>
]]></content>
      <categories>
        <category>工科生的基本功</category>
        <category>快乐码农</category>
      </categories>
      <tags>
        <tag>Library</tag>
        <tag>Linux</tag>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux下boost库的安装</title>
    <url>/archives/45371.html</url>
    <content><![CDATA[<blockquote>
<p>开发环境：Ubuntu16.04 LTS、 boost 1.69。 </p>
</blockquote>
<a id="more"></a>

<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>boost库是子Linux环境下用来做串口通信的一个库，本篇主要介绍该库的安装方法。</p>
<h1 id="boost库的安装"><a href="#boost库的安装" class="headerlink" title="boost库的安装"></a>boost库的安装</h1><h2 id="下载安装包"><a href="#下载安装包" class="headerlink" title="下载安装包"></a>下载安装包</h2><p>可以从<span class="exturl" data-url="aHR0cHM6Ly9zb3VyY2Vmb3JnZS5uZXQvcHJvamVjdHMvYm9vc3QvZmlsZXMvYm9vc3QvMS42OS4wLw==" title="https://sourceforge.net/projects/boost/files/boost/1.69.0/">此链接<i class="fa fa-external-link"></i></span>下载相应的boost 1.69的安装包，也可以自行从官网上下载安装包。下载完成后，右键解压，极好存放的路径。</p>
<h2 id="安装过程"><a href="#安装过程" class="headerlink" title="安装过程"></a>安装过程</h2><p>在Terminal中，打开安装包存放路径，执行下列语句进行安装。</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">cd 安装包存放路径</span><br><span class="line">./boostrap.sh</span><br><span class="line">./b2</span><br><span class="line">sudo ./b2 --prefix=/usr/local install</span><br></pre></td></tr></table></figure>

<blockquote>
<p>参考链接<span class="exturl" data-url="aHR0cHM6Ly93d3cubGludXhpZGMuY29tL0xpbnV4LzIwMTktMDMvMTU3NjA1Lmh0bQ==" title="https://www.linuxidc.com/Linux/2019-03/157605.htm">Linux下编译安装boost 1.69库全过程<i class="fa fa-external-link"></i></span></p>
</blockquote>
<h1 id="低版本boost库的安装"><a href="#低版本boost库的安装" class="headerlink" title="低版本boost库的安装"></a>低版本boost库的安装</h1><p>由于在学习中科院的ROS安装过程中，编译时出现了如下错误，看错误应该是在/usr/local/boost库中调用出错，查资料应该是boost库安装版本过高(当然也可能是由于安装时路径出错，应该在/usr/local路径中)。</p>
<p><img src="/images/20190730boost/03.png" alt="03.png"></p>
<p><img src="/images/20190730boost/02.png" alt="02.png"></p>
<p>于是本节开始提到的两个路径中使用<code>sudo rm -rf boost</code>强制删掉boost，重新在/usr/local路径中安装boost，再次编译，通过！</p>
<p><img src="/images/20190730boost/01.png" alt="01.png"></p>
]]></content>
      <categories>
        <category>工科生的基本功</category>
        <category>快乐码农</category>
      </categories>
      <tags>
        <tag>Library</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>C++中配置文件的读取</title>
    <url>/archives/22984.html</url>
    <content><![CDATA[<blockquote>
<p>开发环境：Ubuntu16.04 LTS。 需要的库：Eigen3。 额外的文件:inifile.h、inifile.cpp。</p>
</blockquote>
<a id="more"></a>

<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>使用配置文件是提高项目开发效率的一个重要方法。如果不使用配置文件，当我们需要不断调整程序中的参数时，就会造成每修改一次参数需要进行一次编译的情况，<br>而当项目代码很庞大时，编译往往会耗费大量时间。为了节约项目开发时间，提高工作效率，就需要将待调整参数存放至配置文件中。这样做，在修改时只需要修改配<br>置文件中的参数，而不必对整个项目进行编译。</p>
<h1 id="完整程序源码"><a href="#完整程序源码" class="headerlink" title="完整程序源码"></a>完整程序源码</h1><p>完整程序目录入下图所示：<br><img src="/images/20190711/iniTestTree.PNG" alt="iniTestTree"></p>
<h2 id="CMakeLists-txt"><a href="#CMakeLists-txt" class="headerlink" title="CMakeLists.txt"></a>CMakeLists.txt</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">cmake_minimum_required(VERSION <span class="number">2.8</span>)</span><br><span class="line">project(iniTest)   </span><br><span class="line"><span class="built_in">set</span> (CMAKE_CXX_STANDARD <span class="number">11</span>) </span><br><span class="line">include_directories(	<span class="string">"./include/"</span></span><br><span class="line">			<span class="string">"/usr/include/eigen3"</span>	)</span><br><span class="line">add_executable(iniTest main.cpp ./src/inifile.cpp)</span><br></pre></td></tr></table></figure>

<p>说明：</p>
<ol>
<li><p><code>include_directories</code>是指添加所需头文件的目录，一些常规文件可自行添加，本例中为添加<code>inifile.h</code>需要加上”./include/“，还需手动添加”/usr/include/eigen3”。</p>
</li>
<li><p><code>add_executable</code>是指添加需要执行的cpp文件，注意需要将不同文件夹下的源文件包含进来。</p>
</li>
</ol>
<h2 id="test-ini"><a href="#test-ini" class="headerlink" title="test.ini"></a>test.ini</h2><p>配置文件test.ini内容如下，主要包含两个标题，每个标题下有两个标签。(标题、标签说法可能不专业)</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">[ObjectType]</span><br><span class="line"># Obj0</span><br><span class="line">minHSV0=<span class="number">0</span> <span class="number">15</span> <span class="number">10</span></span><br><span class="line">maxHSV0=<span class="number">10</span> <span class="number">25</span> <span class="number">20</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[Motion]</span><br><span class="line">CoeffJv=<span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1.5</span> <span class="number">1.5</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line">Pos=<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span></span><br></pre></td></tr></table></figure>

<h2 id="main-cpp"><a href="#main-cpp" class="headerlink" title="main.cpp"></a>main.cpp</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"inifile.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Eigen/Core&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Eigen/Dense&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> inifile;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> Eigen;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Vector7d Matrix<span class="meta-string">&lt;double, 7, 1&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Vector3d Matrix<span class="meta-string">&lt;double, 3, 1&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Vector7d a;</span><br><span class="line">  a &lt;&lt; <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>;</span><br><span class="line">  Vector7d &amp;coeffJv = a;</span><br><span class="line">  Vector3d b;</span><br><span class="line">  Vector3d &amp;minHSV0 = b;</span><br><span class="line">  IniFile ini;</span><br><span class="line">  <span class="keyword">int</span> rtn;</span><br><span class="line">  <span class="built_in">string</span> file = <span class="string">"../test.ini"</span>;</span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span>* fileName = file.c_str();</span><br><span class="line">  <span class="keyword">if</span> (ini.load(fileName) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"No such file!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">"Load file succeed!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">"\na : "</span> &lt;&lt; a.transpose() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">string</span> str1, str2;</span><br><span class="line">  <span class="built_in">string</span> title = <span class="string">"Motion"</span>;</span><br><span class="line">  <span class="built_in">string</span> label = <span class="string">"CoeffJv"</span>;</span><br><span class="line">  str1 = ini.getStringValue(title.c_str(), label.c_str(), rtn);</span><br><span class="line"></span><br><span class="line">  title = <span class="string">"ObjectType"</span>;</span><br><span class="line">  label = <span class="string">"minHSV0"</span>;</span><br><span class="line">  str2 = ini.getStringValue(title.c_str(), label.c_str(), rtn);</span><br><span class="line">  <span class="keyword">if</span> (rtn != <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">sscanf</span>(str1.c_str(), <span class="string">"%lf %lf %lf %lf %lf %lf %lf"</span>, &amp;coeffJv[<span class="number">0</span>],</span><br><span class="line">  	 &amp;coeffJv[<span class="number">1</span>], &amp;coeffJv[<span class="number">2</span>], &amp;coeffJv[<span class="number">3</span>],</span><br><span class="line">	 &amp;coeffJv[<span class="number">4</span>], &amp;coeffJv[<span class="number">5</span>], &amp;coeffJv[<span class="number">6</span>]);</span><br><span class="line">  <span class="built_in">sscanf</span>(str2.c_str(), <span class="string">"%lf %lf %lf"</span>, &amp;minHSV0[<span class="number">0</span>],</span><br><span class="line">  	 &amp;minHSV0[<span class="number">1</span>], &amp;minHSV0[<span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">"\nCoeffJv : "</span> &lt;&lt; coeffJv.transpose() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">"\na: "</span> &lt;&lt; a.transpose() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">"\nminHSV0 : "</span> &lt;&lt; minHSV0.transpose() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">"\nb: "</span> &lt;&lt; b.transpose() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>说明：</p>
<p>1.Q：为什么要用引用？</p>
<p>  A：用引用的目的是为了最后通过<code>sscanf</code>函数将配置文件中的参数写到自己的变量中，不用引用会写入失败。<code>sscanf</code>函数的用法目前尚不十分明确，因此这里只是<br>     给出一种能用的方法。使用引用时必须初始化，因此首先定义了a、b两个变量，引用只是这两个变量的两个别名，修改引用的值会改掉a、b的值。</p>
<p>2.Q：c_str()的作用是啥？</p>
<p>  A：c_str()是string类下的一个函数，返回类型是<code>const char*</code>，这个类型在load()、getStringValue()类型中都需要用到。而直接用<code>const char*</code>来定义，将会<br>     导致字符串无法修改。</p>
<p>3.Q：transpose()的作用为何？</p>
<p>  A：这是matrix中的一个函数，将矩阵进行转置。</p>
<h2 id="include-inifile-h"><a href="#include-inifile-h" class="headerlink" title="../include/inifile.h"></a>../include/inifile.h</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> _INIFILE_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _INIFILE_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">namespace</span> inifile</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> RET_OK  = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> RET_ERR = <span class="number">-1</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">string</span> delim = <span class="string">"\n"</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">IniItem</span> &#123;</span></span><br><span class="line">    <span class="built_in">string</span> key;</span><br><span class="line">    <span class="built_in">string</span> value;</span><br><span class="line">    <span class="built_in">string</span> comment;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">IniSection</span> &#123;</span></span><br><span class="line">    <span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;IniItem&gt;::iterator iterator;</span><br><span class="line">    <span class="function">iterator <span class="title">begin</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> items.<span class="built_in">begin</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">iterator <span class="title">end</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> items.<span class="built_in">end</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">string</span> name;</span><br><span class="line">    <span class="built_in">string</span> comment;</span><br><span class="line">    <span class="built_in">vector</span>&lt;IniItem&gt; items;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IniFile</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    IniFile();</span><br><span class="line">    ~IniFile() &#123;</span><br><span class="line">        <span class="built_in">release</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">typedef</span> <span class="built_in">map</span>&lt;<span class="built_in">string</span>, IniSection *&gt;::iterator iterator;</span><br><span class="line"></span><br><span class="line">    <span class="function">iterator <span class="title">begin</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sections_.<span class="built_in">begin</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">iterator <span class="title">end</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sections_.<span class="built_in">end</span>();</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/* 打开并解析一个名为fname的INI文件 */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">load</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;fname)</span></span>;</span><br><span class="line">    <span class="comment">/*将内容保存到当前文件*/</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">save</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="comment">/*将内容另存到一个名为fname的文件*/</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">saveas</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;fname)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*获取section段第一个键为key的值,并返回其string型的值*/</span></span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">getStringValue</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section, <span class="keyword">const</span> <span class="built_in">string</span> &amp;key, <span class="keyword">int</span> &amp;ret)</span></span>;</span><br><span class="line">    <span class="comment">/*获取section段第一个键为key的值,并返回其int型的值*/</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getIntValue</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section, <span class="keyword">const</span> <span class="built_in">string</span> &amp;key, <span class="keyword">int</span> &amp;ret)</span></span>;</span><br><span class="line">    <span class="comment">/*获取section段第一个键为key的值,并返回其double型的值*/</span></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">getDoubleValue</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section, <span class="keyword">const</span> <span class="built_in">string</span> &amp;key, <span class="keyword">int</span> &amp;ret)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*获取section段第一个键为key的值,并将值赋到value中*/</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getValue</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section, <span class="keyword">const</span> <span class="built_in">string</span> &amp;key, <span class="built_in">string</span> &amp;value)</span></span>;</span><br><span class="line">    <span class="comment">/*获取section段第一个键为key的值,并将值赋到value中,将注释赋到comment中*/</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getValue</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section, <span class="keyword">const</span> <span class="built_in">string</span> &amp;key, <span class="built_in">string</span> &amp;value, <span class="built_in">string</span> &amp;comment)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*获取section段所有键为key的值,并将值赋到values的vector中*/</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getValues</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section, <span class="keyword">const</span> <span class="built_in">string</span> &amp;key, <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;values)</span></span>;</span><br><span class="line">    <span class="comment">/*获取section段所有键为key的值,并将值赋到values的vector中,,将注释赋到comments的vector中*/</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getValues</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section, <span class="keyword">const</span> <span class="built_in">string</span> &amp;key, <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;value, <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;comments)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">hasSection</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section)</span> </span>;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">hasKey</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section, <span class="keyword">const</span> <span class="built_in">string</span> &amp;key)</span> </span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 获取section段的注释 */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getSectionComment</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section, <span class="built_in">string</span> &amp;comment)</span></span>;</span><br><span class="line">    <span class="comment">/* 设置section段的注释 */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">setSectionComment</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section, <span class="keyword">const</span> <span class="built_in">string</span> &amp;comment)</span></span>;</span><br><span class="line">    <span class="comment">/*获取注释标记符列表*/</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">getCommentFlags</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;flags)</span></span>;</span><br><span class="line">    <span class="comment">/*设置注释标记符列表*/</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setCommentFlags</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;flags)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*同时设置值和注释*/</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">setValue</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section, <span class="keyword">const</span> <span class="built_in">string</span> &amp;key, <span class="keyword">const</span> <span class="built_in">string</span> &amp;value, <span class="keyword">const</span> <span class="built_in">string</span> &amp;comment = <span class="string">""</span>)</span></span>;</span><br><span class="line">    <span class="comment">/*删除段*/</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteSection</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section)</span></span>;</span><br><span class="line">    <span class="comment">/*删除特定段的特定参数*/</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteKey</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section, <span class="keyword">const</span> <span class="built_in">string</span> &amp;key)</span></span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*去掉str后面的c字符*/</span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">trimleft</span><span class="params">(<span class="built_in">string</span> &amp;str, <span class="keyword">char</span> c = <span class="string">' '</span>)</span></span>;</span><br><span class="line">    <span class="comment">/*去掉str前面的c字符*/</span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">trimright</span><span class="params">(<span class="built_in">string</span> &amp;str, <span class="keyword">char</span> c = <span class="string">' '</span>)</span></span>;</span><br><span class="line">    <span class="comment">/*去掉str前面和后面的空格符,Tab符等空白符*/</span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">trim</span><span class="params">(<span class="built_in">string</span> &amp;str)</span></span>;</span><br><span class="line">    <span class="comment">/*将字符串str按分割符delim分割成多个子串*/</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function">IniSection *<span class="title">getSection</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section = <span class="string">""</span>)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">release</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getline</span><span class="params">(<span class="built_in">string</span> &amp;str, FILE *fp)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isComment</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;str)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">parse</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;content, <span class="built_in">string</span> &amp;key, <span class="built_in">string</span> &amp;value, <span class="keyword">char</span> c = <span class="string">'='</span>)</span></span>;</span><br><span class="line">    <span class="comment">//for dubug</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">map</span>&lt;<span class="built_in">string</span>, IniSection *&gt; sections_;</span><br><span class="line">    <span class="built_in">string</span> fname_;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; flags_;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<h2 id="src-inifile-cpp"><a href="#src-inifile-cpp" class="headerlink" title="../src/inifile.cpp"></a>../src/inifile.cpp</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> _INIFILE_CPP</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _INIFILE_CPP</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"inifile.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctype.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> inifile &#123;</span><br><span class="line"><span class="keyword">int</span> INI_BUF_SIZE = <span class="number">2048</span>;</span><br><span class="line"></span><br><span class="line">IniFile::IniFile() &#123;</span><br><span class="line">  flags_.push_back(<span class="string">"#"</span>);</span><br><span class="line">  flags_.push_back(<span class="string">";"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">IniFile::parse</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;content, <span class="built_in">string</span> &amp;key, <span class="built_in">string</span> &amp;value, <span class="keyword">char</span> c<span class="comment">/*= '='*/</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">int</span> len = content.length();</span><br><span class="line">  <span class="keyword">while</span> (i &lt; len &amp;&amp; content[i] != c) &#123;</span><br><span class="line">    ++i;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (i &gt;= <span class="number">0</span> &amp;&amp; i &lt; len) &#123;</span><br><span class="line">    key = <span class="built_in">string</span>(content.c_str(), i);</span><br><span class="line">    value = <span class="built_in">string</span>(content.c_str() + i + <span class="number">1</span>, len - i - <span class="number">1</span>);</span><br><span class="line">    trim(key);</span><br><span class="line">    trim(value);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">IniFile::getline</span><span class="params">(<span class="built_in">string</span> &amp;str, FILE *fp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> plen = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">int</span> buf_size = INI_BUF_SIZE * <span class="keyword">sizeof</span>(<span class="keyword">char</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">char</span> *buf = (<span class="keyword">char</span> *) <span class="built_in">malloc</span>(buf_size);</span><br><span class="line">  <span class="keyword">char</span> *pbuf = <span class="literal">NULL</span>;</span><br><span class="line">  <span class="keyword">char</span> *p = buf;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (buf == <span class="literal">NULL</span>) &#123;</span><br><span class="line">    <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"no enough memory!exit!\n"</span>);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">memset</span>(buf, <span class="number">0</span>, buf_size);</span><br><span class="line">  <span class="keyword">int</span> total_size = buf_size;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (fgets(p, buf_size, fp) != <span class="literal">NULL</span>) &#123;</span><br><span class="line">    plen = <span class="built_in">strlen</span>(p);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (plen &gt; <span class="number">0</span> &amp;&amp; p[plen - <span class="number">1</span>] != <span class="string">'\n'</span> &amp;&amp; !feof(fp)) &#123;</span><br><span class="line"></span><br><span class="line">      total_size = <span class="built_in">strlen</span>(buf) + buf_size;</span><br><span class="line">      pbuf = (<span class="keyword">char</span> *)<span class="built_in">realloc</span>(buf, total_size);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (pbuf == <span class="literal">NULL</span>) &#123;</span><br><span class="line">	<span class="built_in">free</span>(buf);</span><br><span class="line">	<span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"no enough memory!exit!\n"</span>);</span><br><span class="line">	<span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      buf = pbuf;</span><br><span class="line"></span><br><span class="line">      p = buf + <span class="built_in">strlen</span>(buf);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  str = buf;</span><br><span class="line">  <span class="built_in">free</span>(buf);</span><br><span class="line">  buf = <span class="literal">NULL</span>;</span><br><span class="line">  <span class="keyword">return</span> str.length();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">IniFile::load</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;filename)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="built_in">release</span>();</span><br><span class="line">  fname_ = filename;</span><br><span class="line">  IniSection *section = <span class="literal">NULL</span>;</span><br><span class="line">  FILE *fp = fopen(filename.c_str(), <span class="string">"r"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (fp == <span class="literal">NULL</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">string</span> <span class="built_in">line</span>;</span><br><span class="line">  <span class="built_in">string</span> comment;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//增加默认段section = new IniSection();</span></span><br><span class="line">  sections_[<span class="string">""</span>] = section;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (getline(<span class="built_in">line</span>, fp) &gt; <span class="number">0</span>) &#123;</span><br><span class="line"></span><br><span class="line">    trimright(<span class="built_in">line</span>, <span class="string">'\n'</span>);</span><br><span class="line">    trimright(<span class="built_in">line</span>, <span class="string">'\r'</span>);</span><br><span class="line">    trim(<span class="built_in">line</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!isComment(<span class="built_in">line</span>)) &#123;</span><br><span class="line">      <span class="built_in">string</span> subline;</span><br><span class="line">      <span class="built_in">string</span> tmp = <span class="built_in">line</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; flags_.<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        subline = <span class="built_in">line</span>.substr(<span class="number">0</span>, <span class="built_in">line</span>.<span class="built_in">find</span>(flags_[i]));</span><br><span class="line">        <span class="built_in">line</span> = subline;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      comment += tmp.substr(<span class="built_in">line</span>.length());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    trim(<span class="built_in">line</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">line</span>.length() &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">line</span>[<span class="number">0</span>] == <span class="string">'['</span>) &#123;</span><br><span class="line">      section = <span class="literal">NULL</span>;</span><br><span class="line">      <span class="keyword">int</span> index = <span class="built_in">line</span>.find_first_of(<span class="string">']'</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (index == <span class="number">-1</span>) &#123;</span><br><span class="line">        fclose(fp);</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"没有找到匹配的]\n"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">int</span> len = index - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (len &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"段为空\n"</span>);</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="built_in">string</span> <span class="title">s</span><span class="params">(<span class="built_in">line</span>, <span class="number">1</span>, len)</span></span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (getSection(s.c_str()) != <span class="literal">NULL</span>) &#123;</span><br><span class="line">        fclose(fp);</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"此段已存在:%s\n"</span>, s.c_str());</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      section = <span class="keyword">new</span> IniSection();</span><br><span class="line">      sections_[s] = section;</span><br><span class="line"></span><br><span class="line">      section-&gt;name = s;</span><br><span class="line">      section-&gt;comment = comment;</span><br><span class="line">      comment = <span class="string">""</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isComment(<span class="built_in">line</span>)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (comment != <span class="string">""</span>) &#123;</span><br><span class="line">        comment += delim + <span class="built_in">line</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        comment = <span class="built_in">line</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">string</span> key, value;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (parse(<span class="built_in">line</span>, key, value)) &#123;</span><br><span class="line">        IniItem item;</span><br><span class="line">        item.key = key;</span><br><span class="line">        item.value = value;</span><br><span class="line">        item.comment = comment;</span><br><span class="line"></span><br><span class="line">        section-&gt;items.push_back(item);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"解析参数失败[%s]\n"</span>, <span class="built_in">line</span>.c_str());</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      comment = <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  fclose(fp);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">IniFile::save</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> saveas(fname_); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">IniFile::saveas</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;filename)</span> </span>&#123;</span><br><span class="line">  <span class="built_in">string</span> data = <span class="string">""</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (iterator sect = sections_.<span class="built_in">begin</span>(); sect != sections_.<span class="built_in">end</span>(); ++sect) &#123;</span><br><span class="line">    <span class="keyword">if</span> (sect-&gt;second-&gt;comment != <span class="string">""</span>) &#123;</span><br><span class="line">      data += sect-&gt;second-&gt;comment;</span><br><span class="line">      data += delim;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (sect-&gt;first != <span class="string">""</span>) &#123;</span><br><span class="line">      data += <span class="built_in">string</span>(<span class="string">"["</span>) + sect-&gt;first + <span class="built_in">string</span>(<span class="string">"]"</span>);</span><br><span class="line">      data += delim;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (IniSection::iterator item = sect-&gt;second-&gt;items.<span class="built_in">begin</span>();</span><br><span class="line">         item != sect-&gt;second-&gt;items.<span class="built_in">end</span>(); ++item) &#123;</span><br><span class="line">      <span class="keyword">if</span> (item-&gt;comment != <span class="string">""</span>) &#123;</span><br><span class="line">        data += item-&gt;comment;</span><br><span class="line">        data += delim;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      data += item-&gt;key + <span class="string">"="</span> + item-&gt;value;</span><br><span class="line">      data += delim;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  FILE *fp = fopen(filename.c_str(), <span class="string">"w"</span>);</span><br><span class="line"></span><br><span class="line">  fwrite(data.c_str(), <span class="number">1</span>, data.length(), fp);</span><br><span class="line"></span><br><span class="line">  fclose(fp);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">IniSection *<span class="title">IniFile::getSection</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section <span class="comment">/*=""*/</span>)</span> </span>&#123;</span><br><span class="line">  iterator it = sections_.<span class="built_in">find</span>(section);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (it != sections_.<span class="built_in">end</span>()) &#123;</span><br><span class="line">    <span class="keyword">return</span> it-&gt;second;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">IniFile::getStringValue</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section, <span class="keyword">const</span> <span class="built_in">string</span> &amp;key,</span></span></span><br><span class="line"><span class="function"><span class="params">                               <span class="keyword">int</span> &amp;ret)</span> </span>&#123;</span><br><span class="line">  <span class="built_in">string</span> value, comment;</span><br><span class="line"></span><br><span class="line">  ret = getValue(section, key, value, comment);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">IniFile::getIntValue</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section, <span class="keyword">const</span> <span class="built_in">string</span> &amp;key, <span class="keyword">int</span> &amp;ret)</span> </span>&#123;</span><br><span class="line">  <span class="built_in">string</span> value, comment;</span><br><span class="line"></span><br><span class="line">  ret = getValue(section, key, value, comment);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> atoi(value.c_str());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">IniFile::getDoubleValue</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section, <span class="keyword">const</span> <span class="built_in">string</span> &amp;key,</span></span></span><br><span class="line"><span class="function"><span class="params">                               <span class="keyword">int</span> &amp;ret)</span> </span>&#123;</span><br><span class="line">  <span class="built_in">string</span> value, comment;</span><br><span class="line"></span><br><span class="line">  ret = getValue(section, key, value, comment);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> atof(value.c_str());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">IniFile::getValue</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section, <span class="keyword">const</span> <span class="built_in">string</span> &amp;key, <span class="built_in">string</span> &amp;value)</span> </span>&#123;</span><br><span class="line">  <span class="built_in">string</span> comment;</span><br><span class="line">  <span class="keyword">return</span> getValue(section, key, value, comment);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">IniFile::getValue</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section, <span class="keyword">const</span> <span class="built_in">string</span> &amp;key, <span class="built_in">string</span> &amp;value,</span></span></span><br><span class="line"><span class="function"><span class="params">                      <span class="built_in">string</span> &amp;comment)</span> </span>&#123;</span><br><span class="line">  IniSection *sect = getSection(section);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (sect != <span class="literal">NULL</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (IniSection::iterator it = sect-&gt;<span class="built_in">begin</span>(); it != sect-&gt;<span class="built_in">end</span>(); ++it) &#123;</span><br><span class="line">      <span class="keyword">if</span> (it-&gt;key == key) &#123;</span><br><span class="line">        value = it-&gt;value;</span><br><span class="line">        comment = it-&gt;comment;</span><br><span class="line">        <span class="keyword">return</span> RET_OK;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> RET_ERR;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">IniFile::getValues</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section, <span class="keyword">const</span> <span class="built_in">string</span> &amp;key,</span></span></span><br><span class="line"><span class="function"><span class="params">                       <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;values)</span> </span>&#123;</span><br><span class="line">  <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; comments;</span><br><span class="line">  <span class="keyword">return</span> getValues(section, key, values, comments);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">IniFile::getValues</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section, <span class="keyword">const</span> <span class="built_in">string</span> &amp;key,</span></span></span><br><span class="line"><span class="function"><span class="params">                       <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;values, <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;comments)</span> </span>&#123;</span><br><span class="line">  <span class="built_in">string</span> value, comment;</span><br><span class="line"></span><br><span class="line">  values.<span class="built_in">clear</span>();</span><br><span class="line">  comments.<span class="built_in">clear</span>();</span><br><span class="line"></span><br><span class="line">  IniSection *sect = getSection(section);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (sect != <span class="literal">NULL</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (IniSection::iterator it = sect-&gt;<span class="built_in">begin</span>(); it != sect-&gt;<span class="built_in">end</span>(); ++it) &#123;</span><br><span class="line">      <span class="keyword">if</span> (it-&gt;key == key) &#123;</span><br><span class="line">        value = it-&gt;value;</span><br><span class="line">        comment = it-&gt;comment;</span><br><span class="line"></span><br><span class="line">        values.push_back(value);</span><br><span class="line">        comments.push_back(comment);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (values.<span class="built_in">size</span>() ? RET_OK : RET_ERR);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">IniFile::hasSection</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (getSection(section) != <span class="literal">NULL</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">IniFile::hasKey</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section, <span class="keyword">const</span> <span class="built_in">string</span> &amp;key)</span> </span>&#123;</span><br><span class="line">  IniSection *sect = getSection(section);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (sect != <span class="literal">NULL</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (IniSection::iterator it = sect-&gt;<span class="built_in">begin</span>(); it != sect-&gt;<span class="built_in">end</span>(); ++it) &#123;</span><br><span class="line">      <span class="keyword">if</span> (it-&gt;key == key) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">IniFile::getSectionComment</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section, <span class="built_in">string</span> &amp;comment)</span> </span>&#123;</span><br><span class="line">  comment = <span class="string">""</span>;</span><br><span class="line">  IniSection *sect = getSection(section);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (sect != <span class="literal">NULL</span>) &#123;</span><br><span class="line">    comment = sect-&gt;comment;</span><br><span class="line">    <span class="keyword">return</span> RET_OK;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> RET_ERR;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">IniFile::setSectionComment</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section, <span class="keyword">const</span> <span class="built_in">string</span> &amp;comment)</span> </span>&#123;</span><br><span class="line">  IniSection *sect = getSection(section);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (sect != <span class="literal">NULL</span>) &#123;</span><br><span class="line">    sect-&gt;comment = comment;</span><br><span class="line">    <span class="keyword">return</span> RET_OK;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> RET_ERR;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">IniFile::setValue</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section, <span class="keyword">const</span> <span class="built_in">string</span> &amp;key,</span></span></span><br><span class="line"><span class="function"><span class="params">                      <span class="keyword">const</span> <span class="built_in">string</span> &amp;value, <span class="keyword">const</span> <span class="built_in">string</span> &amp;comment <span class="comment">/*=""*/</span>)</span> </span>&#123;</span><br><span class="line">  IniSection *sect = getSection(section);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">string</span> comt = comment;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (comt != <span class="string">""</span>) &#123;</span><br><span class="line">    comt = flags_[<span class="number">0</span>] + comt;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (sect == <span class="literal">NULL</span>) &#123;</span><br><span class="line">    sect = <span class="keyword">new</span> IniSection();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (sect == <span class="literal">NULL</span>) &#123;</span><br><span class="line">      <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"no enough memory!\n"</span>);</span><br><span class="line">      <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    sect-&gt;name = section;</span><br><span class="line">    sections_[section] = sect;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (IniSection::iterator it = sect-&gt;<span class="built_in">begin</span>(); it != sect-&gt;<span class="built_in">end</span>(); ++it) &#123;</span><br><span class="line">    <span class="keyword">if</span> (it-&gt;key == key) &#123;</span><br><span class="line">      it-&gt;value = value;</span><br><span class="line">      it-&gt;comment = comt;</span><br><span class="line">      <span class="keyword">return</span> RET_OK;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// not found key</span></span><br><span class="line">  IniItem item;</span><br><span class="line">  item.key = key;</span><br><span class="line">  item.value = value;</span><br><span class="line">  item.comment = comt;</span><br><span class="line"></span><br><span class="line">  sect-&gt;items.push_back(item);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> RET_OK;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">IniFile::getCommentFlags</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;flags)</span> </span>&#123; flags = flags_; &#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">IniFile::setCommentFlags</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;flags)</span> </span>&#123; flags_ = flags; &#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">IniFile::deleteSection</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section)</span> </span>&#123;</span><br><span class="line">  IniSection *sect = getSection(section);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (sect != <span class="literal">NULL</span>) &#123;</span><br><span class="line"></span><br><span class="line">    sections_.erase(section);</span><br><span class="line">    <span class="keyword">delete</span> sect;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">IniFile::deleteKey</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;section, <span class="keyword">const</span> <span class="built_in">string</span> &amp;key)</span> </span>&#123;</span><br><span class="line">  IniSection *sect = getSection(section);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (sect != <span class="literal">NULL</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (IniSection::iterator it = sect-&gt;<span class="built_in">begin</span>(); it != sect-&gt;<span class="built_in">end</span>(); ++it) &#123;</span><br><span class="line">      <span class="keyword">if</span> (it-&gt;key == key) &#123;</span><br><span class="line">        sect-&gt;items.erase(it);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">IniFile::release</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  fname_ = <span class="string">""</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (iterator i = sections_.<span class="built_in">begin</span>(); i != sections_.<span class="built_in">end</span>(); ++i) &#123;</span><br><span class="line">    <span class="keyword">delete</span> i-&gt;second;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  sections_.<span class="built_in">clear</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">IniFile::isComment</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;str)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">bool</span> ret = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; flags_.<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">    <span class="keyword">size_t</span> k = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (str.length() &lt; flags_[i].length()) &#123;</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (k = <span class="number">0</span>; k &lt; flags_[i].length(); ++k) &#123;</span><br><span class="line">      <span class="keyword">if</span> (str[k] != flags_[i][k]) &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (k == flags_[i].length()) &#123;</span><br><span class="line">      ret = <span class="literal">true</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// for debug</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">IniFile::print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"filename:[%s]\n"</span>, fname_.c_str());</span><br><span class="line"></span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"flags_:["</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; flags_.<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">" %s "</span>, flags_[i].c_str());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"]\n"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (iterator it = sections_.<span class="built_in">begin</span>(); it != sections_.<span class="built_in">end</span>(); ++it) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"section:[%s]\n"</span>, it-&gt;first.c_str());</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"comment:[%s]\n"</span>, it-&gt;second-&gt;comment.c_str());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (IniSection::iterator i = it-&gt;second-&gt;items.<span class="built_in">begin</span>();</span><br><span class="line">         i != it-&gt;second-&gt;items.<span class="built_in">end</span>(); ++i) &#123;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">"    comment:%s\n"</span>, i-&gt;comment.c_str());</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">"    parm   :%s=%s\n"</span>, i-&gt;key.c_str(), i-&gt;value.c_str());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">IniFile::trimleft</span><span class="params">(<span class="built_in">string</span> &amp;str, <span class="keyword">char</span> c <span class="comment">/*=' '*/</span>)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// trim head</span></span><br><span class="line">  <span class="keyword">int</span> len = str.length();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (str[i] == c &amp;&amp; str[i] != <span class="string">'\0'</span>) &#123;</span><br><span class="line">    i++;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (i != <span class="number">0</span>) &#123;</span><br><span class="line">    str = <span class="built_in">string</span>(str, i, len - i);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">IniFile::trimright</span><span class="params">(<span class="built_in">string</span> &amp;str, <span class="keyword">char</span> c <span class="comment">/*=' '*/</span>)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// trim tail</span></span><br><span class="line">  <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">int</span> len = str.length();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (i = len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">    <span class="keyword">if</span> (str[i] != c) &#123;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  str = <span class="built_in">string</span>(str, <span class="number">0</span>, i + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">IniFile::trim</span><span class="params">(<span class="built_in">string</span> &amp;str)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// trim head</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> len = str.length();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (<span class="built_in">isspace</span>(str[i]) &amp;&amp; str[i] != <span class="string">'\0'</span>) &#123;</span><br><span class="line">    i++;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (i != <span class="number">0</span>) &#123;</span><br><span class="line">    str = <span class="built_in">string</span>(str, i, len - i);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// trim tail</span></span><br><span class="line">  len = str.length();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (i = len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">isspace</span>(str[i])) &#123;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  str = <span class="built_in">string</span>(str, <span class="number">0</span>, i + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="comment">// namespace inifile</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<h1 id="程序运行结果"><a href="#程序运行结果" class="headerlink" title="程序运行结果"></a>程序运行结果</h1><p><img src="/images/20190711/iniTest.PNG" alt="iniTest"></p>
]]></content>
      <categories>
        <category>工科生的基本功</category>
        <category>快乐码农</category>
      </categories>
      <tags>
        <tag>Library</tag>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux下QT环境的配置</title>
    <url>/archives/24574.html</url>
    <content><![CDATA[<blockquote>
<p>开发环境：Ubuntu16.04 LTS、 QT Creator 5.8。 </p>
</blockquote>
<a id="more"></a>

<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>QT Creator是一款可以用来编写界面的IDE，而QT则是库。本文旨在说明QT Creator 5.8的安装方法，以及用cmake来编译创建的QT工程。用cmake的原因是，当开发的<br>程序是包含了大量的第三方库时，QT自带的qmake并不实用，还是跨平台编译工具cmake好用。</p>
<h1 id="QT-Creator-5-8-及其他库的安装"><a href="#QT-Creator-5-8-及其他库的安装" class="headerlink" title="QT Creator 5.8 及其他库的安装"></a>QT Creator 5.8 及其他库的安装</h1><h2 id="下载安装包"><a href="#下载安装包" class="headerlink" title="下载安装包"></a>下载安装包</h2><p>不知道为啥QT官方的安装过程整的很麻烦，需要用户注册，嗯，注册完还不能直接下载，各(zhen)种(ma)绕(fan)。下载QT的安装包可以从<span class="exturl" data-url="aHR0cDovL2Rvd25sb2FkLnF0LmlvLw==" title="http://download.qt.io/">QT镜像下载<i class="fa fa-external-link"></i></span>。下面直接给出下载过程，关于整个下载页面的说明，请参考<span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODA5MDQyNy9hcnRpY2xlL2RldGFpbHMvODM4Mjc2Nzg=" title="https://blog.csdn.net/weixin_38090427/article/details/83827678">Qt Creator的下载和安装<i class="fa fa-external-link"></i></span>。</p>
<p>打开网页后，依次点击<code>archive/</code> -&gt; <code>qt/</code> -&gt; <code>5.8/</code> -&gt; <code>qt-opensource-linux-x64-5.8.0.run</code>，下载安装包。</p>
<h2 id="安装过程"><a href="#安装过程" class="headerlink" title="安装过程"></a>安装过程</h2><p>在Terminal中，打开安装包存放路径，执行下列语句进行安装。</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">chmod +x qt-opensource-linux-x64<span class="number">-5.8</span><span class="number">.0</span>.<span class="built_in">run</span></span><br><span class="line">./qt-opensource-linux-x64<span class="number">-5.8</span><span class="number">.0</span>.<span class="built_in">run</span></span><br></pre></td></tr></table></figure>

<p>执行完上述语句后，会弹出QT Creator的安装界面，如下图。<br><img src="/images/20190716QT/01.png" alt="01.png"></p>
<p>点击Next，在下面的输入登录信息点击Skip即可。<br><img src="/images/20190716QT/02.png" alt="02.png"></p>
<p>继续点击Next。<br><img src="/images/20190716QT/03.png" alt="03.png"></p>
<p>在下面的页面中，选择自己要安装的位置，再点Next。<br><img src="/images/20190716QT/04.png" alt="04.png"></p>
<p>在下面的页面中，默认是不安装<code>Sources</code>的，由于笔者第一次使用，不明白这里不安装会有什么问题，故而选择了安装。<br><img src="/images/20190716QT/05.png" alt="05.png"></p>
<p>同意协议。<br><img src="/images/20190716QT/06.png" alt="06.png"></p>
<p>在下面的页面中，点击Install，开始安装，等待安装完成即可。<br><img src="/images/20190716QT/07.png" alt="07.png"></p>
<h2 id="其他库的安装"><a href="#其他库的安装" class="headerlink" title="其他库的安装"></a>其他库的安装</h2><p>以上过程只是安装了QT Creator 5.8，为了能正常使用，还需要安装一些其他的库，依次执行下列语句即可。</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> install g++</span><br><span class="line">sudo apt-<span class="built_in">get</span> install libx11-dev libxext-dev libxtst-dev</span><br><span class="line">sudo apt-<span class="built_in">get</span> install libgl1-mesa-dev</span><br><span class="line">sudo apt-<span class="built_in">get</span> install build-essential</span><br><span class="line">sudo apt-<span class="built_in">get</span> install libqt4-dev</span><br><span class="line">sudo apt-<span class="built_in">get</span> install git build-essential cmake qt5-<span class="keyword">default</span> qtscript5-dev libssl-dev qttools5-dev qttools5-dev-tools qtmultimedia5-dev libqt5svg5-dev libqt5webkit5-dev libsdl2-dev libasound2 libxmu-dev libxi-dev freeglut3-dev libasound2-dev libjack-jackd2-dev libxrandr-dev libqt5xmlpatterns5-dev libqt5xmlpatterns5 libqt5xmlpatterns5-<span class="keyword">private</span>-dev</span><br></pre></td></tr></table></figure>

<p>说明：上述的命令是通过参考一些帖子得来的，前5条命令笔者并不知道是否为必须，最后一条命令是必须要安装的。事实上，最后一条是包含了前面部分的库的。</p>
<h1 id="HelloWorld案例介绍"><a href="#HelloWorld案例介绍" class="headerlink" title="HelloWorld案例介绍"></a>HelloWorld案例介绍</h1><p>本节介绍使用QT来创建一个例子HelloWorld，首先使用QT Creator来编写程序，弹出如下的页面，再介绍添加cmake来实现同样的功能。<br><img src="/images/20190716QT/08.png" alt="08.png"></p>
<h2 id="QT-Creator的创建过程"><a href="#QT-Creator的创建过程" class="headerlink" title="QT Creator的创建过程"></a>QT Creator的创建过程</h2><h3 id="工程的创建"><a href="#工程的创建" class="headerlink" title="工程的创建"></a>工程的创建</h3><p>打开QT Creator，创建一个新的工程，选择相应的存放路径。如下图所示。<br><img src="/images/20190716QT/09.png" alt="09.png"><br><img src="/images/20190716QT/10.png" alt="10.png"><br><img src="/images/20190716QT/11.png" alt="11.png"></p>
<p>选择默认的Kits。<br><img src="/images/20190716QT/12.png" alt="12.png"></p>
<p>在<code>Class Information</code>中的<code>Base Class</code>中选择<code>QWidget</code>，如下图所示。<br><img src="/images/20190716QT/13.png" alt="13.png"></p>
<p>点击<code>Finish</code>完成工程创建。<br><img src="/images/20190716QT/14.png" alt="14.png"></p>
<p>创建完工程后，QT Creator中的目录如下：<br><img src="/images/20190716QT/15.png" alt="15.png"></p>
<h3 id="程序的编写"><a href="#程序的编写" class="headerlink" title="程序的编写"></a>程序的编写</h3><p>在上图中，<code>widget.ui</code>是整个的显示页面程序，<code>widget.cpp</code>是页面程序中的处理方法，<code>main.cpp</code>包含了主函数。</p>
<p>双击<code>widget.ui</code>，打开如下界面，找到<code>Display Widgets</code>下的<code>Label</code>，用鼠标左键按住拖动至右面的框中，将显示文本修改为“Hello QT and CMAKE!”。</p>
<p>双击<code>widget.cpp</code>，修改程序如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"widget.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ui_widget.h"</span></span></span><br><span class="line"></span><br><span class="line">Widget::Widget(QWidget *parent) :</span><br><span class="line">    QWidget(parent),</span><br><span class="line">    ui(<span class="keyword">new</span> Ui::Widget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;setupUi(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//窗体标题</span></span><br><span class="line">    <span class="keyword">this</span>-&gt;setWindowTitle(<span class="string">"Qt5.1 窗体应用"</span>);</span><br><span class="line">    <span class="comment">//窗体 ICO 图片,如图不起别名,后缀直接写图片全名。</span></span><br><span class="line">    <span class="keyword">this</span>-&gt;setWindowIcon(QIcon(<span class="string">":/new/prefix1/ico.png"</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget::~Widget()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>点击上图中左下角的第一个绿色三角，即可运行程序。至此，使用QT Creator创建了第一个界面程序。</p>
<h3 id="使用cmake对程序进行编译"><a href="#使用cmake对程序进行编译" class="headerlink" title="使用cmake对程序进行编译"></a>使用cmake对程序进行编译</h3><p>在HelloWorld工程中右键，添加新文件，选择<code>General</code> -&gt; <code>Empty File</code>，命名为<code>CMakeLists.txt</code>，如图所示。<br><img src="/images/20190716QT/16.png" alt="16.png"></p>
<p>并在<code>CMakeLists.txt</code>中添加如下内容：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">cmake_minimum_required(VERSION <span class="number">2.8</span><span class="number">.11</span> FATAL_ERROR)</span><br><span class="line">project(QtHelloWorld)</span><br><span class="line"><span class="built_in">set</span>(CMAKE_INCLUDE_CURRENT_DIR ON)</span><br><span class="line"><span class="built_in">set</span>(CMAKE_AUTOMOC ON)</span><br><span class="line"><span class="built_in">set</span>(CMAKE_AUTOUIC ON)</span><br><span class="line"><span class="built_in">set</span>(CMAKE_AUTORCC ON)</span><br><span class="line"></span><br><span class="line">find_package(Qt5 REQUIRED Widgets)</span><br><span class="line"> qt5_wrap_cpp( MOC widget.h)</span><br><span class="line">qt5_wrap_ui( UIC widget.ui)</span><br><span class="line">add_executable(QtHelloWorld main.cpp widget.cpp widget.h widget.ui $&#123;RESOURCE_DIR&#125;)</span><br><span class="line">target_link_libraries(QtHelloWorld Qt5::Widgets)</span><br></pre></td></tr></table></figure>

<p>接下来尝试使用cmake对工程进行编译。</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">cd 工程所在目录</span><br><span class="line"><span class="built_in">mkdir</span> build</span><br><span class="line">cd build</span><br><span class="line">make -j2</span><br><span class="line">./QtHelloWorld</span><br></pre></td></tr></table></figure>

<h1 id="程序运行结果"><a href="#程序运行结果" class="headerlink" title="程序运行结果"></a>程序运行结果</h1><p><img src="/images/20190716QT/08.png" alt="08.png"></p>
<p>至此，完成了通过QT Creator创建工程并通过IDE直接运行或者使用cmake来编译运行工程的示例。</p>
]]></content>
      <categories>
        <category>工科生的基本功</category>
        <category>快乐码农</category>
      </categories>
      <tags>
        <tag>Library</tag>
        <tag>C++</tag>
        <tag>QT</tag>
      </tags>
  </entry>
  <entry>
    <title>Win10下完美安装MathType的方法</title>
    <url>/archives/56794.html</url>
    <content><![CDATA[<blockquote>
<p>由于某些软件破解后再联网会导致激活失败，因此需要将该软件禁止联网。</p>
</blockquote>
<a id="more"></a>

<p>MathType6.9安装方法：</p>
<p>下载地址：</p>
<p><span class="exturl" data-url="aHR0cDovL3d3dy5tYXRodHlwZS5jbi94aWF6YWkuaHRtbA==" title="http://www.mathtype.cn/xiazai.html">MathType 6.9b 简体中文版官方下载<i class="fa fa-external-link"></i></span></p>
<p>这个安装后无法使用输入注册码的方法进行激活，需要在试用期到期后删除注册表以延长试用期，方法如下：</p>
<p>1.按<code>Win+R</code>键，打开运行；</p>
<p>2.输入regedit，打开注册表；</p>
<p>3.依次找到 <code>HKEY_CURRENT_USER</code> -&gt; <code>Software</code> -&gt; <code>Install Options</code>，右侧显示<code>Options6.9</code>，将其删除。如下图所示。<br><img src="/images/20190621/DeleteMathTypeRegedit.PNG" alt="DeleteMathTypeRegedit"></p>
<p>4.重新打开MathType。</p>
<p>MathType7.4主要参考以下内容：</p>
<blockquote>
<p>7.4的方法已经不再实用，注册码在2019-6-30到期了，而一旦到期就无法再次使用</p>
</blockquote>
<p><span class="exturl" data-url="aHR0cDovL3d3dy5pdHhpYW96aG9uZy5jb20vMTk2My5odG1s" title="http://www.itxiaozhong.com/1963.html">数学公式编辑器 MathType 7.4.2.480 for Windows<i class="fa fa-external-link"></i></span>(重点看蓝色字部分)<br><img src="/images/20190621/InstallMathType.PNG" alt="InstallMathType"></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9qaW5neWFuLmJhaWR1LmNvbS9hcnRpY2xlL2RjYTFmYTZmMWE3NWFhZjFhNDQwNTJmMS5odG1s" title="https://jingyan.baidu.com/article/dca1fa6f1a75aaf1a44052f1.html">win10系统怎么禁用某个程序联网，阻止软件联网<i class="fa fa-external-link"></i></span></p>
<p>软件安装包已保存至网盘，相关链接和操作方法已在微信中收藏(标签为MathType7.4的安装方法)</p>
]]></content>
      <categories>
        <category>工科生的基本功</category>
        <category>软件技术</category>
      </categories>
      <tags>
        <tag>Library</tag>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title>Win10下安装Linux双系统的方法</title>
    <url>/archives/22360.html</url>
    <content><![CDATA[<blockquote>
<p>由于工作，往往不仅需要Windows系统，而且需要Linux系统，装虚拟机对内存是个很大的考验，因此选择装双系统。</p>
</blockquote>
<a id="more"></a>

<h1 id="系统安装的主要流程"><a href="#系统安装的主要流程" class="headerlink" title="系统安装的主要流程"></a>系统安装的主要流程</h1><p>笔者目前已win10为主要操作系统，Ubuntu为第二操作系统，且由于win10安装简便，因此本文介绍的是基于win10的双系统安装方法，主要流程为：</p>
<ol>
<li>安装win10；</li>
<li>安装Ubuntu16.04。</li>
</ol>
<h1 id="win10安装方法"><a href="#win10安装方法" class="headerlink" title="win10安装方法"></a>win10安装方法</h1><p>关于Windows的安装方法，已经非常熟悉了，这里只做个说明，详细的可参考最后一部分列出的网站。Win10安装的主要方法有两种：</p>
<p>1.U盘安装。使用U盘安装需要区分电脑的BIOS是UEFI类型还是Legacy类型，如果是Legacy类型（适用于古老的电脑，例如笔者2013年买的笔记本），需要用软碟通或者大白菜之类的做U盘启动的系统盘；如果是UEFI类型的，截止现在（2019年），能买到的新机器都是UEFI类型的，这种的不需要用软件来将U盘做成系统盘，只需将系统镜像文件（.iso）拷贝到U盘中并解压。然后在开机时，选择U盘boot，开始装机。</p>
<blockquote>
<p>注意：关于UEFI类型的，笔者没有实际装过win10，因为Ubuntu16.04是这么干的，所以猜测win10也可以。</p>
</blockquote>
<p>2.电脑硬盘直接安装。将系统镜像.iso文件拷贝到非安装分区并解压，然后开始装机。</p>
<h1 id="Ubuntu的安装方法"><a href="#Ubuntu的安装方法" class="headerlink" title="Ubuntu的安装方法"></a>Ubuntu的安装方法</h1><p>关于Ubuntu的安装方法其实和win10差不太多，这里只强调两点：</p>
<ol>
<li><p>对于新手，在分区的时候，不需要选择那么多分区，只需选择swap分区和/分区。swap分区选择主分区，大小为内存大小；/分区选逻辑分区，剩余大小全分配给它即可。</p>
</li>
<li><p>对于挂载位置的选择(整个页面最最最下面的下拉菜单)，直接默认选择在整个硬盘上即可，就是后面会标注你硬盘大小的那个选项。</p>
</li>
</ol>
<p>其他操作着重参考<br><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3JvbWFuZGlvbi9hcnRpY2xlL2RldGFpbHMvNzkwMzE1MTk/dXRtX3NvdXJjZT1hcHA=" title="https://blog.csdn.net/romandion/article/details/79031519?utm_source=app">UEFI模式安装Win10和Linux双系统<i class="fa fa-external-link"></i></span>。</p>
<h1 id="主要参考"><a href="#主要参考" class="headerlink" title="主要参考"></a>主要参考</h1><ol>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3JvbWFuZGlvbi9hcnRpY2xlL2RldGFpbHMvNzkwMzE1MTk/dXRtX3NvdXJjZT1hcHA=" title="https://blog.csdn.net/romandion/article/details/79031519?utm_source=app">UEFI模式安装Win10和Linux双系统<i class="fa fa-external-link"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI4OTE5OTkxL2FydGljbGUvZGV0YWlscy84Mzk4OTk1OD91dG1fc291cmNlPWFwcA==" title="https://blog.csdn.net/qq_28919991/article/details/83989958?utm_source=app">笔记本实现Win10+Ubuntu双系统(超详细)<i class="fa fa-external-link"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC8wMGRkZjQzYTRmMTY=" title="https://www.jianshu.com/p/00ddf43a4f16">win10安装ubuntu16.04双系统<i class="fa fa-external-link"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU4NTU4My9hcnRpY2xlL2RldGFpbHMvOTA3MDQ0NTI=" title="https://blog.csdn.net/weixin_44585583/article/details/90704452">win10下Ubuntu 双系统安装<i class="fa fa-external-link"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC80YmUyOTc2MjIyN2Y=" title="https://www.jianshu.com/p/4be29762227f">window10和ubuntu16.04双系统装好后无法打开win10解决办法<i class="fa fa-external-link"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTA0NzI1OTYvYXJ0aWNsZS9kZXRhaWxzLzg1MTAwNDc0" title="https://blog.csdn.net/u010472596/article/details/85100474">ubuntu16.04下无法打开win10的处理过程<i class="fa fa-external-link"></i></span></p>
</li>
</ol>
]]></content>
      <categories>
        <category>工科生的基本功</category>
        <category>软件技术</category>
      </categories>
      <tags>
        <tag>Library</tag>
        <tag>Linux</tag>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux环境下Emacs的配置方法</title>
    <url>/archives/20916.html</url>
    <content><![CDATA[<blockquote>
<p>为提升自己的开发速度，因此需要熟练掌握一种编辑器，Emacs就是备受推崇的一种优秀编辑器。本文主要针对对Emacs了解较少的初学者，所使用系统环境是Ubuntu16.04。<br>本文主要参考了<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2xpbndlaXlhbmcvZW1hY3Muc3RhcnRlcg==" title="https://github.com/linweiyang/emacs.starter">Emacs初学者配置文件<i class="fa fa-external-link"></i></span>，但是该文最后所描述的rtags安装有些问题，这是由于其所需的clang版本和rtags版本不匹配造成的。</p>
</blockquote>
<a id="more"></a>

<h1 id="Emacs简介"><a href="#Emacs简介" class="headerlink" title="Emacs简介"></a>Emacs简介</h1><p>Emacs是一款优秀的编辑器。</p>
<h1 id="Emacs的安装"><a href="#Emacs的安装" class="headerlink" title="Emacs的安装"></a>Emacs的安装</h1><p>1.cmake的安装：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">sudo apt install cmake          <span class="comment">//安装cmake是因为后面需要用它来编译</span></span><br></pre></td></tr></table></figure>

<p>2.对于Ubuntu LTS 14.04或以上，安装指令如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">sudo add-apt-repository ppa:kelleyk/emacs</span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install emacs26		<span class="comment">//获取高版本的emacs</span></span><br></pre></td></tr></table></figure>

<p>3.Emacs初学者配置：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;linweiyang&#x2F;emacs.starter   	</span><br><span class="line">cd emacs.starter</span><br><span class="line">.&#x2F;install.sh</span><br></pre></td></tr></table></figure>

<blockquote>
<p>至此，Emacs已经安装完毕。</p>
</blockquote>
<h1 id="个性化配置"><a href="#个性化配置" class="headerlink" title="个性化配置"></a>个性化配置</h1><blockquote>
<p>由于自己常用的是C++编程，因此进行以下适合程序员的一些配置。</p>
</blockquote>
<h2 id="一、安装Google-Docs的C-语法检查工具"><a href="#一、安装Google-Docs的C-语法检查工具" class="headerlink" title="一、安装Google Docs的C++语法检查工具"></a>一、安装Google Docs的C++语法检查工具</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> install python-pip</span><br><span class="line">sudo pip install cpplint</span><br></pre></td></tr></table></figure>

<h2 id="二、安装Zeal工具"><a href="#二、安装Zeal工具" class="headerlink" title="二、安装Zeal工具"></a>二、安装Zeal工具</h2><p>安装Zeal工具并下载语言函数手册库：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> install zeal</span><br></pre></td></tr></table></figure>

<p>使用方法：快捷键为<code>Ctrl+c D</code></p>
<h2 id="三、rtags工具的安装"><a href="#三、rtags工具的安装" class="headerlink" title="三、rtags工具的安装"></a>三、rtags工具的安装</h2><p>rtags能使开发者在emacs中快速查找变量的声明和定义，是开发的利器！安装rtags要求clang的版本与其相匹配。截止笔者写稿之前，用LLVM/Clang的6.0版本可以与其相配。安装方法如下(首先新打开一个终端)：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo apt-get install llvm-6.0-dev clang-6.0 libclang-6.0-dev openssl</span><br><span class="line">git clone --recursive https:&#x2F;&#x2F;github.com&#x2F;Andersbakken&#x2F;rtags.git</span><br><span class="line">cd rtags</span><br><span class="line">mkdir build</span><br><span class="line">cd build</span><br><span class="line">source ~&#x2F;.bashrc </span><br><span class="line">cmake ..</span><br><span class="line">make -j2</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>

<p>其中<code>make -j2</code>是采用双核编译。</p>
<p>这里，需要注意的是，如果以上过程无法安装rtags，应该是clang版本与rtags版本不匹配造成的，可用如下方法来查看：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">clang --version</span><br><span class="line">sudo apt-<span class="built_in">get</span> <span class="built_in">remove</span> clang* llvm*   <span class="comment">//移除旧版本</span></span><br><span class="line">sudo apt-<span class="built_in">get</span> update</span><br><span class="line">sudo apt-<span class="built_in">get</span> install llvm<span class="number">-6.0</span>-dev clang<span class="number">-6.0</span> libclang<span class="number">-6.0</span>-dev openssl	<span class="comment">//安装新版本</span></span><br></pre></td></tr></table></figure>

<p>rtags的使用方法：快捷键为<code>Crtl+c r</code>，等待两三秒后，右侧将显示所有的快捷键，这里只给出前三个：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">Ctrl+c r ,   <span class="comment">//当前变量参考</span></span><br><span class="line">Ctrl+c r .   <span class="comment">//当前变量定义</span></span><br><span class="line">Ctrl+c r /   <span class="comment">//当前变量所有参考</span></span><br></pre></td></tr></table></figure>

<h2 id="四、CapsLock与Ctrl键的交换"><a href="#四、CapsLock与Ctrl键的交换" class="headerlink" title="四、CapsLock与Ctrl键的交换"></a>四、CapsLock与Ctrl键的交换</h2><p>由于Emacs严重依赖于快捷键组合，或者说严重依赖于<code>Ctrl</code>键，因此为了方便操作，需要将<code>CapsLock</code>与<code>Ctrl</code>两个按键进行交换。方法如下：</p>
<p>1.新打开一个终端，输入</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">emacs .xmodmap		<span class="comment">//用emacs打开xmodmap文件，如没有，将创建</span></span><br></pre></td></tr></table></figure>

<p>2.在.xmodmap中输入</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">remove</span> Lock = Caps_Lock</span><br><span class="line"><span class="built_in">remove</span> Control = Control_L</span><br><span class="line">keysym Control_L = Caps_Lock</span><br><span class="line">keysym Caps_Lock = Control_L</span><br><span class="line">add Lock = Caps_Lock</span><br><span class="line">add Control = Control_L</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Emacs中粘贴的快捷键是<code>Ctrl+Y</code>。</p>
</blockquote>
<p>3.在终端中执行：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">xmodmap .xmodmap</span><br></pre></td></tr></table></figure>

<blockquote>
<p>至此，完成了Emacs环境的配置，但是对于Emacs的快捷键，还需要花很多时间去摸索和学习。</p>
</blockquote>
]]></content>
      <categories>
        <category>工科生的基本功</category>
        <category>快乐码农</category>
      </categories>
      <tags>
        <tag>Library</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>C++中vector的用法</title>
    <url>/archives/20080.html</url>
    <content><![CDATA[<blockquote>
<p>由于项目需要，发现自己对C++中vector的用法不是很清楚，因此写一篇博文来介绍vector的基础用法。</p>
</blockquote>
<a id="more"></a>

<h1 id="vector简介"><a href="#vector简介" class="headerlink" title="vector简介"></a>vector简介</h1><p>vector是表现为可变长数组的序列容器。vector使用连续的存储位置来存储元素，也就是说，vector可以使用一个指针上的偏移量来访问其元素，就像数组一样。但与数组不同的是，它们的大小可以动态变化，其存储由容器自动处理。 因此，vector相比于数组，vector消耗更多的内存，以换取管理存储和动态增长的能力。 </p>
<p>与其它的动态序列容器(deque, lists, forward_lists)相比，vector可以非常高效的访问其元素，就像数组一样，并且可以相对高效的增加和删除元素从其末尾。对于在其它位置插入或删除元素的操作，它的性能要比其它的要差，而且其迭代器和引用的一致性相比lists和forward_lists要差。</p>
<h1 id="vector的基本操作"><a href="#vector的基本操作" class="headerlink" title="vector的基本操作"></a>vector的基本操作</h1><p>1.头文件的调用：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>2.创建一个名为vec的vector对象：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vec;	<span class="comment">//以下的示例如无特殊声明，均以vec作为示例</span></span><br></pre></td></tr></table></figure>

<p>3.向量大小：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">vec.<span class="built_in">size</span>();</span><br></pre></td></tr></table></figure>

<p>4.向量清空：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">vec.<span class="built_in">clear</span>();</span><br></pre></td></tr></table></figure>

<p>5.尾部插入数字：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">vec.push_back(a);</span><br></pre></td></tr></table></figure>

<p>6.使用下标访问元素：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cout</span> &lt;&lt; vec[<span class="number">0</span>] &lt;&lt; <span class="built_in">endl</span>;		<span class="comment">//索引号从0开始</span></span><br></pre></td></tr></table></figure>

<p>7.插入元素：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">vec.insert( vec.<span class="built_in">begin</span>() + i, a );		<span class="comment">//在第i个元素后面插入a</span></span><br></pre></td></tr></table></figure>

<p>8.删除单个元素：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">vec.erase(vec.<span class="built_in">begin</span>()+<span class="number">2</span>);		<span class="comment">//删除第3个元素</span></span><br></pre></td></tr></table></figure>

<p>9.删除区间元素：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">vec.erase(vec.<span class="built_in">begin</span>()+i,vec.<span class="built_in">end</span>()+j);		<span class="comment">//删除区间[i,j-1];区间从0开始</span></span><br></pre></td></tr></table></figure>

<p>10.使用迭代器访问元素：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;span style=<span class="string">"font-size:18px;"</span>&gt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;::iterator it;</span><br><span class="line"><span class="keyword">for</span>(it=vec.<span class="built_in">begin</span>();it!=vec.<span class="built_in">end</span>();it++)</span><br><span class="line">    cout&lt;&lt;*it&lt;&lt;endl;&lt;/span&gt;</span><br></pre></td></tr></table></figure>

<h1 id="Eigen库的安装"><a href="#Eigen库的安装" class="headerlink" title="Eigen库的安装"></a>Eigen库的安装</h1><p>由于C++对矩阵的运算支持不是很好，而Eigen库则是一个简便的用于矩阵运算的库，因此需要安装它。在Ubuntu中安装该库的指令如下：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">sudo apt-<span class="keyword">get</span> install libeigen3-dev</span><br></pre></td></tr></table></figure>

<p>安装完成后，该库的路径为<code>/usr/include/eigen3</code>,使用时注意调用该路径。</p>
<h1 id="vector的元素为自定义类型"><a href="#vector的元素为自定义类型" class="headerlink" title="vector的元素为自定义类型"></a>vector的元素为自定义类型</h1><p>由于项目需要，需要自己定义一个类型作为vector的元素。该段代码的目的是保存两组六轴机器人速度于一个vector中，Ubuntu环境下的<code>main.cpp</code>代码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Eigen/Core&gt;					// Eigen库</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Eigen/Dense&gt;					// 稠密矩阵的代数运算</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> Eigen;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Vector6d Matrix<span class="meta-string">&lt;double,6,1&gt;		// Eigen中所有向量和矩阵都是Eigen::Matrix，它是一个模板类，前三个参数为：数据类型，行，列</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Vector6d robotJointVel1;							<span class="comment">// 声明第1组六轴机器人关节速度</span></span><br><span class="line">	Vector6d robotJointVel2;							<span class="comment">// 声明第2组六轴机器人关节速度</span></span><br><span class="line">	<span class="built_in">vector</span>&lt;Vector6d&gt; vel;								<span class="comment">// 声明一个vector用来存放两组速度</span></span><br><span class="line">	robotJointVel1 &lt;&lt; <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.04</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>;	            <span class="comment">// 定义第一组速度</span></span><br><span class="line">	robotJointVel2 &lt;&lt; <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>;  		        <span class="comment">// 定义第2组速度</span></span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Size of vel: "</span> &lt;&lt; vel.<span class="built_in">size</span>() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Add the 1st data in the end of the vector..."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	vel.push_back(robotJointVel1);</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"robotJointVel1: "</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; vel[<span class="number">0</span>] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Size of vel: "</span> &lt;&lt; vel.<span class="built_in">size</span>() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Add the 2nd data in the end of the vector..."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	vel.push_back(robotJointVel2);</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"robotJointVel1: "</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; vel[<span class="number">1</span>] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Size of vel: "</span> &lt;&lt; vel.<span class="built_in">size</span>() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>CMakeLists.txt</code>代码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">cmake_minimum_required(VERSION <span class="number">3.1</span><span class="number">.0</span>)</span><br><span class="line"></span><br><span class="line">project(VectorTest)</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span>(SRC_LIST main.cpp $&#123;SRC_FILES&#125;)</span><br><span class="line"></span><br><span class="line">include_directories(<span class="string">"/usr/include/eigen3"</span>)			# 调用eigen3库</span><br><span class="line"></span><br><span class="line">add_executable(VectorTest main.cpp $&#123;SRC_LIST&#125;)</span><br></pre></td></tr></table></figure>

<p>程序运行结果如下：<br><img src="/images/20190609/VectorTest.png" alt="VectorTest"></p>
<blockquote>
<p>本文主要介绍vector的基础用法，关于Eigen库将在以后介绍，本文的参考如下：<br><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L21zZG53b2xhaWxlL2FydGljbGUvZGV0YWlscy81MjcwODE0NA==" title="https://blog.csdn.net/msdnwolaile/article/details/52708144">C++ vector用法（详解！！函数，实现）<i class="fa fa-external-link"></i></span><br><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1Nub3dfTWUvYXJ0aWNsZS9kZXRhaWxzLzc3MTUwOTk4" title="https://blog.csdn.net/Snow_Me/article/details/77150998">vector详解<i class="fa fa-external-link"></i></span></p>
</blockquote>
]]></content>
      <categories>
        <category>工科生的基本功</category>
        <category>快乐码农</category>
      </categories>
      <tags>
        <tag>Library</tag>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>GitHub写博客的教程</title>
    <url>/archives/4685.html</url>
    <content><![CDATA[<a id="more"></a>

<h1 id="图文描述"><a href="#图文描述" class="headerlink" title="图文描述"></a>图文描述</h1><h2 id="新建博文"><a href="#新建博文" class="headerlink" title="新建博文"></a>新建博文</h2><p>1.打开GitHub官网，已有账户选择”Sign In”，如果还未注册选择”Sign Up”注册新账户。<br><img src="/images/20190521/01.jpg" alt="01"></p>
<p>2.登录GitHub账户。<br><img src="/images/20190521/02.jpg" alt="02"></p>
<p>3.选择要操作的仓库，这里是”ColaInLibrary/colainlibrary.github.com.io”。<br><img src="/images/20190521/03.jpg" alt="03"></p>
<p>4.打开仓库，其中文件夹<code>_posts</code>用来存放编写好的博文。<br><img src="/images/20190521/04.jpg" alt="04"></p>
<p>5.从浏览器的新标签页中随便先打开一个博文<code>XX.md</code>，这时浏览器应该有两个标签页。<br><img src="/images/20190521/05.jpg" alt="05"></p>
<p>6.打开该博文页面如下，主要目的是为了复制名字(第1处)和内容抬头(第2处)。<br><img src="/images/20190521/06.jpg" alt="06"></p>
<p>7.返回第一个标签页的文件夹<code>_posts</code>目录中，点击”Create new file”。<br><img src="/images/20190521/07.jpg" alt="07"></p>
<p>8.将第6步中的第1处和第2处的内容依次复制到该新博文中，并依据需要修改，注意博文名字格式必须为<code>xxxx-xx-xx-xxx.md</code>。<br><img src="/images/20190521/08.jpg" alt="08"></p>
<p>9.适当编辑内容，滚动浏览器页面至下方，点击”Commit new file”，提交新建的博文。<br><img src="/images/20190521/09.jpg" alt="09"></p>
<h2 id="修改博文"><a href="#修改博文" class="headerlink" title="修改博文"></a>修改博文</h2><p>1.打开文件夹<code>_posts</code>，找到要修改的博文，并点击蓝色的博文名称（注意不要点击后面的黑色字体，黑色字体打开后看到的是修改记录）。<br><img src="/images/20190521/10.jpg" alt="10"></p>
<p>2.点击右上角的铅笔图标，使博客进入可编辑状态。<br><img src="/images/20190521/11.jpg" alt="11"></p>
<p>3.依据需要对博客进行修改，完成后滚动浏览器页面至底部，点击绿色的”Commit changes”按钮，保存提交。等待几秒后，回博客查看修改结果。</p>
<h1 id="视频教程"><a href="#视频教程" class="headerlink" title="视频教程"></a>视频教程</h1><p>在GitHub上编写博客的过程如下：</p>
<p><img src="/images/20190521/GitHub%E7%BC%96%E5%86%99%E5%8D%9A%E5%AE%A2%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B.wmv" alt="video"></p>
<p>如视频不能播放，请在<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0NvbGFJbkxpYnJhcnkvQ29sYUluTGlicmFyeS5naXRodWIuY29tL3RyZWUvbWFzdGVyL2ltYWdlcy8yMDE5MDUyMQ==" title="https://github.com/ColaInLibrary/ColaInLibrary.github.com/tree/master/images/20190521">网站<i class="fa fa-external-link"></i></span>中自行下载<code>GitHub编写博客视频教程.wmv</code>观看。</p>
]]></content>
      <categories>
        <category>工科生的基本功</category>
        <category>GitHub</category>
      </categories>
      <tags>
        <tag>GitHub</tag>
        <tag>Library</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux编程环境的配置</title>
    <url>/archives/45747.html</url>
    <content><![CDATA[<blockquote>
<p>本文主要介绍在Linux下实现C++的开发环境搭建，此前应当已经装好Linux系统，笔者所用系统是Ubuntu 16.04。</p>
</blockquote>
<a id="more"></a>

<h1 id="开发流程简介"><a href="#开发流程简介" class="headerlink" title="开发流程简介"></a>开发流程简介</h1><p>在Linux环境下实现C++的开发，主要是在Terminal中通过命令行来实现。在这里以“Hello World”为例进行说明。(该代码可以从根目录下<code>code</code>文件中找到)。</p>
<p>1.建立文件夹，用来存放整个工程文件。例如在<code>Docuements</code>目录下新建文件夹<code>HelloWorld</code>；</p>
<p>2.在<code>HelloWorld</code>中新建文件<code>main.cpp</code>；</p>
<p>3.<code>main.cpp</code>中编写代码：</p>
 <figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i;</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Hello World!"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"i = "</span> &lt;&lt; i &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.在<code>HelloWorld</code>中新建文件<code>CMakeLists.txt</code>，并在其中编写以下内容：</p>
 <figure class="highlight"><table><tr><td class="code"><pre><span class="line">cmake_minimum_required(VERSION 3.1.0)         #设置版本号</span><br><span class="line">Project(Hello)                                #设置工程名为 Hello</span><br><span class="line">set(SRC_LIST main.cpp $&#123;SRC_FILES&#125;)           #设定源文件集，将main.cpp添加到工程</span><br><span class="line">add_executable(Hello main.cpp $&#123;SRC_LIST&#125;)    #添加可执行程序文件</span><br></pre></td></tr></table></figure>

<p>5.用Terminal执行下列语句，打开当前目录(<code>#</code>后为注释)：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">cd Documents</span><br><span class="line">cd HelloWorld  #打开当前目录，也可以在想要打开的目录下右击鼠标，选择`Open in Terminal`</span><br></pre></td></tr></table></figure>

<p>6.执行下列语句进行编译：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">mkdir build  #创建编译文件夹</span><br><span class="line">cd build     #打开编译文件夹</span><br><span class="line">cmake ..     #寻找CMakeLists，..表示返回上一目录</span><br><span class="line">make         #编译</span><br></pre></td></tr></table></figure>

<p>7.编译成功后，运行可执行程序文件：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">./Hello</span><br></pre></td></tr></table></figure>

<p>8.在Terminal中查看显示结果。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">Hello World!</span><br><span class="line">i = <span class="number">0</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>本文旨在介绍Ubuntu中C++的开发流程，其中CMakeLists.txt的编写决定了开发者能否完成大型工程项目的编程开发，在以后的博文中再逐渐给出介绍。</p>
</blockquote>
]]></content>
      <categories>
        <category>工科生的基本功</category>
        <category>快乐码农</category>
      </categories>
      <tags>
        <tag>Library</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>VMware的联网、外设、复制粘贴问题</title>
    <url>/archives/50695.html</url>
    <content><![CDATA[<blockquote>
<p>Edit this file in Safari for iPad. Unfortunately, it doesn’t support Chinese input.本文中的环境为Ubuntu16.04LTS + VMware10.</p>
</blockquote>
<a id="more"></a>

<h1 id="Connecting-Internet"><a href="#Connecting-Internet" class="headerlink" title="Connecting Internet"></a>Connecting Internet</h1><p>Click “virtual machine” tag –&gt; settings –&gt; Ethernet –&gt; Choose the first choice(Bridge…) in “Network connection”</p>
<p>click “Edit” tag –&gt; “Virtual Network adapter” –&gt; “VMnet0” –&gt; choose “Bridged(…)” and select your computer’s wireless card –&gt; OK</p>
<p>中文版：</p>
<p>1.在VMware的标签栏中，依次点击：虚拟机 –&gt; 设置 –&gt; 网络 –&gt; 桥接，如下图所示：</p>
<p><img src="/images/20190520/VMnet1.png" alt="VMnet1"></p>
<p>2.在VMware的标签栏中，依次点击：编辑 –&gt; 虚拟网络适配器 –&gt; VMnet0 –&gt; 桥接模式 –&gt; 桥接到笔记本电脑的网卡，如下图所示：</p>
<p><img src="/images/20190520/VMnet2.png" alt="VMnet2"></p>
<blockquote>
<p>参考链接：<span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RlbW9uc29uL2FydGljbGUvZGV0YWlscy83OTI3NjYyMQ==" title="https://blog.csdn.net/demonson/article/details/79276621">VMware Workstation虚拟机不能联网的解决办法<i class="fa fa-external-link"></i></span><br>参考链接：<span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3poeXVsby9hcnRpY2xlL2RldGFpbHMvNzg3MzAwMDk=" title="https://blog.csdn.net/zhyulo/article/details/78730009">VMware虚拟机不能联网的解决办法<i class="fa fa-external-link"></i></span></p>
</blockquote>
<h1 id="Connecting-USB"><a href="#Connecting-USB" class="headerlink" title="Connecting USB"></a>Connecting USB</h1><p>In win10: right click “This PC” –&gt; Management –&gt; Service –&gt; Find “VMware USB…” –&gt; right click “Manual Operation” –&gt; “Launch”.</p>
<p>In VMware: click “Virtual Machine” tag –&gt; Mobile Device –&gt; choose your USB device.</p>
<p>中文版：</p>
<p>1.在win10桌面，依次点击：计算机 –&gt; 管理 –&gt; 服务 –&gt; VMware USB，右键点击启动，如下图所示：</p>
<p><img src="/images/20190520/VMUSB.png" alt="VMUSB"></p>
<p>2.在VMware的标签栏中，依次点击：虚拟机 –&gt; 可移动设备 –&gt; 选择自己的USB设备。</p>
<h1 id="复制粘贴问题"><a href="#复制粘贴问题" class="headerlink" title="复制粘贴问题"></a>复制粘贴问题</h1><p>在虚拟机中装好Ubuntu后，会出现无法将Win10中的文件或文字复制到Ubuntu中的情况，需要在Ubuntu中进行设置才可以。</p>
<p>1.打开虚拟机，运行系统后，在VMware中点击”虚拟机” –&gt; “安装VMware Tools”，往往会出现下图所示的错误：</p>
<p><img src="/images/20190520/VMerror.png" alt="VMerror"></p>
<p>上图所示的错误并不代表我们无法安装，只是需要一些操作步骤，如下所示；</p>
<p>2.点击：虚拟机 –&gt; 设置，将VMware安装目录中的linux.iso文件添加到DVD驱动器中，添加完毕后会在侧边栏出现DVD图标，如下图所示：</p>
<p><img src="/images/20190520/VMTools.png" alt="VMTools"></p>
<p>3.打开侧边栏会出现一个DVD的图标，打开，找到一个”xx.tar”的压缩包；</p>
<p><img src="/images/20190520/VMToolsPackage.png" alt="VMToolsPackage"></p>
<p>4.将该压缩包解压到期望目录下；</p>
<p>5.从期望目录中打开解压后的文件夹，并在解压后的文件夹中右键打开终端，运行</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">sudo ./vmware-install.pl</span><br></pre></td></tr></table></figure>

<p>6.在终端中一路回车，直至安装完成，重新启动虚拟机，即可。</p>
<p>PS:如果经过上述的操作还是没办法实现的话，可以尝试在Ubuntu的Terminal中输入以下命令：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">sudo apt-<span class="keyword">get</span> autoremove open-vm-tools</span><br><span class="line">sudo apt-<span class="keyword">get</span> install open-vm-tools</span><br><span class="line">sudo apt-<span class="keyword">get</span> install open-vm-tools-desktop</span><br></pre></td></tr></table></figure>

<p>执行完上述指令后，关机，再重新以管理员身份启动VMware，即可。</p>
]]></content>
      <categories>
        <category>工科生的基本功</category>
        <category>软件技术</category>
      </categories>
      <tags>
        <tag>Library</tag>
        <tag>VMware</tag>
      </tags>
  </entry>
  <entry>
    <title>笔记本电脑选型</title>
    <url>/archives/36616.html</url>
    <content><![CDATA[<blockquote>
<p>笔记本电脑总是看个不停，又记不下来，还是有个文件来“收纳”吧。</p>
</blockquote>
<a id="more"></a>

<p>华为笔记本系列：（处理器没有后缀均表示低压版CPU）</p>
<p>| 型号 | Matebook X Pro        | Matebook X | Matebook 14                | Matebook 13 | Matebook D |<br>| — | — | — | — | — |<br>| CPU | i5-8265 / i7-8 / i7-8 | i5-7 / i7-7 | i5-8/i5-8/i7-8             | i5-8 / i7-8 | i7<br>| 显卡 | MX250,2G             | HD620       | UHD620 / 2GMX250 / 2GMX250  | MX150,2G   | MX150,2G   |<br>| 内存 | 8G / 8G / 16G        | 8G/8G       | 8G/8G/8G                   | 8G/8G       | 16G<br>| 硬盘 | 512G / 512G / 1T     | 256G / 512G   | 512G / 512G / 512G       | 512G / 512  | 256G<br>| 屏幕 | 3k,13.9寸            | 2k,13寸     | 2k,14寸                     | 2k,13寸     |2k，15.6  |<br>| 重量 | 1.33kg               | 1.05kg      | 1.53kg                     | 1.3kg       | 1.9kg       |<br>| 售价 | 8999 / 9999 / 13999  | 7188/8688   | 5699 / 5999 / 6999         | 5699 /6399  | 6488  |</p>
<p>其他：（处理器没有后缀均表示低压版CPU）</p>
<p>| 型号 | Dell燃7000    | 小新Air    | 雷蛇灵刃潜行版13   | DELL XPS13  | Surface PRO 6 |<br>| — | — | — | — | — |<br>| CPU | i7-8          | i7-8        | i7-8             |  i7-8       | i7<br>| 显卡 | UHD620       | 2G，MX150   | UHD620           | UHD620      | UHD620      |<br>| 内存 | 16G          | 16G         | 16G              |  16G        | 16G<br>| 硬盘 | 512G / 1T    | 256G/512G   | 512G             | 512G         | 512G<br>| 屏幕 | 1080p,13.3寸 | 1080p,13.3寸| 1080p,13.3寸      | 1080p,13.3寸 |2k，12.3     |<br>| 重量 | 1.33kg       | 1.25kg      | 1.3kg             | 1.2kg       | 0.8kg(无键盘)       |<br>| 售价 | 7399 / 8799  | 5699/6599   | 9999              | 9998        | 13878(含键盘等外加1000左右)|</p>
]]></content>
      <categories>
        <category>茶余裨谈</category>
      </categories>
      <tags>
        <tag>Library</tag>
        <tag>茶余裨谈</tag>
      </tags>
  </entry>
  <entry>
    <title>远程仓库与本地仓库的同步</title>
    <url>/archives/58743.html</url>
    <content><![CDATA[<blockquote>
<p>本文说明如何将远程仓库同步到本地，以及本地仓库添加文件后如何上传至远程仓库。</p>
</blockquote>
<a id="more"></a>

<p>根据前面几篇博文的介绍，一般来讲我们在远程(即浏览器端)操作GitHub上建立的仓库即可。<br>但是，在远程仓库中添加和删除文件很不方便。因此，需要通过一些指令来将远程仓库更新至<br>本地仓库(即电脑硬盘中存储的仓库)，添加文件后再将本地仓库上传至远程仓库。</p>
<h3 id="远程仓库的同步"><a href="#远程仓库的同步" class="headerlink" title="远程仓库的同步"></a>远程仓库的同步</h3><p>如果本地还没有该仓库，则需要从远程仓库clone到本地。Windows10系统用<code>windows+X</code>快捷键按出一个菜单栏并选择<code>Windows PowerShell(管理员)</code>，<br>打开首先将当前路径修改至期望存放该仓库的路径，然后使用<code>git clone</code>命令将其克隆至本地。具体命令如下：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> e:       <span class="comment">#打开E盘，准备在根目录下存放该仓库</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/ColaInLibrary/colainlibrary.github.com     <span class="comment">#将仓库的URL地址添加在命令后即可同步至本地</span></span><br><span class="line"><span class="built_in">cd</span> colainlibrary.github.com       <span class="comment">#打开同步后的本地仓库</span></span><br></pre></td></tr></table></figure>

<p>三条指令执行完后便从PowerShell中打开了本地仓库。如果在执行<code>git clone</code>时失败，那应该是<code>git</code>没有安装的原因，<br>那么需要下载<span class="exturl" data-url="aHR0cHM6Ly9naXRmb3J3aW5kb3dzLm9yZy8=" title="https://gitforwindows.org/">Git for Windows<i class="fa fa-external-link"></i></span>.安装后可以在文件浏览器中打开本地文件夹<code>colainlibrary.github.com</code>，<br>再点右键，选择<code>Git Bash Here</code>，则可以直接使用<code>git</code>命令，而不需要像 PowerShell一样先打开到本地文件路径。</p>
<p>如果是已经创建好的本地仓库，从命令行中打开本地仓库后，执行以下命令来将远程仓库同步至本地。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git pull</span><br></pre></td></tr></table></figure>

<h3 id="Git中登录GitHub账号"><a href="#Git中登录GitHub账号" class="headerlink" title="Git中登录GitHub账号"></a>Git中登录GitHub账号</h3><p>为了实现本地仓库同步至远程仓库，往往需要在Git中登录自己的账号，相应的命令为：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git config --global user.email <span class="string">"1901151471@qq.com"</span>    <span class="comment">#登录邮箱</span></span><br><span class="line">git config --global user.name <span class="string">"ColaInLibrary"</span>         <span class="comment">#登录用户名</span></span><br></pre></td></tr></table></figure>

<h3 id="本地仓库同步至远程"><a href="#本地仓库同步至远程" class="headerlink" title="本地仓库同步至远程"></a>本地仓库同步至远程</h3><p>当在本地仓库中添加图片(或者其他文件)至路径<code>E:\colainlibrary.github.com\assests\images</code>后，需要将本地仓库使用如下指令更新至远程仓库。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git status    <span class="comment">#查看当前状态</span></span><br><span class="line">git add *     <span class="comment">#将所有文件添加至缓冲区，也可以使用 git add \assests\images\文件名.jpg添加单个文件</span></span><br><span class="line">git commit -m <span class="string">"image update"</span>     <span class="comment">#引号中是在说本次更新内容</span></span><br><span class="line">git push      <span class="comment">#将在缓冲区的文件push到远程仓库</span></span><br></pre></td></tr></table></figure>

<h3 id="远程仓库文件的删除"><a href="#远程仓库文件的删除" class="headerlink" title="远程仓库文件的删除"></a>远程仓库文件的删除</h3><p>在远程仓库中删除文件十分不便，因此可以先将远程仓库同步至本地仓库再将其删除。以删除远程仓库中的文件夹<code>target</code>为例，首先打开本地仓库的文件夹，然后执行下列命令：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git pull    <span class="comment">#远程仓库同步</span></span><br><span class="line">git rm -r --cached target     <span class="comment">#删除target文件夹</span></span><br><span class="line">git commit -m <span class="string">"删除target文件夹"</span>     <span class="comment">#引号中是说明本次更新内容</span></span><br><span class="line">git push      <span class="comment">#将本次更新push到远程仓库</span></span><br></pre></td></tr></table></figure>

<p>值得一提的是，经过以上操作，远程仓库中的文件夹<code>target</code>被删除掉了，本地仓库中的不会被删掉。</p>
]]></content>
      <categories>
        <category>工科生的基本功</category>
        <category>GitHub</category>
      </categories>
      <tags>
        <tag>GitHub</tag>
        <tag>Library</tag>
      </tags>
  </entry>
  <entry>
    <title>MATLAB函数———newrb</title>
    <url>/archives/48200.html</url>
    <content><![CDATA[<blockquote>
<p>MATLAB函数学习篇之newrb函数。</p>
</blockquote>
<a id="more"></a>

<h2 id="newrb函数介绍"><a href="#newrb函数介绍" class="headerlink" title="newrb函数介绍"></a>newrb函数介绍</h2><p><code>newrb</code>是MATLAB中用于建立径向基函数神经网络(radial basis function network，RBF network)的函数，函数的两种调用格式如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">net &#x3D; newrb</span><br><span class="line">[net,tr] &#x3D; newrb(P,T,goal,spread,MN,DF)</span><br></pre></td></tr></table></figure>

<p>径向基网可用于近似函数。 newrb函数将神经元添加到径向基网络的隐藏层，直到它满足指定的均方误差目标。</p>
<p>第一种函数调用方式<code>net = newrb</code>用于创建一个新的网络，matlab给出各种参数，不实用。</p>
<p>常用的是第二种调用方式<code>[net,tr] = newrb(P,T,goal,spread,MN,DF)</code>，其中的参数含义如下：</p>
<ul>
<li>P – $R \times Q$维矩阵，Q维输入向量</li>
<li>T – $S \times Q$维矩阵，Q维目标类向量</li>
<li>goal – 均方误差目标(MSE),默认为0</li>
<li>spread – 径向基函数(RBF)速度，默认为1</li>
<li>MN – 最大神经元数，默认为Q</li>
<li>DF – 在显示之间添加的神经元数量，默认为25</li>
<li>返回值为径向基网络。</li>
</ul>
<p>速度(spread)越大，函数逼近越平滑。 速度太大意味着需要很多神经元才能适应快速变化的功能。<br>太小的速度意味着需要许多神经元来适应平滑的功能，并且网络可能不会很好地概括。<br>使用不同的速度调用newrb以找到给定问题的最佳值。</p>
<h2 id="示例程序"><a href="#示例程序" class="headerlink" title="示例程序"></a>示例程序</h2><p>MATLAB给出的<span class="exturl" data-url="aHR0cHM6Ly93dzIubWF0aHdvcmtzLmNuL2hlbHAvZGVlcGxlYXJuaW5nL2V4YW1wbGVzL3JhZGlhbC1iYXNpcy1hcHByb3hpbWF0aW9uLmh0bWw/c2VhcmNoSGlnaGxpZ2h0PW5ld3JiJnNfdGlkPWRvY19zcmNodGl0bGU=" title="https://ww2.mathworks.cn/help/deeplearning/examples/radial-basis-approximation.html?searchHighlight=newrb&s_tid=doc_srchtitle">官方示例程序<i class="fa fa-external-link"></i></span>或者在MATLAB命令窗口输入以下命令。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">openExample(&#39;nnet&#x2F;demorb1&#39;)</span><br></pre></td></tr></table></figure>

<p>另外从YouTube上搜<code>newrb</code>找到的一个例程如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">clear;</span><br><span class="line">clc;</span><br><span class="line">close all;</span><br><span class="line">x &#x3D; linspace(0,4*pi,3000);</span><br><span class="line">y &#x3D; (sin(x) + cos(x) + tanh(x)) + rand(1,3000);</span><br><span class="line">net &#x3D; newrb(x,y,0.1,1,100,10);</span><br><span class="line">view(net);</span><br><span class="line">result &#x3D; sim(net,x);</span><br><span class="line">scatter(x,y);</span><br><span class="line">hold on;</span><br><span class="line">plot(x,result,&#39;LineWidth&#39;,2,&#39;MarkerSize&#39;,10);</span><br><span class="line">R &#x3D; regression(y,result)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>工科生的基本功</category>
        <category>快乐码农</category>
      </categories>
      <tags>
        <tag>Library</tag>
        <tag>MATLAB</tag>
      </tags>
  </entry>
  <entry>
    <title>标题插入超链接</title>
    <url>/archives/37327.html</url>
    <content><![CDATA[<p>This is a link post. Clicking on the link should open <span class="exturl" data-url="aHR0cDovL3d3dy5nb29nbGUuY29tLw==" title="http://www.google.com/">Google<i class="fa fa-external-link"></i></span> in a new tab or window.</p>
]]></content>
      <categories>
        <category>工科生的基本功</category>
        <category>GitHub</category>
      </categories>
      <tags>
        <tag>GitHub</tag>
      </tags>
  </entry>
  <entry>
    <title>主页显示部分内容</title>
    <url>/archives/5651.html</url>
    <content><![CDATA[<p>The following contents should be invisible in home/archive page.</p>
<a id="more"></a>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce eget urna vitae velit eleifend interdum at ac nisi. In nec ligula lacus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Sed eu cursus erat, ut dapibus quam. Aliquam eleifend dolor vitae libero pharetra adipiscing. Etiam adipiscing dolor a quam tempor, eu convallis nulla varius. Aliquam sollicitudin risus a porta aliquam. Ut nec velit dolor. Proin eget leo lobortis, aliquam est sed, mollis mauris. Fusce vitae leo pretium massa accumsan condimentum. Fusce malesuada gravida lectus vel vulputate. Donec bibendum porta nibh ut aliquam.</p>
<p>Sed lorem felis, congue non fringilla eu, aliquam eu eros. Curabitur orci libero, mollis sed semper vitae, adipiscing in lectus. Aenean non egestas odio. Donec sollicitudin nisi quis lorem gravida, in pharetra mauris fringilla. Duis sit amet faucibus dolor, id aliquam neque. In egestas, odio gravida tempor dictum, mauris felis faucibus purus, sit amet commodo lacus diam vitae est. Ut ut quam eget massa semper sodales. Aenean non ipsum cursus, blandit lectus in, ornare odio. Curabitur ultrices porttitor vulputate.</p>
]]></content>
      <categories>
        <category>工科生的基本功</category>
        <category>GitHub</category>
      </categories>
      <tags>
        <tag>GitHub</tag>
      </tags>
  </entry>
  <entry>
    <title>题头插入照片</title>
    <url>/archives/62583.html</url>
    <content><![CDATA[<p>Nunc dignissim volutpat enim, non sollicitudin purus dignissim id. Nam sit amet urna eu velit lacinia eleifend. Proin auctor rhoncus ligula nec aliquet. Donec sodales molestie lacinia. Curabitur dictum faucibus urna at convallis. Aliquam in lectus at urna rutrum porta. In lacus arcu, molestie ut vestibulum ut, rhoncus sed eros. Sed et elit vitae risus pretium consectetur vel in mi. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi tempus turpis quis lectus rhoncus adipiscing. Proin pulvinar placerat suscipit. Maecenas imperdiet, quam vitae varius auctor, enim mauris vulputate sapien, nec laoreet neque diam non quam.</p>
<a id="more"></a>

<p><img src="http://ww1.sinaimg.cn/large/81b78497jw1emfgts2pt4j21hc0u0k1c.jpg" alt="Wallbase - dgnfly (wallbase.cc/wallpaper/1384450)"></p>
<p>Etiam luctus mauris at mi sollicitudin quis malesuada nibh porttitor. Vestibulum non dapibus magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Proin feugiat hendrerit viverra. Phasellus sit amet nunc mauris, eu ultricies tellus. Sed a mi tortor, eleifend varius erat. Proin consectetur molestie tortor eu gravida. Cras placerat orci id arcu tristique ut rutrum justo pulvinar. Maecenas lacinia fringilla diam non bibendum. Aenean vel viverra turpis. Integer ut leo nisi. Pellentesque vehicula quam ut sapien convallis consequat. Aliquam ut arcu purus, eget tempor purus. Integer eu tellus quis erat tristique gravida eu vel lorem.</p>
<p>PS: 本来是在页面最上方的分类于标签中添加了如下语句：<br>photos:</p>
<ul>
<li><span class="exturl" data-url="aHR0cDovL3d3MS5zaW5haW1nLmNuL213NjkwLzgxYjc4NDk3ancxZW1mZ3drYXN6bmoyMWhjMHUwcWI3LmpwZw==" title="http://ww1.sinaimg.cn/mw690/81b78497jw1emfgwkasznj21hc0u0qb7.jpg">http://ww1.sinaimg.cn/mw690/81b78497jw1emfgwkasznj21hc0u0qb7.jpg<i class="fa fa-external-link"></i></span></li>
<li><span class="exturl" data-url="aHR0cDovL3d3My5zaW5haW1nLmNuL213NjkwLzgxYjc4NDk3ancxZW1mZ3dqcmgycGoyMWhjMHUwMWczLmpwZw==" title="http://ww3.sinaimg.cn/mw690/81b78497jw1emfgwjrh2pj21hc0u01g3.jpg">http://ww3.sinaimg.cn/mw690/81b78497jw1emfgwjrh2pj21hc0u01g3.jpg<i class="fa fa-external-link"></i></span></li>
<li><span class="exturl" data-url="aHR0cDovL3d3Mi5zaW5haW1nLmNuL213NjkwLzgxYjc4NDk3ancxZW1mZ3dpbDV4a2oyMWhjMHUwdHBtLmpwZw==" title="http://ww2.sinaimg.cn/mw690/81b78497jw1emfgwil5xkj21hc0u0tpm.jpg">http://ww2.sinaimg.cn/mw690/81b78497jw1emfgwil5xkj21hc0u0tpm.jpg<i class="fa fa-external-link"></i></span></li>
<li><span class="exturl" data-url="aHR0cDovL3d3My5zaW5haW1nLmNuL213NjkwLzgxYjc4NDk3ancxZW1mZ3ZjZG4yNWoyMWhjMHUwcXBhLmpwZw==" title="http://ww3.sinaimg.cn/mw690/81b78497jw1emfgvcdn25j21hc0u0qpa.jpg">http://ww3.sinaimg.cn/mw690/81b78497jw1emfgvcdn25j21hc0u0qpa.jpg<i class="fa fa-external-link"></i></span></li>
</ul>
]]></content>
      <categories>
        <category>工科生的基本功</category>
        <category>GitHub</category>
      </categories>
      <tags>
        <tag>GitHub</tag>
      </tags>
  </entry>
  <entry>
    <title>代码块的编写</title>
    <url>/archives/23603.html</url>
    <content><![CDATA[<p>This post is used for testing tag plugins. See <span class="exturl" data-url="aHR0cDovL3plc3BpYS50dy9oZXhvL2RvY3MvdGFnLXBsdWdpbnMuaHRtbA==" title="http://zespia.tw/hexo/docs/tag-plugins.html">docs<i class="fa fa-external-link"></i></span> for more info.</p>
<h2 id="Block-Quote"><a href="#Block-Quote" class="headerlink" title="Block Quote"></a>Block Quote</h2><h3 id="Normal-blockquote"><a href="#Normal-blockquote" class="headerlink" title="Normal blockquote"></a>Normal blockquote</h3><blockquote>
<p>Praesent diam elit, interdum ut pulvinar placerat, imperdiet at magna.</p>
</blockquote>
<h2 id="Code-Block"><a href="#Code-Block" class="headerlink" title="Code Block"></a>Code Block</h2><h3 id="Inline-code-block"><a href="#Inline-code-block" class="headerlink" title="Inline code block"></a>Inline code block</h3><p>This is a inline code block: <code>python</code>, <code>print &#39;helloworld&#39;</code>.</p>
<h3 id="Normal-code-block"><a href="#Normal-code-block" class="headerlink" title="Normal code block"></a>Normal code block</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alert(&#39;Hello World!&#39;);</span><br></pre></td></tr></table></figure>

<pre><code>print &quot;Hello world&quot;</code></pre><h3 id="Highlight-code-block"><a href="#Highlight-code-block" class="headerlink" title="Highlight code block"></a>Highlight code block</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">print</span> <span class="string">"Hello world"</span></span><br></pre></td></tr></table></figure>

<h3 id="Gist"><a href="#Gist" class="headerlink" title="Gist"></a>Gist</h3><script src="//gist.github.com/996818.js"></script>

]]></content>
      <categories>
        <category>工科生的基本功</category>
        <category>GitHub</category>
      </categories>
      <tags>
        <tag>GitHub</tag>
      </tags>
  </entry>
  <entry>
    <title>个人网站的创建及NexT模板的使用</title>
    <url>/archives/7130.html</url>
    <content><![CDATA[<blockquote>
<p>这是由Cola &amp; Library打造的第一篇技术博客，旨在说明个人网站的建立过程及模板的使用方法。</p>
</blockquote>
<a id="more"></a>

<h2 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h2><p>如果你能看到这篇博客，那么你最起码应该掌握：</p>
<ol>
<li>了解GitHub为何物？</li>
<li>使用GitHub建立个人网站的优势在哪？</li>
<li>有一个属于自己的GitHub账户。</li>
</ol>
<p>使用GitHub建立个人网站，主要有两种途经：一种是本地创建；另一种是直接在浏览器上进行操作。</p>
<p>第一种方法的麻烦之处在于，需要配置各种环境，包括ruby、jekyll或hexos、bundle等。这对于一无所知的小白，或者是不习惯使用命令行编程的新手来说无疑是一个很高的门槛。<br>虽然网上已经有各种各样的教程，但是由于大家所使用版本、操作系统的不同，出现的问题各不一样，对新手村的学徒来说这无疑会耗费大量的时间和精力，而且经过搜索亦不一定<br>能保证找到解决方案，会对初学者造成一种浓浓的挫败感。</p>
<p>相比而言，第二种方案对于新手则要简洁明了，不用考虑过多的环境配置，采用一个模板，直接在网站上进行修改，这个方案的门槛在于需要寻找一个自己喜欢的模板，并且学会如何修<br>改（当然这是在第一种方案中经过环境配置后也需要面对的困难）。</p>
<h3 id="从本地创建"><a href="#从本地创建" class="headerlink" title="从本地创建"></a>从本地创建</h3><p>这里给出Library同学在学习本地创建时，看到的比较有用的一些网站，具体的过程不再详述。</p>
<ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTIxNjgwMzgvYXJ0aWNsZS9kZXRhaWxzLzc3NzE1NDM5" title="https://blog.csdn.net/u012168038/article/details/77715439">手把手教你在Github上建立自己的个人博客网站<i class="fa fa-external-link"></i></span><br>（该网站简要介绍了简历个人网站所需要的内容，并给出了HelloGitHub示例）</li>
<li><span class="exturl" data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC84OGUzNDc0Y2VmNzI=" title="https://www.jianshu.com/p/88e3474cef72">在windows下安装jekyll<i class="fa fa-external-link"></i></span></li>
<li><span class="exturl" data-url="aHR0cDovL3d3dy5ydWFueWlmZW5nLmNvbS9ibG9nLzIwMTIvMDgvYmxvZ2dpbmdfd2l0aF9qZWt5bGwuaHRtbA==" title="http://www.ruanyifeng.com/blog/2012/08/blogging_with_jekyll.html">搭建一个免费的，无限流量的Blog—-github Pages和Jekyll入门<i class="fa fa-external-link"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC81ODIyOTI5OQ==" title="https://zhuanlan.zhihu.com/p/58229299">GitHub Pages 建立个人网站详细教程<i class="fa fa-external-link"></i></span></li>
</ul>
<h3 id="从浏览器创建"><a href="#从浏览器创建" class="headerlink" title="从浏览器创建"></a>从浏览器创建</h3><p>上节中给出的示例均需在本地建立仓库，再上传，环境配置流程繁琐，操作过程不友好，好吧…其实就是Library同学最终有一步“bundle exec jekyll server”不知为何总是过不了，<br>因此偷懒放弃了。However，明明有简单的，为啥要避简就繁呢？</p>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cudG9ydG9yc2UuY29tL2FyY2hpdmVzLzk3OA==" title="https://www.tortorse.com/archives/978">低成本打造个人独立博客<i class="fa fa-external-link"></i></span>清晰地介绍了从网页直接建立个人网站的方法，本网站亦是参照此方法建立的。本网站使用的模板为<br><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1NpbXBsZXl5dC9qZWt5bGwtdGhlbWUtbmV4dA==" title="https://github.com/Simpleyyt/jekyll-theme-next">jekyll-theme-next<i class="fa fa-external-link"></i></span>，模板的使用方法见<span class="exturl" data-url="aHR0cDovL3RoZW1lLW5leHQuc2ltcGxleXl0LmNvbS9nZXR0aW5nLXN0YXJ0ZWQuaHRtbA==" title="http://theme-next.simpleyyt.com/getting-started.html">开始使用NexT<i class="fa fa-external-link"></i></span>。</p>
<h2 id="模板的使用方法"><a href="#模板的使用方法" class="headerlink" title="模板的使用方法"></a>模板的使用方法</h2><p>按照上一节的步骤，相信已经在自己的仓库中建立好了NexT模板，接下来主要谈谈如何使用该模板，包括模板格式的修改、写博客时的一些格式问题。毕竟，满屏的英文看着还是有点头大<br>（口享！Cola现在已经去看复联4了！）</p>
<h3 id="文件的修改"><a href="#文件的修改" class="headerlink" title="文件的修改"></a>文件的修改</h3><p>使用GitHub建立的个人网站，一个很重要的配置文件是<code>_config.yml</code>，从浏览器的仓库名中打开该文件，点右上角的铅笔符号，即可进入编辑，将开始的title、author、description进行修改，即可得到属于自己的个人网站。对于博文的书写，只要打开<code>_posts</code>文件夹，点击<code>Create New File</code>，然后将新的文件命名为<code>xxxx-xx-xx-文件名.md</code>，即可对文件进行编辑，最后在页面最下方点击<code>Commit Changes</code>，即可完成博文发布。稍等片刻，就会看到自己的博文被更新在了网页上。</p>
<p>在<span class="exturl" data-url="aHR0cDovL3RoZW1lLW5leHQuc2ltcGxleXl0LmNvbS90aGVtZS1zZXR0aW5ncy5odG1s" title="http://theme-next.simpleyyt.com/theme-settings.html">NexT主题配置<i class="fa fa-external-link"></i></span>中给出了如何添加标签、添加分类、设置字体等其他操作。对于标签、分类的添加，其实只需要在<code>xx.md</code><br>文件开始的两条<code>---</code>中直接修改即可，该分类或标签如果没有将自动新建。</p>
<h3 id="文章的格式"><a href="#文章的格式" class="headerlink" title="文章的格式"></a>文章的格式</h3><p>在前面的部分，已经给出了一级标题、二级标题、段落、超链接、数字/非数字表示小部分的格式示例。接下来介绍一些其他常用的格式。</p>
<h4 id="文字的格式"><a href="#文字的格式" class="headerlink" title="文字的格式"></a>文字的格式</h4><ul>
<li>文字超链接： <a href="">test link</a> </li>
<li>加粗加黑： <strong>Strong text</strong> </li>
<li>下划线：<u>Underline text</u> non elit nisl</li>
<li>文中横线： <del>Deleted text</del> tristique</li>
<li>字下加灰色背景框：<code>Sed erat diam</code></li>
<li>文字上标：我是<sup>上标</sup>。</li>
<li>文字下标：你是<sub>下标</sub>。</li>
<li>文字斜体：他是<cite>斜体</cite>。</li>
<li>专有名词：<acronym title="National Basketball Association">NBA</acronym></li>
<li>下划双虚线：<abbr title="Avenue">AVE</abbr></li>
<li>juzhong： <blockquote class="blockquote-center">blah blah blah</blockquote></li>
<li>特殊格式的文本：</li>
</ul>
<blockquote>
<p>另起一行的特殊格式。</p>
</blockquote>
<h4 id="换行定义"><a href="#换行定义" class="headerlink" title="换行定义"></a>换行定义</h4><dl><dt>定义1</dt><dd>换行定义.</dd></dl>

<h4 id="图的插入"><a href="#图的插入" class="headerlink" title="图的插入"></a>图的插入</h4><p><img src="/images/avatar.jpg" alt="avatar"></p>
<h4 id="表的插入"><a href="#表的插入" class="headerlink" title="表的插入"></a>表的插入</h4><table>
<thead>
<tr>
<th>Table Header 1</th>
<th>Table Header 2</th>
<th>Table Header 3</th>
</tr>
</thead>
<tbody><tr>
<td>Division 1</td>
<td>Division 2</td>
<td>Division 3</td>
</tr>
<tr>
<td>Division 1</td>
<td>Division 2</td>
<td>Division 3</td>
</tr>
<tr>
<td>Division 1</td>
<td>Division 2</td>
<td>Division 3</td>
</tr>
</tbody></table>
<h4 id="程序语言的插入，以Clone-Jacman-theme为例"><a href="#程序语言的插入，以Clone-Jacman-theme为例" class="headerlink" title="程序语言的插入，以Clone Jacman theme为例:"></a>程序语言的插入，以Clone Jacman theme为例:</h4><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/Simpleyyt/jekyll-theme-next.git</span><br><span class="line"><span class="built_in">cd</span> jekyll-theme-next</span><br></pre></td></tr></table></figure>

<h4 id="小表情emoji的插入，以及网站链接的插入"><a href="#小表情emoji的插入，以及网站链接的插入" class="headerlink" title="小表情emoji的插入，以及网站链接的插入"></a>小表情emoji的插入，以及网站链接的插入</h4><p>测试用小表情，如： :smile: .</p>
<p>更多小表情请见 :wink: : <span class="exturl" data-url="aHR0cHM6Ly93d3cud2VicGFnZWZ4LmNvbS90b29scy9lbW9qaS1jaGVhdC1zaGVldC8=" title="https://www.webpagefx.com/tools/emoji-cheat-sheet/">https://www.webpagefx.com/tools/emoji-cheat-sheet/<i class="fa fa-external-link"></i></span>.</p>
<p>使用知乎的链接类型：</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9iZXN0enVvLmNu" title="https://bestzuo.cn">Sanarous的个人博客<i class="fa fa-external-link"></i></span></p>
<p>:bowtie::smile::laughing::blush::smiley::relaxed::smirk:<br>:heart_eyes::kissing_heart::kissing_closed_eyes::flushed::relieved::satisfied::grin:</p>
<h4 id="公式的插入"><a href="#公式的插入" class="headerlink" title="公式的插入"></a>公式的插入</h4><p>从以下网站可以获得更多公式相关的内容：<br><span class="exturl" data-url="aHR0cDovL2RvY3MubWF0aGpheC5vcmcvZW4vbGF0ZXN0Lw==" title="http://docs.mathjax.org/en/latest/">http://docs.mathjax.org/en/latest/<i class="fa fa-external-link"></i></span></p>
<p>另起一行写公式</p>
<p>$$a^2 + b^2 = c^2$$</p>
<p>如何实现的呢？用 <strong>double $</strong> 符号，如下</p>
<p>$$a^2 + b^2 = c^2$$</p>
<p>行中公式$ sin(x^2) $可以使用<code>$...$</code> 得到。</p>
<p>下角标、非斜体文本的实现：</p>
<p>$$ \mathbf{X}_{n,p} = \mathbf{A}_{n,k} \mathbf{B}_{k,p} $$</p>
<p>效果如下：</p>
<p>\[ \mathbf{X}_{n,p} = \mathbf{A}_{n,k} \mathbf{B}_{k,p} \]</p>
<p>公式的插入有点类似于Latex，可以考虑从MathType直接转化为Latex公式。</p>
<h4 id="高亮文本"><a href="#高亮文本" class="headerlink" title="高亮文本"></a>高亮文本</h4><ul>
<li>正常文本</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alert(&#39;Hello World!&#39;);</span><br></pre></td></tr></table></figure>
<ul>
<li>高亮后的文本</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">alert( <span class="string">'Hello, world!'</span> );</span><br></pre></td></tr></table></figure>

<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span></span></span><br><span class="line">  puts <span class="string">'foo'</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>


<ul>
<li>C++的高亮形式</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">(<span class="keyword">int</span> arg1, <span class="keyword">int</span> arg2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="built_in">string</span> str;</span><br><span class="line">  foo(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">"Hello World"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>工科生的基本功</category>
        <category>GitHub</category>
      </categories>
      <tags>
        <tag>GitHub</tag>
        <tag>Cola</tag>
        <tag>Library</tag>
      </tags>
  </entry>
</search>
